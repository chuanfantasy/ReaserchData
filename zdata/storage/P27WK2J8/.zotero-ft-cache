学校代码： 10286 分类号： TH161+.7 密 级： 公开 U D C： 621 学 号： 169307

基于数字孪生的复杂产品装配精度预测 关键技术研究

研究生姓名： 易 扬 导 师 姓 名： 易 红

申请学位类别

工学博士

学位授予单位

东 南 大 学

一级学科名称

机械工程

论文答辩日期 2021 年 11 月 26 日

二级学科名称 机械制造及其自动化 学位授予日期 2021 年 月 日

答辩委员会主席 郭 宇

评 阅 人

2021 年 11 月 30 日

博士学位论文
基于数字孪生的复杂产品装配精度预测 关键技术研究
专 业 名 称：机械工程 研究生姓名：易 扬 导 师 姓 名：易 红
本论文获国家重点研发计划专项子课题（2018YFB1701301）和江苏省基础研究计划前沿引 领技术基础研究专项子课题（BK20202007）项目资助。

RESEARCH ON KEY TECHNOLOGIES OF COMPLEX PRODUCT ASSEMBLY ACCURACY PREDICTION BASED ON
DIGTIAL TWIN
A Dissertation Submitted to Southeast University
For the Academic Degree of Doctor of Engineering
BY YI Yang
Supervised by Prof. YI Hong
School of Mechanical Engineering Southeast University November 2021

东 南 大 学 毕 业 论 文 独 创 性 声 明

本 人 声 明 所呈 交 的 毕 业论 文是我 个 人 在导 师指 导 下 进 行 的 研究 工 作 及 取得 的 研 究 成 果 。   尽 我所 知 ， 除 了 文 中 特 别加 以 标 注和 致谢 的 地方 外 ， 论 文 中 不 包含 其他 人 己 经 发表或 撰写 过   的 研 宂 成 果 ， 也不 包含 为 获 得 东 南 大 学 或 其它 教 育机 构 的 学 位或 证 书 而 使用 过 的 材料 。 与 我   一 同 工作 的 同志 对本 研宄 所做 的 任何 贡 献均 己 在 论文 中 作 了 明 确 的 说 明 并 表示 了 谢 意 。  

研 究生签 名 ：

曰 期 ：  

东 南 大 学 毕 业 论 文 使 用 授 权 声 明  

东 南 大学 、 中 国 科 学技 术信 息 研 究 所 、 国 家 图 书 馆有 权保留 本 人所送 交毕 业 论文 的 复 印

件和 电子 文 档 ， 可 以 采 用 影 印 、 缩 印 或其 他复制 手段 保存 论文 。 本 人 电 子 文 档 的 内 容 和 纸 质  

论 文 的 内 容 相 致 一 。 除 在 保密 期 内 的 保 密 论文 外 ， 允 许论 文 被查 阅 和 借 阅 ， 可 以 公 布 （ 包   括

 ．

以

电

子

信

息

形

式

刊

登

）

论文 的 全部 内 容 或 中 、

英文摘 要等 部分 内 容 。

论文 的 公布

（ 包括 以 电  

子 信 息 形 式刊 登 ） 授权 东 南 大 学 研 宄 生 院 办 理 。  

研 究 生签 名 ：

摘要
基于数字孪生的复杂产品装配精度预测关键技术研究
博士研究生：易 扬 导师姓名：易 红 学校名称：东南大学
摘 要
近年来，随着机械结构产品不断向更高质量、更高精度、更高性能以及更高集成复 杂度等方向发展，迫使产品装配要求越来越高，其装配性能保障也越来越困难。装配精 度设计作为评价复杂产品装配性能优劣的重要指标之一，其装配精度分析技术是保证产 品装配性能的重要手段。针对面向航空航天、高档数控机床等复杂产品装配精度分析过 程，既要考虑涉及零部件的制造误差，也要考虑装配过程的误差累积与传递方式，同时 还要兼顾实际装配需求与装配工艺约束条件，上述这些因素将影响复杂产品装配后的整 机精度达不到设计要求，难以保证装配质量和装配性能，因此，实施装配前（甚至在实 施装配过程中乃至装配完成前）进行产品装配精度的有效准确预测，是保障并提高复杂 产品整机装配性能的前提。在此背景下，本文通过充分发挥数字化装配技术和数字孪生 技术的双重优势，对基于数字孪生的复杂产品装配精度预测所面临的共性基础关键技术 问题进行了深入研究，从而为实施复杂产品高质量/高精度/高性能装配奠定理论方法、 技术及应用基础。本论文的主要研究内容包括如下几个方面：
（1）提出了复杂产品数字孪生装配工艺模型表达与构建方法。将数字孪生技术与 复杂产品装配工艺设计过程相结合提出了产品数字孪生装配模型的总体实施框架，详细 论述了产品数字孪生装配工艺模型的组织结构与形式化表达；通过关联对象耦合机制实 现了基于模型定义（Model-Based Definition，MBD）的产品数字孪生装配工艺模型表达， 建立了针对不同装配工艺活动阶段的数字孪生装配 MBD 表达模型；在此基础上提出了 产品数字孪生装配工艺模型的演变机制与构建策略，为产品数字孪生装配精度预测提供 了装配过程所需的“模型-信息-数据”基础。
（2）提出了一种面向数字孪生的零件非理想表面模型建模方法。通过引入新一代 产品几何技术规范（Geometrical Product Specifications，GPS）标准体系与数字孪生思想， 构建了以非理想表面模型为载体实现数字孪生装配对象模型（即零件数字孪生模型）几 何参考表达的完整方案；采用肤面形状模型的概念用于零件几何公差表示，并从新一代 GPS 标准链一致性表达的角度，分别给出了基于规范和认证的零件肤面形状模型表达与
I

东南大学博士学位论文
创建方法，详细论述了两种方法的实现流程；并在此基础上阐述了肤面形状模型表面结 合与修正方法，实现了基于肤面形状模型的零件非理想表面模型的生成，为高保真地生 成产品数字孪生装配模型奠定了基础。
（3）提出了基于孪生表面模型的零件装配成功率预分析方法。首先研究了基于装 配接触有向图的孪生表面模型装配定位约束表达方法，并分别提出了基于元素配准调整 和曲面约束匹配的装配特征定位精准求解方法；在零件串并联装配误差传递分析过程中 引入装配结合面以及装配定位优先级，构建了串并联装配结合面组实际误差传递属性计 算求解方法；分析了在装配定位优先级约束下基于孪生表面模型的零件装配特征几何误 差变动关系及约束条件，建立了以装配定位实体无干涉原则为依据的零件装配成功率计 算流程，并采用蒙特卡洛法随机模拟计算实现了基于孪生表面模型的零件装配成功率准 确计算。
（4）提出了考虑多维度误差源的产品数字孪生装配精度预测方法。将数字孪生技 术的核心思想引入至复杂产品装配过程中，提出了考虑多维度误差源的产品数字孪生装 配精度预测总体流程和具体实施步骤；以孪生表面模型为基础，分别采用小位移旋量模 型、规范/认证生成方法、有限元分析以及装配特征位姿定位求解方法对零件制造误差和 装配过程误差进行建模，实现了考虑多维度误差源的产品装配综合误差建模与表达；并 阐述了基于装配动态尺寸链和误差流理论的产品装配偏差传递更新迭代机制，提出了基 于雅可比-孪生表面模型的产品装配误差分析计算方法，实现了考虑多维度误差源的产 品数字孪生装配精度预测。通过实例研究结果对比分析，验证了所提方法的准确性。
（5）搭建了基于数字孪生的产品装配精度预测集成演示系统，详细介绍了该集成 演示系统的实验平台和应用实施流程，对上述系统的各个功能模块和实际应用效果进行 了分析与验证，为基于数字孪生的复杂产品装配精度预测与保障提供了一种切实可行的 解决方案。
关键词：复杂产品；装配精度预测；数字孪生；肤面形状模型；装配成功率；多维度误 差源；公差分析
II

ABSTRACT
Research on Key Technologies of Complex Product Assembly Accuracy Prediction Based on Digital Twin
Ph. D. Candidate: YI Yang Supervisor: Prof. YI Hong
Southeast University
ABSTRACT
In recent years, as mechanical structure products continue to develop in the direction of higher quality, higher accuracy, higher performance, and higher integration complexity, the assembly requirements of complex products have become higher and higher, and the guarantee of assembly performance has also become more and more difficult. The assembly accuracy design is one of the important indicators to evaluate the assembly performance of complex products, and the related assembly accuracy analysis technology is an important means to ensure the product assembly performance. For the assembly accuracy analysis process of complex products, such as aerospace products and high-precision machine tools, it is necessary to consider not only the manufacturing error of parts and components, but also the error accumulation and transmission of the assembly process, and the actual assembly requirements and assembly process constraints. These factors will affect the accuracy of the complete product which make it unable to meet the design requirements and difficult to ensure the assembly quality and assembly performance. Therefore, before the implementation of the assembly, even during the implementation of the assembly process or even before the assembly is completed, the effective and accurate prediction of product assembly accuracy is the basic prerequisite for guaranteeing and improving the assembly performance of complex products. In this context, by making full use of the dual advantages of digital assembly technology and digital twin technology, the common basic key technical problems of complex product assembly accuracy prediction based on digital twin are deeply studied in this paper. It lays the foundation for theoretical methods, technologies and applications to implement the high-quality, highprecision and high-performance assembly of complex products. The dissertation is organized as follows:
(1) The model expression and information management methods of digital twin-based
III

东南大学博士学位论文
assembly process model (DT-APM) for complex products are proposed. Combing the digital twin technology with the assembly process design for complex products, the overall implementation framework of DT-APM is presented, and the organization structure and formal expression of DT-APM are discussed in detail. Then, the model expression of DT-APM based on model-based definition (MBD) is realized through the object-related coupling mechanism, and a MBD-based expression model for DT-APM is established for different activity stages of assembly process. On this basis, the evolution mechanism and construction strategy of DTAPM for complex products are proposed. It provides the required “model-information-data” basis for the assembly accuracy prediction of digital twin-based assembly.
(2) A novel modeling method of non-ideal surface model for digital twin is proposed. By introducing new-generation geometrical product specifications (GPS) and the idea of digital twin, a complete scheme for geometrical reference representation of digital twin-based assembly object model (i.e., part digital twin model) is constructed using non-ideal surface model, and it is used for the representation of part geometric tolerance by the concept of skin model shape. Meanwhile, from the perspective of consistent expression of new-generation GPS standard chain, the model representation and creation methods of part skin model shapes based on specification and verification are respectively given, and the realization process of two methods are discussed in details. On this basis, the combination and correction methods of part skin model shapes are introduced, so as to realize the generation of the non-ideal surface model based on skin model shapes, which lays the foundation for the high-fidelity generation of digital twin-based assembly model of complex products.
(3)A pre-analysis method of assembly success rate based on digital twin-based surface model is proposed. Firstly, the constraint expression method of assembly positioning of digital twin-based surface model based on assembly contact oriented graph is studied. And then, two accurate solution methods of assembly positioning between assembly features based on the element registration adjustment and the constrained surface registration are proposed, respectively. Secondly, by introducing the assembly joint surface and considering the assembly location priority in the analysis process of assembly error transmission in serial and parallel assembly, the calculation method of actual error transfer properties of joint surface groups in serial and parallel assembly is constructed. The geometric error variation relationship and constraint conditions between assembly features based on digital twin-based surface model are
IV

ABSTRACT
analyzed under the constraint of assembly location priority, and the calculation procedure of assembly success rate based on the principle of non-interference in the assembly positioning is established. Finally, by the calculation of the Monte Carlo simulation, the accurate calculation of assembly success rate based on digital twin-based surface model is realized.
(4) A new accuracy prediction method of digital twin-based assembly for complex products considering multi-dimensional error sources is proposed. By introducing digital twin technology into the assembly process of complex products, the overall process and implementation steps of the digital twin-based assembly accuracy prediction considering multidimensional error sources are proposed. And then, the part manufacturing error and assembly process error based on digital twin-based surface model are respectively constructed by using small displacement torsor, specification or verification generation method, finite element analysis and assembly positioning method, which realizes the comprehensive error modeling and representation of multi-dimensional error sources for assembly. Moreover, the update and iteration mechanism of assembly error transmission based on dynamic dimensional chain and stream-of-variation theory is elaborated, and the assembly error calculation based on the Jacobian-torsor model and digital twin-based surface model is proposed, which realizes the digital twin-based assembly accuracy prediction considering multi-dimensional error sources. Finally, the accuracy of the proposed method is verified by the comparative analysis of case study.
(5) An integrated demonstration system of assembly accuracy prediction for complex products based on digital twin is constructed. The experimental platform and application implementation process of the integrated demonstration system are introduced in detail. And then, various functional modules and actual application effects of the above-mentioned system are analyzed and verified, which provides a practical feasible solution for assembly accuracy prediction and assurance of complex products based on digital twin.
Keywords：complex product; assembly accuracy prediction; digital twin; skin model shape; assembly success rate; multi-dimensional error sources; tolerance analysis
V

目录
目 录
摘 要............................................................................................................................................................... I
ABSTRACT ................................................................................................................................................ III 目 录........................................................................................................................................................... VII 图索引 ........................................................................................................................................................... IX 表索引....................................................................................................................................................... XIII 缩略词......................................................................................................................................................... XV 第一章 绪论................................................................................................................................................... 1
1.1 课题背景与研究意义 ...................................................................................................................... 1 1.1.1 课题背景 ............................................................................................................................... 1 1.1.2 研究意义 ............................................................................................................................... 3
1.2 复杂产品数字化装配建模与仿真技术发展趋势 .......................................................................... 4 1.2.1 计算机辅助装配技术 ........................................................................................................... 4 1.2.2 虚拟/增强现实装配技术 ...................................................................................................... 8 1.2.3 数字孪生装配技术 ............................................................................................................. 13
1.3 复杂产品装配精度预测相关技术与方法的研究现状 ................................................................ 17 1.3.1 产品装配工艺模型表达与构建技术及相关方法 ............................................................. 18 1.3.2 产品零件公差与形状误差建模技术及相关方法 ............................................................. 20 1.3.3 产品装配偏差传递与误差累积建模技术及相关方法 ..................................................... 23 1.3.4 产品装配精度预测与控制技术及相关方法 ..................................................................... 27 1.3.5 存在的问题 ......................................................................................................................... 30
1.4 本文主要研究内容及章节安排 .................................................................................................... 31 1.4.1 主要研究内容 ..................................................................................................................... 31 1.4.2 章节安排 ............................................................................................................................. 32
第二章 复杂产品数字孪生装配工艺模型表达与构建技术 ..................................................................... 35 2.1 引言................................................................................................................................................ 35 2.2 面向装配的产品数字孪生模型总体框架 .................................................................................... 35 2.3 三维装配工艺模型的结构形式 .................................................................................................... 38 2.3.1 三维装配工艺模型的定义 ................................................................................................. 38 2.3.2 三维装配工艺模型的构成 ................................................................................................. 40 2.4 数字孪生装配工艺模型的结构形式 ............................................................................................ 42 2.5 数字孪生装配工艺模型表达与构建方法 .................................................................................... 45 2.5.1 数字孪生装配工艺模型的关联耦合机制 ......................................................................... 45 2.5.2 数字孪生装配工艺模型的演变机制 ................................................................................. 47 2.6 应用分析........................................................................................................................................ 50 2.7 本章小结........................................................................................................................................ 51
第三章 面向数字孪生的零件非理想表面模型建模技术 ......................................................................... 53 3.1 引言................................................................................................................................................ 53 3.2 新一代 GPS 标准与数字孪生....................................................................................................... 53 3.3 面向数字孪生的零件表面模型表达机制 .................................................................................... 55 3.4 基于肤面形状模型的零件非理想表面模型建模 ........................................................................ 57 3.4.1 肤面形状模型定义 ............................................................................................................. 58 3.4.2 肤面形状模型生成方法 ..................................................................................................... 58 3.4.3 基于肤面形状模型的零件非理想表面模型生成 ............................................................. 74 3.5 实例分析........................................................................................................................................ 78
VII

东南大学博士学位论文
3.6 本章小结........................................................................................................................................ 83 第四章 基于孪生表面模型的零件装配成功率预分析技术 ..................................................................... 85
4.1 引言................................................................................................................................................ 85 4.2 孪生表面模型装配定位约束表达与求解方法 ............................................................................ 86
4.2.1 相关术语 ............................................................................................................................. 86 4.2.2 基于装配接触有向图的孪生表面模型装配定位约束关系表达 ..................................... 88 4.2.3 基于孪生表面模型的装配特征定位求解方法 ................................................................. 89 4.3 孪生表面模型串并联装配误差传递分析 .................................................................................... 97 4.3.1 问题描述 ............................................................................................................................. 97 4.3.2 孪生表面模型串并联装配结合面 ..................................................................................... 99 4.3.3 孪生表面模型装配实际误差传递属性 ........................................................................... 100 4.4 基于孪生表面模型的零件配合误差变动与装配成功率分析 .................................................. 105 4.4.1 基于孪生表面模型的零件配合误差变动解析 ............................................................... 106 4.4.2 基于孪生表面模型的零件装配成功率计算方法 ........................................................... 109 4.5 实例分析...................................................................................................................................... 111 4.6 本章小结...................................................................................................................................... 116 第五章 考虑多维度误差源的产品数字孪生装配精度预测技术 ........................................................... 117 5.1 引言.............................................................................................................................................. 117 5.2 考虑多维度误差源的产品数字孪生装配精度预测总体流程 .................................................. 117 5.3 考虑多维度误差源的产品装配偏差分析 .................................................................................. 120 5.3.1 多维度误差源及其误差表达 ........................................................................................... 120 5.3.2 产品装配偏差传递更新迭代机制 ................................................................................... 127 5.4 基于改进雅可比-旋量模型的产品数字孪生装配精度预测 ..................................................... 131 5.4.1 雅可比-旋量模型及其改进.............................................................................................. 131 5.4.2 产品数字孪生装配精度预测 ........................................................................................... 136 5.4.3 实例分析 ........................................................................................................................... 138 5.5 本章小结...................................................................................................................................... 153 第六章 基于数字孪生的复杂产品装配精度预测应用验证 ................................................................... 155 6.1 引言.............................................................................................................................................. 155 6.2 基于数字孪生的产品装配精度预测集成演示系统设计 .......................................................... 155 6.2.1 集成演示系统需求分析 ................................................................................................... 155 6.2.2 集成演示系统体系结构 ................................................................................................... 156 6.2.3 集成演示系统工作流程 ................................................................................................... 158 6.2.4 集成演示系统软件界面 ................................................................................................... 160 6.3 在面向航天器结构板部装的产品装配精度预测中的应用验证 .............................................. 161 6.3.1 应用背景介绍 ................................................................................................................... 161 6.3.2 构建软硬件平台 ............................................................................................................... 161 6.3.3 实例应用效果分析 ........................................................................................................... 164 6.4 本章小结...................................................................................................................................... 174 第七章 总结与展望................................................................................................................................... 175 7.1 全文总结...................................................................................................................................... 175 7.2 研究展望...................................................................................................................................... 177 致 谢........................................................................................................................................................... 179 参考文献..................................................................................................................................................... 181 附件 1 攻读博士学位期间取得的学术成果清单.................................................................................... 199 附件 2 攻读博士学位期间参与的科研项目............................................................................................ 203
VIII

图索引
图索引
图 1-1 复杂产品系统实例............................................................................................................................. 1 图 1-2 本文主要研究内容与组织架构....................................................................................................... 31 图 2-1 面向装配的产品数字孪生模型参考架构....................................................................................... 37 图 2-2 复杂产品数字孪生装配模型总体实施框架................................................................................... 38 图 2-3 某框架类产品装配体的三维装配过程模型实例........................................................................... 39 图 2-4 三维装配工艺模型的组织结构示意图........................................................................................... 40 图 2-5 具有多层次嵌套结构的产品装配工艺层级关系模型示意图....................................................... 41 图 2-6 数字孪生装配工艺模型的组织结构示意图................................................................................... 44 图 2-7 面向数字孪生装配 MBD 表达模型的关联耦合机制.................................................................... 46 图 2-8 产品数字孪生装配工艺模型演变机制示意图............................................................................... 47 图 2-9 产品数字孪生装配工艺模型构建策略框架示意图....................................................................... 48 图 2-10 产品数字孪生装配工艺模型构建实现流程图............................................................................. 49 图 2-11 某型双级齿轮减速器结构及装配爆炸图..................................................................................... 50 图 2-12 产品数字孪生装配工艺模型表达与信息管理的实例界面图例................................................. 51 图 3-1 零件数字孪生模型与新一代 GPS 标准体系交流平台 ................................................................. 54 图 3-2 新一代 GPS 标准体系下零件数字孪生模型的典型特征.............................................................. 54 图 3-3 新一代 GPS 标准体系下的物理实体与数字虚体之间的操作...................................................... 55 图 3-4 不同阶段下面向数字孪生的零件表面模型信息组成要素........................................................... 56 图 3-5 零件数字孪生模型的映射生成方法示意图................................................................................... 57 图 3-6 产品公称表面模型、肤面模型、肤面模型形状及实际工件的表达示意图 ............................... 58 图 3-7 肤面形状模型生成的实现流程....................................................................................................... 59 图 3-8 产品设计规范操作过程零件非理想表面模型建模的常见建议仿真方法 ................................... 59 图 3-9 规范操作过程生成肤面形状模型的流程图................................................................................... 60 图 3-10 CAD 模型离散化处理、特征分割以及网格细化操作 ................................................................ 61 图 3-11 单位圆域平面特征基函数形状轮廓误差重构............................................................................. 65 图 3-12 圆柱面特征重构的典型几何形状图例......................................................................................... 67 图 3-13 认证操作过程生成肤面形状模型的流程图................................................................................. 68 图 3-14 零件表面形貌误差成分频带划分................................................................................................. 70 图 3-15 零件表面形貌特征高度场的小波分解具体流程图..................................................................... 72 图 3-16 零件表面形貌特征高度场多尺度信息提取分析流程................................................................. 73 图 3-17 基于肤面形状模型的零件非理想表面模型生成思路................................................................. 74 图 3-18 基于肤面形状模型的零件非理想表面结合连接情形................................................................. 75 图 3-19 基于肤面形状模型的零件非理想表面结合方法对比................................................................. 75 图 3-20 基于有限元分析的肤面形状模型变形量修正流程..................................................................... 76 图 3-21 考虑载荷约束的肤面形状模型表面修正..................................................................................... 77 图 3-22 基于肤面形状模型的零件非理想表面模型建模流程................................................................. 78 图 3-23 某简单零件模型示例..................................................................................................................... 78 图 3-24 零件模型关键表面特征识别、提取与离散化处理..................................................................... 79 图 3-25 零件平面特征和圆柱孔特征的规范肤面形状模型偏差仿真结果............................................. 80 图 3-26 实物零件表面测量及其测量结果................................................................................................. 80 图 3-27 实物零件实际测量原始表面形貌可视化仿真............................................................................. 81 图 3-28 实物零件实际测量截面轮廓多尺度形貌误差分离..................................................................... 82 图 3-29 零件平面特征仿真生成的认证肤面形状模型............................................................................. 82
IX

东南大学博士学位论文
图 3-30 经表面结合形成零件关键表面的肤面形状模型......................................................................... 83 图 3-31 面向数字孪生的零件非理想表面模型应用实施框架................................................................. 83 图 4-1 零件装配可能出现的情形............................................................................................................... 85 图 4-2 理想 CAD 模型与孪生表面模型的零件特征几何要素提取对比 ................................................ 88 图 4-3 简单装配体及其对应的 AOG 与 ACOG 对比示意图................................................................... 89 图 4-4 零件装配特征位姿定位求解过程................................................................................................... 90 图 4-5 二维零件真实表面轮廓装配约束定位........................................................................................... 92 图 4-6 二维非理想真实几何形状特征装配位姿定位调整求解流程....................................................... 93 图 4-7 基于孪生表面模型的实际零件真实接触装配状态....................................................................... 94 图 4-8 基于曲面约束匹配法的孪生表面模型装配特征位姿定位求解流程........................................... 95 图 4-9 平面-平面组合的多基准装配定位连接 ......................................................................................... 98 图 4-10 平面-圆柱面组合的多基准装配定位连接 ................................................................................... 99 图 4-11 串并联装配结合面示意图............................................................................................................. 99 图 4-12 异体并联装配结合面的简化等效图........................................................................................... 100 图 4-13 串并联装配结合面实际误差传递属性计算流程....................................................................... 105 图 4-14 平面特征并联装配配合的“3-2-1”定位形式 .......................................................................... 106 图 4-15 两零件并联装配特征之间形成的装配接触有向图................................................................... 106 图 4-16 基于孪生表面模型的零件装配成功率计算流程....................................................................... 110 图 4-17 某产品仪器内部简化装配体模型的零件设计图与三维图及实物图例 ................................... 111 图 4-18 简化装配体模型各装配特征对应的孪生表面模型................................................................... 113 图 4-19 各装配特征配合的装配成功率计算结果................................................................................... 115 图 5-1 考虑多维度误差源的复杂产品数字孪生装配精度预测总体流程............................................. 118 图 5-2 考虑多维度误差源的复杂产品数字孪生装配精度预测方法应用实施步骤 ............................. 119 图 5-3 包含几何形状误差的两个零件装配............................................................................................. 120 图 5-4 长方体零件的设计模型和实物模型示意图................................................................................. 122 图 5-5 零件顶部平面形成的加工制造误差............................................................................................. 123 图 5-6 零件制造误差建模流程图............................................................................................................. 123 图 5-7 装配过程误差建模流程图............................................................................................................. 124 图 5-8 基于孪生表面模型的零件串联装配定位误差求解流程............................................................. 126 图 5-9 考虑多维度误差源的产品装配体数字孪生模型生成流程......................................................... 127 图 5-10 考虑多维度误差源的装配偏差传递示意图............................................................................... 128 图 5-11 装配尺寸链示意图....................................................................................................................... 129 图 5-12 基于误差流理论的产品装配过程误差累积与传递................................................................... 131 图 5-13 传统的雅可比-旋量模型与改进后的雅可比-孪生表面模型 .................................................... 135 图 5-14 某型结构装配体及其对应的装配连接关系............................................................................... 136 图 5-15 产品数字孪生装配精度预测基本框架与分析流程................................................................... 137 图 5-16 简单装配体爆炸图实例及各零件 GD&T 信息 ......................................................................... 139 图 5-17 研究实例的装配偏差传递路径图............................................................................................... 140 图 5-18 方法 1 和方法 2 得到的装配功能需求（G）偏差变动域（z 轴方向）.................................. 144 图 5-19 方法 3 和方法 4 得到的装配功能需求（G）偏差变动域（z 轴方向）.................................. 147 图 5-20 CAE 软件计算得到的接触变形误差分析结果........................................................................... 148 图 5-21 考虑接触变形的平面与圆柱面孪生表面模型重构................................................................... 149 图 5-22 方法 5 和方法 6 得到的装配功能需求（G）偏差变动域（z 轴方向）.................................. 151 图 5-23 点 G 在最终装配空间位置分布图对比...................................................................................... 151 图 5-24 装配功能需求目标尺寸偏差变动概率密度分布规律对比....................................................... 152
X

图索引
图 6-1 基于数字孪生的复杂产品装配精度预测集成演示系统需求分析............................................. 156 图 6-2 基于数字孪生的复杂产品装配精度预测集成演示系统体系结构图......................................... 157 图 6-3 基于数字孪生的复杂产品装配精度预测集成演示系统业务过程模型 ..................................... 158 图 6-4 复杂产品数字孪生装配精度预测功能实施技术路线图............................................................. 159 图 6-5 三维装配工艺设计与精度预测仿真软件平台运行界面............................................................. 160 图 6-6 基于数字孪生的复杂产品装配精度预测集成演示系统实验平台............................................. 163 图 6-7 基于数字孪生的复杂产品装配精度预测集成演示系统实施流程............................................. 164 图 6-8 数字孪生装配工艺模型构建与装配精度预测计算分析模块..................................................... 165 图 6-9 数字孪生装配工艺模型构建模块................................................................................................. 166 图 6-10 数字孪生装配工艺模型构建模块软件界面............................................................................... 166 图 6-11 L 型支架零件模型 ........................................................................................................................ 167 图 6-12 L 型支架零件关键几何特征生成的规范肤面形状模型 ............................................................ 167 图 6-13 装配精度预测计算分析模块....................................................................................................... 168 图 6-14 装配精度预测计算分析模块软件界面....................................................................................... 168 图 6-15 装配工步为安装水平隔板结构板的装配精度信息模型构建................................................... 169 图 6-16 当前装配工序下对应的装配接触有向图和局部坐标系........................................................... 170 图 6-17 当前装配工序下对应的装配功能需求在 x 轴方向的偏差变动域 ........................................... 172 图 6-18 面向某卫星典型件结构板部装体的现场装配应用实例........................................................... 173
XI

表索引
表索引
表 1.1 数字孪生概念的不同定义内容及理解 ........................................................................................... 13 表 3.1 矩形平面特征基函数形状轮廓误差建模重构 ............................................................................... 63 表 3.2 前 3 阶的 Zernike 多项式极坐标形式............................................................................................. 65 表 3.3 基于 Legendre-Fourier 多项式的圆柱面特征几何形状意义描述 ................................................. 67 表 3.4 接触式与非接触式扫描点云测量方法对比 ................................................................................... 69 表 3.5 零件平面特征与圆柱孔特征仿真生成的规范肤面形状模型 ....................................................... 79 表 4.1 典型串并联装配定位连接类型图例 ............................................................................................... 87 表 4.2 常见四类装配结合面的误差传递属性 ......................................................................................... 101 表 4.3 常见的装配配合类型几何误差变动关系及约束条件 ................................................................. 109 表 4.4 简化装配体模型各装配特征的几何尺寸变动分布参数 ............................................................. 114 表 5.1 七种“恒定类”几何功能要素表面及其旋量参数 ..................................................................... 121 表 5.2 常见装配功能要素表面的公差域及其对应旋量参数约束条件 ................................................. 133 表 5.3 典型串并联装配节点..................................................................................................................... 138 表 5.4 不同的产品装配精度预测方法..................................................................................................... 140 表 5.5 装配功能需求与各几何功能要素之间几何关系的雅可比矩阵 ................................................. 141 表 5.6 情形一的各旋量变动公差域以及对应的旋量参数约束条件 ..................................................... 142 表 5.7 各零件对应表面的离散点数以及生成的孪生表面模型 ............................................................. 145 表 5.8 基于孪生表面模型的所有串并联功能要素对的装配变动小位移旋量 ..................................... 146 表 5.9 考虑接触变形的所有串并联功能要素对的装配变动小位移旋量 ............................................. 149 表 6.1 所有装配特征对之间几何关系的雅可比矩阵及其小位移旋量表达 ......................................... 171 表 6.2 基于传统装配方法与本文方法的典型件结构板部装实施过程对比 ......................................... 173
XIII

缩略词
缩略词

缩略词 AAPI ACO ACOG ADMD ADTM AFR AIPM AJS

英文全称
As-built Assembly Process Information
Ant Colony Optimization
Assembly Contact Oriented Graph
Assembly Deformation Measuring Data
Assembly Digital Twin Model
Assembly Functional Requirement
Assembly In-Process Model
Assembly Joint Surface

中文全称
实做装配工 艺信息 蚁群算法
装配接触有 向图 装配变形实 测数据 装配数字孪 生模型 装配功能需 求 装配工序间 模型 装配结合面

ALP AMD AN

Assembly Location Priority
Assembly Measuring Data
Assembly Node

装配定位优 先级 装配实测数 据 装配节点

AOG APIS APJ APMD AR ARA ASP ASPP AWPM B-Rep CAA CAAPP

Assembly Oriented Graph
Assembly Process Information Set
Assembly Positioning Joint
Assembly Process Measuring Data
Augmented Reality Augmented Realitybased Assembly
Assembly Sequence Planning
Assembly Sequence and Path Planning
Assembly Working Procedure Model
Boundary Representation
Computer-Aided Assembly
Computer-Aided Assembly Process Planning

装配有向图
装配工艺信 息数据集 装配定位连 接 装配过程实 测数据 增强现实 增强现实装 配 装配顺序规 划 装配顺序和 路径规划 三维装配过 程模型 边界表示法
计算机辅助 装配 计算机辅助 装配工艺规 划

缩略词 CAD CAPP CAT CE

英文全称
Computer-Aided Design Computer-Aided Process Planning Computer-Aided Tolerancing Concurrent Engineering

中文全称
计算机辅助 设计 计算机辅助 工艺规划 计算机辅助 公差设计 并行工程

CFEP CIMS CPS CSG CSR CyP

Contact Functional Elment Pair Computer Integrated Manufacturing System Cyber-Pyhsics System
Constructive Solid Geometry Constrained Surface Registration Cylindrical Pair

接触副
计算机集成 制造系统 信息物理融 合系统 构造实体法
曲面约束匹 配法 圆柱副

DCM DCT DFA

Different Curve Method Discrete Cosine Transformation
Design for Assembly

DMD DMU

Discrete Modal Decomposition
Digital Mock-Up

差曲线法
离散余弦变 换法 面向装配的 设计 离散模态分 解 数字样机

DOF DSM
DSP
DT

Degree of Freedom Different Surface Method
Disassembly Sequence Planning
Digital Twin

自由度 差表面法
拆卸序列规 划 数字孪生

DTA DTM

Digital Twin-based Assembly
Digital Twin Model

DTAM
DTAOM

Digital Twin-based Assembly Model
Digital Twin-based Assembly Object Model

数字孪生装 配 数字孪生模 型 数字孪生装 配模型 数字孪生装 配对象模型

XV

（续 1）

东南大学博士学位论文

缩略词 DTAPM DTPSM ERA FEA GA GD&T
GFE GPS HATL HC ICP IFEP KFC MAU MBD MCMC MFC
MMD NPC NSM
NURBS
OWL

英文全称
Digital Twin-based Assembly Process Model Digital Twin-oriented Part Surface Model
Element Registration and Adjustment
Finite Element Analysis
Genetic Algorithm
Geometrical Dimensioning and Tolerancing Geometric Functional Element Geometrical Product Specifications Hierarchical Assembly Task List Hard Constraint
Iterative Closest Point
Internal Functional Elment Pair Key Function Characteristic Meta-action Assembly Unit Model-Based Definition Markov Chain Monte Carlo Mircrosoft Foundation Class
Metric Modal Decomposition Non-deterministic Polynomial-Complete Nominal Surface Model
Non-Uniform Ratioanl B-Splines
Web Ontology Language

中文全称
数字孪生装 配工艺模型
面向数字孪 生的零件表 面模型 元素配准调 整法 有限元分析 法 遗传算法
几何尺寸公 差
几何功能要 素 产品几何技 术规范 层次装配任 务链 硬约束
最近点迭代 搜索算法 内部副
关键功能特 性 元动作装配 单元 基于模型定 义 马尔科夫蒙 特卡洛法 微软基础类 库
公制模态分 解 NP 完全问题
公称表面模 型
非均匀有理 B 样条 网络本体语 言

缩略词 PAPI
PCA
PCM PDTM PFEP PLM
PlP PMI PMMD PSE PSO RRT SC SDT SFEP SM SMS SoV SpP SSM SWRL TTRS

英文全称 Pre-planning Assembly Process Information
Pricipal Component Analysis
Progressive Contact Method Part Digital Twin Model
Parallel Functional Elment Pair Product Lifecycle Management
Planar Pair
Product Manufacturing Information Part Manufacturing Measuring Data Parametric Space Envelope Particle Swarm Optimization Rapidly-exploring Random Tree Soft Constraint
Small Displacement Torsor Serial Functional Elment Pair Skin Model
Skin Model Shape
Stream of Variation
Spherical Pair
Specification Surface Model Semantic Web Rule Language Topologically and Technologically Related Surface

中文全称 预规划装配 工艺信息
主成分分析
渐进接触法
零件数字孪 生模型 并行功能要 素对 产品全生命 周期管理
平面副
产品制造信 息 零件制造实 测数据 参数空间包 络 粒子群算法
快速扩展随 机树算法 软约束
小位移旋量
串行功能要 素对 肤面模型
肤面形状模 型 误差流
球面副
规范表面模 型 语义网规则 语言 拓扑与工艺 相关联表面

XVI

（续 2）

缩略词 英文全称

VA

Virtual Assembly

VP

Virtual Prototype

VR

Virtual Reality

缩略词

中文全称 虚拟装配 虚拟样机 虚拟现实

缩略词 英文全称

VRA VSM WT

Virtual Reality-based Assembly Verification Surface Model Wavelet Transform

中文全称
虚拟现实装 配 认证表面模 型 小波变换法

XVII

第一章 绪论
第一章 绪论
1.1 课题背景与研究意义
1.1.1 课题背景 装配作为产品研制过程中的关键环节之一，将直接影响产品机械结构及其系统的最
终功能、质量和性能，对产品的开发周期、制造效率以及运行成本等均具有明显的影响。 复杂产品系统（如图 1-1 所示）在客户需求、产品组成、产品技术、制造流程、试验维 护、项目管理、工作环境等诸多方面具有高成本、工程密集型的特点[1]，其产品装配技 术在复杂产品研制过程中扮演了十分重要的角色，它是将各零部件按照规定的技术要求， 在各种装配方法、工艺和装备的协同下组装起来，并经由测试、检验、调试等环节使之 成为合格产品的技术统称[2]。随着复杂产品整机性能保障重心正在逐渐从产品设计、加 工制造环节向装配环节过渡与转移，产品装配技术的相关研究和工程应用越来越多地受 到国内外学术界和企业界的广泛关注和密切跟踪。

(a)某型号商用客机

(b)某型号运载火箭

(c)某型号航天器舱段

(d)某型号航空发动机

(e)某型号火箭发动机 图 1-1 复杂产品系统实例

(f)某型号航天器球形舱体

我们知道，产品的整机性能源自于产品设计、加工制造与装配三个环节的共同保证 [3]，其中，装配环节在产品研制过程中占用劳动量大、费用高且属于生产环节后端，因 此，装配对产品整机性能的影响很大，其装配质量将直接决定复杂产品装配性能的好坏。 当前，随着产品零部件的结构设计以及加工制造水平的显著提高，零部件的加工精度往 往可以达到精密乃至超精密水平，甚至超过了部分国外发达国家的加工精度，但是装配 后的产品或装备的性能仍然难以得到保证。例如，以航天产品装配为例，卫星部装具有 零部件数量种类繁多、结构尺寸变化大且形状不规整、单件小批量生产、装配精度要求

1

东南大学博士学位论文
高、装配协调过程复杂等特点，其现场装配一般被认为是典型的离散装配过程，即便是 在产品零部件全部合格的情况下，也很难保证产品装配的一次成功率，往往需要经过多 次选择试装、修配、调整装配，甚至拆卸、返工才能装配出合格产品[4]。一般来说，产 品整机装配性能是指受装配环节相关因素耦合影响的性能，其中装配精度作为装配环节 最为直接的关键参数，是衡量产品装配性能和装配质量优劣的重要评价指标之一。装配 精度是指产品装配后精度输出的关键几何参数或装配功能需求（Assembly Functional Requirement，AFR）的几何要素在某一指定方向上允许的误差最大变动值，主要由零件 误差建模、装配偏差传递与累积以及装配误差分析等环节共同决定，将受到来自零件加 工制造误差、材料物理属性、定位联接形式、装配工艺手段等诸多方面的综合影响，而 装配精度预测则是在实施装配前利用相关技术手段和计算方法有效预测产品最终装配 精度的过程，其本质是一种装配误差分析过程。因此，对于高端复杂精密产品或装备而 言，在实施装配前（甚至在实施装配过程中乃至装配完成前）进行产品装配体误差的有 效、准确预测，是保障并提高复杂产品整机装配性能的基础前提。
目 前 ， 传 统 的 装 配 精 度 预 测 方 法 是 利 用 产 品 设 计 的 几 何 尺 寸 公 差 （ Geometrical Dimensioning and Tolerancing，GD&T）信息，通过计算机辅助公差设计分析手段进行装 配误差分析，从而获取目标装配精度，并验证产品公差设计的合理性并指导产品装配工 艺设计，力图在产品装配过程中以最低成本最高效率制造出满足装配精度要求的合格产 品。然而，这种基于理论模型的传统装配精度预测主要以零部件刚体假设为前提，并忽 略了零件制造的形状误差以及大量真实装配环境因素，导致其与实际装配状态并不一致， 难以满足复杂产品高性能高精度高质量的装配需求。
近年来，基于数字化、信息化、智能化的产品全生命周期管理（Product Lifecycle Management，PLM）系统的开发与工程应用等深入研究和落地实施，极大地推动了机械 产品质量保障技术的革新。数字化技术在新一代信息与通信技术（如物联网、大数据、 工业互联网等）以及先进测量技术的支撑和加持下，与机械产品设计、工艺、制造、装 配、检测、运维等过程不断深度融合，在面向 PLM 的产品质量保障应用方面不断拓展 与深化，取得了巨大的经济和社会效益，也正是在这样的背景下，数字孪生（Digital Twin， DT）技术在数字化与信息化逐渐向智能化方向发展过程中再次引起了国内外学术界和 企业界的关注和重视。研究表明，DT 技术可以为复杂产品研制过程带来新的技术手段 和解决途径，能够驱动物理装配空间和虚拟装配空间进行虚实交互融合，使之实现复杂 产品装配模式的转型升级成为可能[5][6][7][8]。通过在产品装配技术中引入 DT 技术，一方 面可以利用 DT 技术真实再现复杂产品装配过程，从而极大提高复杂产品实际装配的效
2

第一章 绪论
率，另一方面可以运用数字孪生装配仿真分析，实现复杂产品装配过程“虚实融合、以 虚控实”的效果，在虚拟装配环境中高保真地模拟物理环境中的装配流程，通过预测产 品装配精度进而实现对产品设计参数和装配工艺的优化与改进。由此可见，DT 技术与 产品装配技术的融合，在继承传统数字化装配研制经验的同时，突破了原有束缚，可以 实现真正意义上的产品装配技术革新与装配性能提升，因此，以装配精度预测为主线， 进一步开展基于 DT 的产品装配技术研究是当前复杂产品/装备制造领域的重要发展方 向和研究热点，这对于提升产品整机装配性能、提高装配效率和装配质量及其降低产品 研制成本等具有重要的现实意义。 1.1.2 研究意义
当前，我国已将“中国制造 2025”作为全面推进实施“制造强国”战略的第一个十 年行动纲领，着力发展和提升我国高端装备制造产业的自主创新能力和国际竞争力，并 将十大领域（航空航天装备、高档数控机床和机器人等）作为国家中长期科学和技术发 展规划项目进行集中攻关[9][10]。近年来，中国制造在高端装备制造业取得了举世瞩目的 发展成就，但不可否认的是在某些领域方面的研发和生产依然存在难以攻破的技术难关， 例如航空航天装备（高推重比/大涵道比发动机、新一代重型运载航天器）、高档数控机 床等复杂机械系统装配质量、装配效率和装配性能不高的问题并没有得到根本性解决。 随着航空航天装备（如飞机、火箭、卫星、导弹等）、高档数控机床等复杂产品朝着大型 化、复杂化、集成化、精密化和智能化等方向发展，加之其机械结构的服役环境也日趋 恶劣化与极限化，复杂产品装配精度要求越来越高、装调难度越来越大，导致复杂产品 的装配性能控制和保障也越来越困难，特别是针对高服役性、高可靠性、高性能保持性 的产品整机装配性能保障也愈发严格[11]，因此，为确保复杂产品的装配性能，零部件的 装配精度预测及其相关的装配工艺性基础问题是非常重要且不容忽视的一环。
本文针对当前复杂机械装备产品装配性能保障以及数字化装配技术面临的共性基 础关键问题，以国家重点研发计划“网络协同制造和智能工厂”专项项目“制造系统在 线工艺规划与产线重构软件工具”中的子课题——“装配工艺智能规划与设计技术” （2018YFB1701301）和江苏省基础研究计划前沿引领技术基础研究专项“重大工程装 备智能设计制造技术基础”中的子课题——“重大工程装备智能装配数字孪生建模技术 基础”（BK20202007）为支撑，着重开展面向航空航天装备等复杂产品装配精度预测与 保障的关键技术研究。本文研究工作拟从基于 DT 的数字化装配模型信息建模及以此为 基础的零件误差建模、装配偏差传递与累积以及装配误差分析过程等四个方面，定量描 述复杂产品装配精度的形成、传递、累积与演变过程，拓宽了产品几何精度设计与装配
3

东南大学博士学位论文
精度预测的技术内涵，并通过 DT 技术将产品精度设计、装配工艺规划、先进测量与检 测技术等融合贯通，实现了面向 PLM 的复杂产品装配精度和装配性能的综合保障，该 研究对于推进数字化信息化智能化技术在复杂产品装配研制过程的应用与产品装配性 能的进一步提升具有重要意义。
1.2 复杂产品数字化装配建模与仿真技术发展趋势
伴随着大规模工业化与大批量生产规模的兴起，以及对产品装配质量要求的不断提 高，产品装配技术经历了从人工/手工装配到自动化/数字化装配（由人到机）、从装配形 式单一效率低下到实行专业化装配分工操作（由简到专）的快速转变，并在计算机和数 字化技术的高速发展和催化下，极大地促进了产品装配技术的迅猛发展，使得当前产品 数字化装配建模与仿真技术得到了快速普及与广泛应用，产品装配技术也由此加速走向 数字化、信息化、智能化时代[12][13]。产品数字化装配建模与仿真技术（以下简称“数字 化装配技术”）是由数字化技术与传统的产品装配技术结合而成的，主要是利用现代计 算机技术、信息技术和人工智能技术等方式手段构建虚拟装配环境下的产品装配数字样 机，并在虚拟装配环境中通过数字化仿真方法模拟产品物理样机在面向 PLM 中的装配 全流程行为，基于产品数字样机开展产品装配工艺设计规划以及可装配性分析，验证产 品装配序列、装配路径、装配精度等是否满足实际工程需求，该技术对于有效指导实际 产品装配操作过程、提高产品装配效率和质量、提升产品装配性能等具有重要意义。回 顾产品数字化装配技术的发展进化史，可以发现数字化装配技术的内涵十分丰富，大体 上可以归纳划分为以三种代表性技术为主的数字化装配技术：（1）以计算机辅助机械工 程技术为代表的产品数字化装配建模与仿真技术，即计算机辅助装配（Computer-Aided Assembly，CAA）技术；（2）以虚拟/增强现实技术为代表的产品数字化装配建模与仿真 技术，即虚拟/增强现实装配（Virtual or Augmented Reality-based Assembly，VRA/ARA） 技术；（3）以数字孪生技术为代表的产品数字化装配建模与仿真技术，即数字孪生装配 （Digital Twin-based Assembly，DTA）技术。 1.2.1 计算机辅助装配技术
CAA 技术作为以计算机辅助为手段的产品 CAx 技术之一，其技术发展得益于计算 机科技和信息技术的突飞猛进。早在 20 世纪 70 年代出现第一代计算机辅助设计 （Computer-Aided Design，CAD）系统开始，随着三维特征造型和参数化技术以及计算 机 集 成 制 造 系 统 （ Computer Integrated Manufacturing System ， CIMS ）、 并 行 工 程 （Concurrent Engineering，CE）、协同设计与制造等技术的快速普及和发展，CAx 技术
4

第一章 绪论
也逐渐围绕产品装配工艺设计问题相继出现了面向装配的设计（Design for Assembly， DFA）、计算机辅助装配工艺规划（Computer-Aided Assembly Process Planning，CAAPP） 以及面向装配的计算机辅助公差设计（Computer-Aided Tolerancing，CAT）等概念，有 力地推动了 CAA 技术的发展[14]。
广义的 CAA 技术内涵非常宽泛，不仅包括与装配相关的计算机辅助产品结构设计 以及工艺规划技术，而且还包括利用计算机辅助装配工装/夹具设计以及装配测量与检 测技术等。这里提及的 CAA 技术是指以 CAAPP 为代表的狭义的产品数字化装配技术， 具体是指利用计算机构建产品数字样机（Digital Prototype，DP 或 Digital Mock-Up，DMU） 并用于规划和仿真产品实际装配过程的技术统称。当前，基于 CAA 的产品数字化装配 建模与仿真技术研究发展主要围绕基于语义本体的装配工艺信息建模以及基于智能算 法的装配顺序与路径规划仿真两个方面展开[15]。
（1）基于语义本体的装配工艺信息建模方法 产品数字化装配建模是指利用计算机采用合理的数据结构对虚拟装配环境下零件 间的位置、配合关系、定位约束等装配设计意图，以及装配顺序、路径等工艺信息进行 全要素的存储和表达，以实现多层次多粒度的产品装配信息抽象描述[16]。目前针对如何 快速直接利用产品几何与非几何信息用于支持面向 CAA 的装配工艺决策，提升装配工 艺设计效率和自动化程度成为了产品装配工艺信息建模方法研究的重中之重[17]，其中， 语义本体建模[18][19][20]作为装配工艺信息模型的建模方法之一，可以解决虚拟装配环境 中装配知识获取以及智能化推理不足的缺点，近年来受到了国内外的广泛关注。 刘振宇等人[21]运用装配语义-约束图实现了产品装配模型的编辑和产品设计意图的 维护，并通过基于模糊参量的装配设计语义的表达、传递与转化，可以在虚拟装配设计 系统中引导产品完成装配操作；进一步，文献[22]还系统性地阐述了面向过程与历史的 产品装配建模理论与方法，提出了分层次的零件信息模型以及基于语义的装配关系描述 方法，通过记录虚拟装配建模中的过程和历史信息，可以捕获虚拟装配建模过程中设计 者的装配设计意图。候文君[23]重点研究了基于情景感知的智能虚拟装配系统若干关键技 术，运用本体论、人工智能、多 Agent 技术等手段提出了一种可操作性强的层次化装配 语义模型，为面向虚拟装配的情景表示、情景构建、情景推理及其情景感知和应用奠定 了基础。Kim 等人[24]提出了一种基于本体的装配设计范式，通过运用本体构建装配关系 模型用于显性化地表达装配工程语义信息，在此基础上，利用网络本体语言（Web Ontology Language，OWL）和语义网规则语言（Semantic Web Rule Language，SWRL） 表达隐含在装配设计约束信息中的知识，并在真实机械装配模型中得到了验证。Zhu 等
5

东南大学博士学位论文
人[25]提出了一种面向交互式装配工艺生成的装配语义建模方法，该装配语义模型可通过 交互式装配操作实现装配语义生成、语义处理以及装配运动提取，有利于虚拟装配操作 环境下装配工艺的生成需求。Demoly 等人[26]介绍了一种适用于并行工程和装配顺序规 划的基于几何骨架的装配语义定义（SKL-ACD）建模方法，集成了装配工艺信息以及产 品早期开发阶段所用到的知识，并在 CAD 工具中开发了对应的辅助产品几何骨架计算 和生成的原型系统并得到了应用验证。吕美玉等人[27]提出了一种面向虚拟装配的多层次 装配语义模型，并着重分析了包括装配空间位置关系、配合特征、装配特征、装配工程 关系等装配语义信息的分析提取过程，最后基于 Protégé 进行装配语义本体建模，并通 过三维虚拟装配工艺规划（3DVAPP）系统得以初步验证。张闻雷等人[28]提出了多层次 多维度的产品装配集成模型，运用装配领域模型表达公共语义结构与领域知识，构建了 面向装配拓扑结构、装配关系、装配工艺及仿真于一体的单一装配数据源，并在 AeroAssem 装配设计系统中得以应用验证。Qiao 等人[29]提出了一种几何增强的装配工 艺本体建模和推理框架，可显性化地表达面向装配顺序规划的产品几何信息与装配工艺 信息存在的隐含关系，并以该装配工艺本体模型为基础对产品装配结构、装配工艺、装 配定位约束以及装配实体几何的本体论语言描述逻辑（OWL-DL）进行了合理表达，最 后在某传动器产品装配顺序规划实例中验证了该框架的有效性。
（2）基于智能算法的装配顺序和路径规划仿真 产品装配顺序和路径规划（Assembly Sequence and Path Planning，ASPP）是基于 CAA 的产品数字化装配技术中最为重要的两大关键问题，其本质上是解决如何在产品数字化 预装配过程中寻找到一条合理的零部件装配顺序，且保证每个零部件具有最优的装配路 径的问题。鉴于产品装配顺序的好坏以及装配路径的优劣将直接影响产品的可装配性、 可拆卸性以及可维修性，因此如何获取一个好的装配顺序和装配路径就显得非常重要 [30][31][32]。自 20 世纪 80 年代初以来，国内外学者对产品装配顺序规划（Assembly Sequence Planning，ASP）的技术研究经历了从基于交互式推理[33]、基于拆卸[34]、基于知识[35][36] 以及基于智能算法[37][38]的发展转变，而在产品装配路径规划（Assembly Path Planning， APP）自动搜索方面也取得了大量的研究成果，主要集中在基于图、基于栅格、基于采 样以及空间分解法等算法研究和工程化应用层面[32][39][40]。由于 ASPP 问题是典型的 NPC （Non-deterministic Polynomial-Complete）问题，加之复杂产品受零部件数量增多以及考 虑实际装配环境的影响（例如装配操作难度、工装夹具数目、操作时间和劳动强度等外 部条件），将导致 ASPP 的计算复杂性升高、计算效率降低、求解成功率变差等问题，因 此，高效合理的智能 ASPP 方法一直以来都是学术界和产业界追求的目标之一。目前工
6

第一章 绪论
程中由于自动生成装配工艺规程的复杂性，基于智能算法的 ASPP 相关研究成果主要以 理论方法探索和原型系统开发为主，在实际工程中缺少较为成熟的软件工具。
Xu 等人[41]开发了装配规划和仿真系统（AutoAssem），可用于飞机部件等复杂产品 的装配自动规划，该系统包含以下关键步骤：面向对象的装配建模，集遗传算法（Genetic Algorithm，GA）、蚁群算法（Ant Colony Optimization，ACO）、粒子群算法（Particle Swarm Optimization，PSO）等启发式算法和人机交互方法于一体的 ASP，利用从装配序列和零 件几何信息中获取爆炸图并通过滤波算法进行 APP，基于装配序列的装配工艺规划与可 视化，以及装配仿真分析，上述流程可使 AutoAssem 系统在最小限度的人为干预下实现 产品 CAD 装配模型自动生成装配规划的目标。Shang 等人[42]针对大多数基于采样的运 动路径规划算法在处理产品结构复杂、窄通路等装配场景时性能不高的现状，提出了一 种在复杂三维装配环境下面向装配路径自动规划的路径规划器，该路径规划器集成了基 于射线检测的随机碰撞检测算法以及基于历史和自适应的快速扩展随机树（Rapidlyexploring Random Tree，RRT）算法，并在复杂工业装配三维场景中验证了上述路径规划 器的实用性和运行性能；在此基础上，刘密等人[43]针对零部件装配路径规划自动求解困 难的问题，进一步改进之前的算法，提出了基于障碍和贪心规则的 RRT 算法，并对求解 得到的初始装配路径采用分段线性拟合法自动优化该路径，最后还在自主开发的 VAPP 系统中通过某型真空泵内部零件的装配路径求解验证了该算法的高效性。Tseng 等人[44] 提出一种面向产品拆卸序列规划（Disassembly Sequence Planning，DSP）问题的 GA 算 法，该算法采用优先保护交叉以及基于块的变异等遗传操作寻找最优的拆卸顺序，相较 于传统的 Kongar 和 Gupta[45]提出的传统 GA 具有更高的运行性能，并在四类产品拆装 实例中验证了该算法的先进性。Yang 等人[46]提出了一种基于时间-空间语义知识的产品 装配顺序智能规划方法，鉴于产品装配 CAD 模型中隐含了大量的装配约束信息（如层 次约束、几何约束和拓扑约束等）先验知识，构建了时间-空间语义装配信息模型以及采 用本体模型建立了用于装配顺序智能规划的知识系统，通过装配属性检索和规则推理以 及模糊综合评价等方式用于智能生成产品最优装配序列。Masehian 等人[47][48]针对目前 ASPP 无法解决柔性零件的非线性装配难题，提出了一种面向刚柔混合零部件的装配顺 序和路径规划算法，可以适用于刚柔混合零部件的线性和非线性装配规划中，该算法集 成了基于启发式贪婪算法的 ASP 与基于随机采样算法（即双向利用和探索树）的 APP。
目前，基于 CAA 的产品数字化装配建模与仿真技术虽然在很大程度上提高了产品 装配工艺设计规划的效率，减轻了参与人员的重复劳动，然而其构建的 DP 或 DMU 基 本上均是以理想 CAD 为原型，仅从设计角度考虑产品的可装配性，忽略了产品装配过
7

东南大学博士学位论文
程中真实环境、实物零部件误差以及人员操作等现场因素，且现有 CAA 技术难以在虚 拟装配环境中再现真实的装配场景，使得在真实环境下的产品物理装配过程无法被完全 模拟，因此，针对装配精度要求较高、零部件装配复杂的应用场合，基于 CAA 的产品 装配仿真预测值与真实装配状态值很难保证其一致性，面向装配现场的 CAA 技术也逐 渐成为产品数字化装配建模与仿真技术研究的发展方向之一。 1.2.2 虚拟/增强现实装配技术
虚拟现实（Virtual Reality，VR）的思想最早出现在 20 世纪 50 年代，并于 80 年代 末由美国人正式提出 VR 的概念，随后在 90 年代得到了迅猛发展，VR 技术作为一种利 用计算机系统、传感器、三维图形学、人机交互等软硬件方式用于实时仿真可以替代现 实 世 界 的 一 门 高 新 前 沿 技 术 [49][50] ， 其 营 造 的 虚 拟 环 境 对 用 户 感 观 具 有 沉 浸 性 （Immersion）、交互性（Interaction）和构想性（Imagination）的“3I”特性，所以一经 提出便在制造业中得到了广泛的应用，尤其在产品装配环节最能发挥 VR 的领域优势 [51][52]。而增强现实（Augmented Reality，AR）则是将计算机产生的图形、文字注释、视 频等虚拟信息有机的融合进真实世界环境中，通过相关设备对使用者的视觉系统进行影 像增强或扩展的技术[53][54]，因此与 VR 技术相比，AR 技术可以进一步提高使用者的感 知能力从而获得更好的沉浸感，实现真实与虚拟世界虚实融合场景之间的互动，除了继 承 VR 技术特点外还具备虚实结合、实时交互、三维注册等新特点，适用于现场信息可 视化、作业流程辅助等工业应用领域[55]。
当前，围绕 VR/AR 与数字化装配技术相互融合的技术统称为虚拟装配（Virtual Assembly，VA）技术，根据 VA 的技术内涵可知，VA 更加强调产品实际物理装配过程 在虚拟环境下的装配过程建模与仿真，进而从装配工艺过程的角度采用 VR 和/或 AR 技 术手段实时模拟装配现场以及装配过程中可能出现的各种情况、问题和现象，从而实现 在实物试装前预知产品最终装配性能并进行装配工艺优化[56]，其中，侧重于 VR 技术的 VA 简称为虚拟现实装配（Virtual Reality Assembly，VRA）技术，主要解决装配工艺的 可行性问题；而侧重于 AR 技术的 VA 简称为增强现实装配（Augmented Reality Assembly， ARA）技术，主要解决产品现场装配的指导问题。
（1）基于 VR 的产品虚拟装配技术（VRA） 一般地，VRA 技术主要应用在面向装配的产品设计结果以及产品装配工艺规划仿 真两个方面。面向装配工艺规划仿真的 VRA 则是从产品装配工艺设计的角度，利用 VR 和计算机仿真技术，基于产品装配模型和装配资源等信息构建一个高还原度的装配工艺 规划虚拟三维环境，在此基础上通过人机交互方式对产品零部件装配顺序和装配路径、
8

第一章 绪论
工装夹具等装配资源以及装配操作方法、人因工程等相关问题进行模拟仿真和分析决策， 从而可以进一步检验、评价和预测产品的装配行为和装配性能，以便指导真实装配过程。
相较于基于传统手工和基于 CAA 的产品装配工艺规划而言，基于 VRA 的装配工 艺规划的最大优势主要体现在虚拟沉浸性、实时交互性、高度集成性方面[57]，VRA 更 加强调在提供的与真实装配环境高度逼真的虚拟装配环境中，借助数据手套、三维鼠标 等人机交互 VR 设备，使用户完全沉浸在虚拟装配环境中，并通过实时交互操作以发挥 人的主观能动性和装配经验知识对 VA 过程进行模拟和仿真，且整个 VA 过程的相关环 节可以与面向 PLM 的产品设计、制造、检测、运维等功能子系统之间实现信息集成与 双向传递。当前，针对基于 VRA 的产品数字化装配技术，国内外的技术研究重点主要 集中在面向 VRA 的产品虚拟装配建模和基于 VR 的产品装配工艺规划的关键使能技术 两个方面[58][59][60]。
1）在面向 VRA 的产品虚拟装配建模方面 早期 VRA 技术主要以零部件理想几何 模型为基础进行产品装配过程建模，忽略了产品零部件的物理属性和运动属性，从而导 致虚拟装配过程与真实装配过程之间存在较大差异，装配仿真逼真度和真实感不足，目 前 VRA 技术正在从早期的基于理想几何的产品装配建模与仿真向基于物理的方向发展 [61]。Samir 等人[62]针对零件装配接触配合过程中的受力问题，在虚拟装配环境中通过零 件间碰撞侵入深度的精确计算对接触力进行感知，并利用弹簧阻尼模型将触觉交互设备 接口关联至虚拟装配环境中对用户提供力反馈和虚拟装配引导。Seth 等人[63]提出了一种 融合物理属性建模和几何约束建模的虚拟装配人机交互方法，该方法可通过基于 B-Rep 的 CAD 模型定义，提供基于物理属性的精确碰撞计算以及基于几何约束的准确零件定 位，并开发了相对应的高逼真度虚拟装配系统（SHARP: System for Haptic Assembly and Realistic Prototyping），最后在低间隙虚拟手工装配中通过轴孔装配实例验证了上述方法 的有效性。杨文珍等人[64]提出了一种基于物理的虚拟手抓持力觉生成和反馈方法，通过 构建基于最小力螺旋的虚拟手静力抓持通用力学模型进行反馈力计算，并利用模型实例 化得到虚拟手抓持物体的接触力；然而由于只是假设虚拟手与物体之间为无摩擦碰撞， 无法高逼真度地模拟虚拟交互的真实碰撞力，为此，文献[65]进一步提出了一种考虑摩 擦的虚拟手交互碰撞力觉生成和反馈方法，通过将二维空间的考虑摩擦的质点刚体碰撞 力生成算法扩展至三维空间，可以计算得到非质点的虚拟刚体的碰撞力矩，从而由上述 通用的力学模型求解每个虚拟手指产生的真实冲击力；最后，杨文珍在文献[66]中重点 研究虚拟手交互的真实力觉生成，为面向虚拟装配的虚拟手交互的真实力觉生成、反馈 和工程应用提供了理论依据。
9

东南大学博士学位论文
2）在基于 VR 的产品装配工艺规划方面 虚拟装配工艺设计的核心体现在于虚拟 装配环境中实现产品装配工艺规划、优化和评价，其主要任务之一是要对虚拟零部件模 型进行装配运动引导和精准定位，目前各项关键使能技术主要包括基于几何约束[67]、基 于特征匹配[68]、基于力反馈[69]、基于语义识别[70]、基于碰撞检测[71]等虚拟装配引导和定 位方法。Germanico 等[72]开发了一种可用于零部件虚拟装配规划和评价的基于触觉交互 的虚拟现实平台系统，该系统允许对虚拟零部件进行实时交互操纵和运动控制，以及可 以利用物理仿真引擎实现对虚拟零部件基于物理属性的装配仿真和碰撞检测，甚至还可 以允许用户实时修改装配仿真参数，进而评价每个参数对虚拟装配任务的影响。Wang 等 [73]提出集成 VR 和 CAD 于一体的新型虚拟装配环境系统，该系统通过设计自动化接口 集成了外部 CAD 设计数据以及相对应的具有层次结构关系的虚拟装配数据，并基于约 束的装配操作可以实现零件装配自由度推理、拆卸方向计算、拆装序列生成等具体任务， 同时，该系统还具备通过承接 CAD 模型数据用于自动构建和更新虚拟装配环境的功能。 Ahmad 等[74]提出了面向飞机涡轮发动机的 VA 技术，并针对其装配工艺验证构建了飞机 涡轮发动机虚拟样机模型，最后在虚拟现实设计系统（VRDS: Virtual Reality Design System，VRDS）中运用立体视觉、环绕立体声以及大量的交互等方式实现了该虚拟样 机模型的装配工艺规划与仿真。北京理工大学刘检华团队等[75]提出了一种集精度、物理 属性以及结构件与线缆管路仿真分析于一体的 VA 技术，从装配过程、精度和物理属性 三个维度对装配现场和装配过程进行实时地模拟仿真，为实现产品的科学装配和装配质 量预测提供了有效的解决途径；在此基础上，张志贤等[76]为进一步在虚拟装配仿真过程 中反映真实零部件的运动本质规律，提出了一种基于多刚体动力学的物性装配过程仿真 方法，实现了以力为输入参数的零部件装配过程仿真。高巍在文献[77]中从零部件物理 属性模型构建、基于力和基于粒子滤波的装配引导方法以及面向人机因素的产品可装配 性量化评价方法的多角度出发，研究了一整套较为完整的基于物理属性的虚拟装配仿真 及可装配性评价方法，基于此开发了相对应的原型系统（PVAS: Physics-based Virtual Assembly System）并通过实例验证了其正确性和有效性。
（2）基于 AR 的产品虚拟装配技术（ARA） 作为 VR 技术的重要分支，AR 技术是将计算机生成的虚拟信息或模型图像实时叠 加到真实环境中实现虚实场景融合，用于增强用户对真实环境感知能力的先进技术。AR 技术的出现为复杂产品 VA 过程仿真提供了更好的人机交互方式，能够高效地指导装配 作业，极大地提高产品现场装配人员的作业效率。具体而言，将 AR 技术引入实际装配 过程中，能够充分发挥装配操作人员的直觉和/或装配经验与知识，通过利用 ARA 技术
10

第一章 绪论
真实再现物理装配环境的能力，可以基于物理装配环境提供“所见即所操作”的实时装 配引导，最大程度地提高装配操作人员的真实沉浸感和参与感，从而提升产品装配作业 效率及其对装配指令的准确理解和接受程度[78][79][80]。
相比于围绕产品虚拟装配工艺规划的 VRA 技术来说，ARA 技术主要面向产品现场 装配问题，其应用领域大多集中在产品装配技能培训、现场装配指导、装配结果检查等 方面，现有基于 ARA 的产品数字化装配技术研究主要分为装配信息内容感知与编辑和 装配实时引导与训练两大方向[81]。
1）在产品装配信息内容感知与编辑方面 基于 ARA 的产品装配信息内容是 AR 技 术应用于装配实时引导与训练的首要基础，其内容感知与编辑涵盖对各类虚拟装配信息 的建模、布局、管理和编辑等具体任务[82]。国内外很多学者为解决 AR 信息内容编辑问 题作了大量的研究工作，Mohr 等[83]提出了一种将产品典型二维技术文档（例如产品图 片、爆炸图、文本标注和箭头等）自动转换为三维交互式 AR 技术文档的方法，可用作 基于 AR 的产品内容展示、浏览和编辑，并开发了对应的 AR 系统验证了上述方法的可 行性；Khuong 等[84]针对大多数 ARA 系统无法满足实时跟踪装配状态以及自动识别装配 误差等问题，提出了一种基于 AR 的装配内容感知支持系统，该系统具备两种 AR 可视 化模式，即将装配引导信息直接叠加至物理模型上和将装配引导信息渲染至真实模型相 邻的虚拟模型上，可用于支持装配引导信息展示以及识别装配状态并检测对应的装配误 差信息；Zhu 等[85]开发了一种基于 AR 的情境感知辅助编辑系统（ACAAR: Authoring for Context-Aware AR），可面向 PLM 应用领域提供 AR 信息内容（例如文本、图像、CAD 模型等）的添加、编排等技术服务，并可支持指定 AR 信息内容和维护信息之间的逻辑 关系；Chen 等[86]研究了一种自适应装配引导场景显示方法，以便于在基于 AR 的虚拟 装配场景中从最佳视点将合成装配引导场景显示在合理的区域，该方法可以避免不合理 的虚拟引导场景显示，合理布局虚拟装配场景及其相关信息内容；李旺等[87]研究了增强 现实装配工艺信息内容编辑技术，利用 IDEF1X 方法构建基本装配工艺信息模型，并通 过 AR 可视化技术实现增强可视化表达以及增强装配工艺信息内容编辑的数据管理，最 后通过开发面向 AR 的装配工艺编辑原型系统验证了该技术的可行性。
2）在产品装配实时引导与训练方面 基于 ARA 的产品装配实时引导与训练的主要 任务是负责将真实装配对象与虚拟装配工艺信息之间进行虚实装配融合，一般是采用 VR 技术构建包含真实装配场景窗口（例如静态图片或动态视频）的虚拟装配场景，再 利用 AR 技术将虚拟装配场景中的零件模型、装配工艺信息等叠加至真实装配场景窗口 中并进行实时人机交互与同步显示，从而根据产品装配工艺规划结果在混合环境中引导
11

东南大学博士学位论文
用户完成装配作业或培训/训练。Wang 等[88]开发了集成 AR 辅助装配环境（IARAE: Integrated Augmented-Reality-aided Assembly Environment）系统平台用于虚实装配融合与 实时交互，该平台集成了零部件接触处理策略、装配信息管理方法以及混合无标记跟踪 方法，可用于虚实零部件交互、虚拟零部件运动建模以及允许用户动态操控装配信息实 例；在此基础上，Wang 等[89]进一步优化上述系统平台，提出了基于 AR 环境下的装配 仿真系统，该系统支持用户使用自然手势操纵虚拟零部件用于装配仿真，通过装配约束 分析、虚实零部件接触力测定以及用户手势施加力或力矩等方法，可以获取 AR 环境下 虚拟零部件准确且逼真的运动轨迹，并最后以汽车离合器案例研究验证了该系统的有效 性。Lai 等[90]开发了面向以人为中心的 AR 装配引导系统，该系统包含多模式 AR 指令， 可实现在深度学习网络支持下的装配工具检测，以及基于区域卷积神经网络的不同视觉 渲染任务，以便于提供现场实时 AR 指令，最后在某型数控雕刻机组装实例中验证了该 集成系统的性能。彭涛等[91]提出了一种基于虚实融合、增强信息和约束代理的增强人机 交互技术，该技术从视觉、信息和操作三个维度共同改善 VA 环境下的人机交互效率， 为面向 VA 的实际装配工程应用提供了便捷的交互手段，最后通过虚拟装配辅助支持平 台验证了该技术可以高效地完成产品的装配引导。尹旭悦等[92]针对航天产品在装配引导 训练中的应用需求，提出了面向 AR 装配引导的装配工艺信息建模方法，基于计算机视 觉识别和三维环境感知技术，开发了集成装配作业现场操作指导、关键零部件检验记录 于一体的装配作业 AR 引导训练系统，为装配操作者提供了智能辅助装配支持。王发麟 等[93]提出了一种面向复杂机电产品的线缆虚实融合装配方法，通过构建基于 AR 的线缆 虚实融合装配体系以及阐述相关关键技术，对基于 AR 的线缆装配实时引导提供了一种 新的研究思路。
当前，基于 VR 的产品数字化装配建模与仿真技术发展多年已经日趋成熟，而基于 AR 的产品数字化装配建模与仿真技术则可以认为是 VRA 的更高发展阶段，无论是 VRA 还是 ARA，两者均是以理想状态的 CAD 设计模型和工程图纸为基础，从解决装配工艺 可行性以及产品现场装配引导等问题出发，通过虚实装配融合与叠加使得用户获得在人 机交互方面最佳的感官体验和沉浸感，然而上述两种技术在面向 VA 过程时难以针对产 品装配性能状态对装配工艺做出实时调整与优化，从而导致产品装配质量的不稳定和波 动[94]，与此同时，基于 VRA/ARA 创建的虚拟样机（Virtual Prototype，VP）与真实的物 理样机之间还存在属性差异，例如无法真实反映实际零部件的表面几何误差以及受载荷 作用下的变形情况等，这些因素对于面向复杂产品的装配工艺仿真结果以及装配精度预 测准确性等方面均具有一定程度的影响。
12

1.2.3 数字孪生装配技术

第一章 绪论

随着新一代信息与通信技术（工业互联网、物联网、大数据、云计算/边缘计算等）

和软硬件系统的高速发展与快速普及，Digital Twin（数字孪生）作为潜在的能够有效解

决物理世界和虚拟世界之间交互与融合的新方法和新途径，其相关技术也得到了国内外

学术界和企业界的高度关注和广泛研究。从数字孪生的发展史[95][96]来看，“Digital Twin”

一词最早在 2003 年由 Michael Grieves 教授在美国密歇根大学 PLM 课程上提出其概念

雏形，历经其概念和模型名词的演化，于 2011 年 Grieves 教授引用“Digital Twin”名词

并一直沿用至今，国内通常将其翻译为数字孪生或数字双胞胎，随后数字孪生的概念得

到了美国空军研究实验室（AFRL）与美国国家航空航天局（NASA）的认可采纳与深入

研究，并逐渐获得来自美国参数技术公司（PTC）、德国西门子（Siemens）、法国达索

（Dassault）、美国通用电气（GE）等国际知名公司的应用推广，从而使得近年来数字孪

生及其技术得到了广泛关注，并成为了研究热点。

近五年以来，数字孪生备受学术界、工业界、政府部门等多方关注，但对于数字孪

生的定义却存在不同的认识，表 1.1 概括汇总了对数字孪生概念不同的定义内容及理解

侧面，可以看出作为信息物理融合系统（Cyber-Pyhsics System，CPS）的关键使能技术

之一，数字孪生主要强调在数字虚拟空间中对现实物理空间对象 1:1 构建模型的实时映

射与闭环交互能力，并通过多维度虚拟模型和全要素融合数据驱动，来实现监控、仿真、

预测、优化等实际功能服务和应用需求，例如产品从功能需求、概念设计、制造装配、

运行维护直到报废处理整个产品全生产周期的高保真度数字化描述以及涉及产品设计、

运行优化、状态监测、故障预测与诊断等方面的智能应用服务，以便为观察、认识、理

解、控制、优化、改造物理世界提供一种切实可行的技术手段。需要特别说明的是，数

字孪生作为对物理空间对象的一种表征形式，无法也不可能完全等同于物理空间对象，

只能高度近似并趋近于物理空间对象，因此，从工程应用和解决实际问题的角度出发，

实际应用过程中不一定要求构建满足所有理想特征均高度契合的“数字孪生”，能够满

足用户及应用场景的具体需要即可[97]。

表 1.1 数字孪生概念的不同定义内容及理解
13

东南大学博士学位论文

序 对应 号 文献

作者（年份）

研究单位 （国家）

定义内容及理解

[98][99] 1 [100]

Shafto, et al（2010, 2012）
Glaessge & Starge （2012）

国家航空航天局
NASA （美国）

一个面向飞行器或系统的、集成多物理、 多尺度、概率仿真模型，它利用当前最 好的可用物理模型、更新的传感器数据 和历史数据来反映与该模型对应的飞行 实体的状态。

2

[101] [102]

Tuegel（2012） Gockel, et al（2012）

空军研究实验室
AFRL （美国）

机体数字孪生体，作为正在制造和维护 的机体超写实模型，可用于对机体是否 满足任务需求进行模拟和评估。

3 [103]

Reifsnider & Majumdar（2013）

南卡罗莱纳大学 （美国）

面向材料和结构的超高逼真度物理模型 (ultra-high fidelity physical models)，用于 控制飞行器的使用寿命。

4 [104]

Grieves（2014）

佛罗里达科技大 学
（美国）

作为生产制造实体的虚拟化表达(virtual representation)。

真 实 世 界 对 象 的 虚 拟 替 代 物 (virtual

5

[105]

Schluse & Rossmann （2016）

亚琛工业大学 substiutes)，这些替代物由虚拟表达和通

（德国）

信交互能力所构建，可充当物联网及其

服务中的智能节点。

借助模型、信息和数据来描述特定资产

6 [106]

Stark, et al（2017）

柏林工业大学 （产品、机器、设备、服务等）的属性、

（德国）

状 态 和 行 为 的 数 字 化 表 达 (digital

representation)。

7 [107]

Soderberg, et al （2017）

查尔姆斯理工大 学
（瑞典）

采 用 物 理 系 统 的 数 字 化 拷 贝 (digital copy)实现实时优化。

8 [108]

Saddik（2018）

渥太华大学 （加拿大）

实 体 和 虚 体 的 数 字 复 制 品 (digital replications)，使两者的数据能够在物理 世界和虚拟世界之间无缝传输。

虚拟动态模型(virtual dynamic model)，与

9

[96] [109]

庄存波,等（2017） 北京理工大学 现实世界中物理实体完全对应和一致的

Zhuang, et al（2018）

（中国）

虚拟模型，能够实时模拟其物理实体对

象的属性、行为和性能。

10

[110] [111]

Qi & Tao（2018） 陶飞,等（2019）

北京航空航天大 物理对象的虚拟模型(virtual models)，该

学

虚拟模型采用数字化方式创建并可用于

（中国）

现实世界环境中的行为仿真。

物 理 资 产 的 数 字 化 表 达 (digital

11

[112]

Kannan &

印度理工学院 representation)，能够用于制造流程的交

Arunachalam（2019）

（印度）

互与协同，从而可以通过知识共享实现

生产力和效率的提升。

目前，国内外许多学者和研究机构对数字孪生及其技术做了大量详细地文献分析综 述工作[113][114][115][116][117][118][119][120]，系统性地梳理了数字孪生的定义概念、技术内涵和理 论框架以及在不同行业不同领域应用落地的研究。作为影响未来十年的先进制造技术和 实践的最佳范式之一，数字孪生制造新范式为智能制造领域提供了很好的解决思路，根 据上述综述性文献可以发现，在智能制造领域围绕数字孪生的研究工作主要集中在以下 三个维度：产品级数字孪生[121][122]、生产级数字孪生[123][124][125]以及工厂/车间级数字孪
14

第一章 绪论
生[126][127][128]，其中，产品级数字孪生又可以总结为两个层面，从广义层面上讲，构建产 品级数字孪生是面向产品全生命周期的管理和应用服务，侧重于对产品物理实体在面向 PLM 的信息空间中全要素重建及数字化映射，更加注重数字孪生在 PLM 中关键技术的 实现；从狭义层面上讲，构建产品级数字孪生是面向装配的产品物理实体多维度多层次 多时空的虚拟实现，侧重于对产品物理实体在虚拟装配过程中的全要素重建及数字化映 射，更加注重数字孪生在产品装配模型中的应用。本文讨论的 DTA 技术是从狭义层面 的角度，围绕复杂产品机械系统构建产品级数字孪生开展的一系列装配技术活动统称。
如今，产品装配技术正在经历从手工/经验式装配向自动化/智能化装配转变的关键 期，DTA 技术为实现可测、可控、可视、可交互的科学装配提供了新的发展理念和新的 制造范式，正在引发复杂产品机械系统装配行业的重大而深刻的技术变革[2][129]。但是， 当前 DTA 技术并没有一个明确的定义，其相关概念和技术内涵还未形成统一，国内外 关于 DTA 技术的研究主要集中在将 DT 技术应用于特定的产品装配应用场景以及研究 相对应的装配解决方案等方面。
Robert 等[130]以机器人点焊钣金件装配为例，提出了面向智能装配 4.0 所需的通用数 字孪生基本架构、组成要素以及数据流向，该技术手段可以基于主动式零件匹配和装备 自适应等方式，在不更改输入零部件公差的前提下提高产品最终装配质量，能够实现产 品实时几何精度保障以及产品定制化生产等目的。Schleich 等[131]提出了一种基于肤面形 状模型（Skin Model Shape，SMS）的完整参考表达模型，该模型具备可伸缩、互操作、 可扩展和高保真等特性，可作为产品数字孪生模型的代理模型，并最后以产品几何偏差 管理为例阐述了肤面形状模型用于产品数字孪生模型表达的合理性。Söderberg 和 Wärmefjord 分别在文献[132]和[133]中研究了面向产品制造过程实时几何精度保障的数 字孪生模型在产品设计、生产前与生产阶段中所需的功能和数据模型；在此基础上， Schleich 等[134]进一步总结了面向工业 4.0 的下一代产品几何精度保障与几何偏差管理所 面临的挑战与潜力。Aderiani 等[135]提出了一种用于提升装配质量的基于数字孪生的个性 化定位调整方法，该方法能够通过基于装配零件配合面的实测扫描数据形成数字孪生模 型的仿真结果，以便适用于每个装配体的个性化定位调整，最后通过面向薄壁钣金件零 件装配案例验证了上述方法的有效性。Bilberg 等[136]介绍了一种数字孪生驱动的人机协 作装配方法，主要是在构建机械臂协作下的柔性装配单元数字孪生模型的基础上，利用 面向对象的事件驱动仿真手段，实现人机协作装配任务，所实施的数字孪生驱动装配方 法拓展了虚拟仿真模型的应用范畴，可进一步适用于人机协作装配的实时控制、动态任 务分配以及装配任务排序等方面。Sun 等[137]提出了一种数字孪生驱动的产品装调方法，
15

东南大学博士学位论文
通过构建该方法的理论框架，以及引入基于数字孪生的产品装调全要素信息模型、孪生 数据融合方法和虚实装配模型之间的互操作方法，可以实现高精度产品的可装配性预测 以及装调工艺优化，并最后以某型电液伺服阀产品为例验证了所提方法的有效性和可行 性。Wilma 和 Andrea 在文献[138]中介绍了一种支持复合材料装配的数字孪生设计方法， 该方法支持建立从零件设计到装配过程连续且准确的几何偏差信息流，并通过获得在整 个产品生命周期不同阶段下来自制造、装配和检测的数据集，可用于生成更加精确的虚 拟仿真模型，从而借助数字孪生工具最大限度地减少与设计模型的几何偏差。Zhang 等 [139]研究了一种面向装配结合面接触特性的数字孪生精准建模方法，给出了装配结合面 接触特性的数字孪生模型的通用框架，通过将测量数据集成至装配结合面等效模型（虚 拟材料薄层单元）中可以实现装配结合面的精准建模，并基于代理模型和遗传算法可用 于测试数据和仿真数据的同化和融合，通过优化薄层单元参数以实现装配数字孪生模型 的动态更新，最后以某加工中心的机械动态性能分析验证了上述方法的合理高效性。 Wang 等[140]提出了一种基于通用零件数字孪生模型的装配精度分析方法，该方法集成了 多源异构几何模型以及多维装配信息关系，可以实现零件的装配自动定位以及提升装配 仿真效率和装配分析结果的可靠性，最后以负载敏感型多路阀组件的装配工艺为例验证 了所提方法的可行性。Gregorio 等[141]提出了一种面向装配过程的基于数字孪生的产品 几何偏差管控方法，该方法可以实现集产品零部件每道装配工步下不同实物状态的产品 装配混合表达，可用于已装配组件的虚拟模型更新，以及通过基于实做零部件的几何尺 寸数据用于实现对待装配零部件的装配调整，以满足最终产品的装配功能需求。Zhuang 等[142]提出了一种基于数字孪生的复杂产品装配数据管理和过程可追溯的应用实施方法， 该方法首先从粒度、周期、版本三个维度分析了复杂产品装配数据的动态演进过程，然 后基于此引入了上述方法的总体框架以及所涉及的关键核心技术（例如基于工作流的产 品装配数据组织和版本管控、基于数字孪生的产品装配过程同步建模以及产品装配数据 层级管理与可追溯性等），并给出了复杂产品装配数据包生成算法，最后通过开发基于 数 字 孪 生 的 装 配 过 程 管 控 系 统 （ DT-APMCS: Digital Twin-based Assembly Process Management and Control System）验证了上述方法的有效性。Yi 等[143]提出了面向智能装 配工艺设计的数字孪生参考模型，在此基础上进一步给出了基于数字孪生的智能装配应 用框架，涵盖物理空间层、中间交互层以及虚拟空间层，并详细介绍了虚拟空间层中产 品装配工艺规划、仿真、预测和管控的工作机制，最后以某简化卫星装配为应用案例在 基于数字孪生的装配应用系统（DT-AAS: Digital Twin-based assembly application system） 中验证了上述应用框架和方法的可行性。周石恩在文献[144]中提出一种融合多层次信息
16

第一章 绪论
的数字孪生装配模型表达方法，并针对薄壁件装配问题提出基于孪生数据的产品定位— 装配精度预测方法，获得了薄壁件孪生体的真实装配误差。唐竟在文献[145]中指出当前 我国航空工业推行数字化装配技术对产品数字模型提出了新需求，采用装配数字孪生模 型与产品样机之间形成虚实融合和数据交换，可以实现基于实时数据辅助装配工艺决策 以及动态修正工艺方案，达到装配工艺设计快速响应的效果和目的。孙惠斌等[146]研究 了面向航空发动机的数字孪生驱动的产品装配技术，详细分析了产品装配流程控制、零 件选配、装配操作引导、装配间隙控制、装配技术状态控制和装试数据关联分析等相关 关键技术。孙学民等[147]提出了一种数字孪生驱动的高精密产品智能化装配方法，通过 构建包含装配全要素的产品数字孪生体、基于知识图谱的装配工艺表达方法以及装配质 量控制策略，用于解决高精密产品装配过程中虚拟装配与物理装配不相符导致的装配质 量性能一致性较差的问题，并最后以某型汽车发动机缸体装配为例验证了所提方法的可 行性。
综上所述可以看出，DTA 技术是在 CAA 以及 VRA/ARA 技术之上发展出来的具有 更高层次的产品数字化装配技术，集成融合了 DT、CPS、VA、基于模型的定义（ModelBased Definition，MBD）等多学科系统性工程，使得产品在物理装配世界与虚拟装配世 界之间具有虚实融合、信息交互、闭环反馈、以虚控实等特点，因此，DTA 技术必然会 成为面向工业 4.0 的复杂产品下一代数字化装配技术的发展趋势之一。然而，从上述文 献可以发现 DTA 技术的研究主要集中在近五年内，正处于发展起步阶段，而 DTA 技术 的发展又无法脱离 DT 技术，当前 DT 技术的应用范畴局限在数字工厂/车间和生产线的 运维和应用服务方面，对面向 PLM 的产品零部件设计、制造、装配等阶段的研究相对 较少，近几年以来才出现部分在 DT 驱动的产品装配工艺设计规划[129][143][148]以及装配过 程质量管控[142][149][150]等智能化装配方面的研究，但依然缺乏较为系统完整的 DTA 技术 体系及相关理论方法的研究。因此，利用 DT 技术通过孪生数据构建能够反映复杂产品 装配实物真实特征的零件和装配体数字孪生模型，并设计基于数字孪生模型的复杂产品 装配分析方法以及研究其对应的关键技术，对于复杂产品装配精度准确预测、指导物理 装配样机的装配行为、保证装配质量和性能一致性等方面具有重要的现实意义。
1.3 复杂产品装配精度预测相关技术与方法的研究现状
当前，围绕复杂产品装配精度预测为研究主线的国内外学者主要在产品装配工艺模 型表达与信息管理、零件公差与形状误差建模、装配偏差传递与误差累积建模以及装配 精度预测与控制等四个方面取得了显著的研究成果，在进一步拓宽产品装配技术内涵的
17

东南大学博士学位论文
同时，也有效推进了复杂产品装配精度预测技术的发展。本节将从上述四个方面详细阐 述目前产品装配精度预测所涉及的相关技术与方法的国内外研究现状。 1.3.1 产品装配工艺模型表达与构建技术及相关方法
装配工艺模型，又称装配信息模型，是产品数字化装配技术在装配工艺规划与准备 阶段的前提，也是影响产品装配精度预测与控制的基础。作为产品工程信息中不可或缺 的重要组成部分，产品装配工艺信息是连接面向装配的产品设计、加工制造、质量检验、 管理协调等环节的桥梁，构建有效、全面、准确的产品装配工艺模型将直接影响到产品 数字化装配系统的实用性，同时，良好的产品装配工艺模型也对装配生产前和装配过程 中的装配精度控制以及最终装配精度保障都有着积极作用。
我们知道，装配工艺信息是伴随着产品装配过程而动态变化的，它不仅涉及描述产 品的 GD&T 和属性等信息，而且更重要的是对从起始基准零件到最终产品装配体的演 进过程涉及的所有要素进行准确的描述，这样才能够满足产品装配设计、装配工艺设计、 装配精度仿真、装配工装设计以及装调优化等不同活动对装配工艺信息内容与表达多样 性的需求。当前随着产品数字化、信息化、智能化制造技术应用的不断深入，基于 MBD 的三维数字化设计制造技术[151][152][153]为产品装配工艺设计带来了效率上的提升和飞跃， 同时也为产品装配工艺信息的合理高效表达与管理提供了解决方案。
MBD 是用一个集成的三维实体模型来完整表达产品定义信息的方法，它详细规定 了三维实体模型中的产品尺寸、公差的标注规则和工艺信息的表达方法[154][155][156]，因此， MBD 技术可作为产品生产过程中单一数据源，将产品的全部信息（几何形状尺寸、公 差、工艺信息等）定义到一个三维实体模型中，从而打破产品设计与工艺、制造、装配、 检测之间信息交换的壁垒，使得面向 PLM 各阶段的信息实现有机集成和高效运行管理， 最后形成一个逻辑上相互关联的数据集合[157][158]。当前，为加速产品数字化装配技术的 深入应用，基于 MBD 的产品装配工艺模型表达与信息管理的研究吸引了国内外许多学 者以及相关研究机构和企业的广泛关注，对产品装配工艺信息所包含的内容、信息描述 与呈现方式、数据管理形式及其集成方法等诸多方面进行了深入研究，也提出了相对应 的装配工艺模型，并在原型/集成系统软件中得到了应用验证。
Sudarsan 等[159]提出了一种面向 PLM 的产品信息建模框架，可用于包括产品装配工 艺设计在内的信息模型扩展；Yao 等[160][161]提出了一种产品层次装配任务链（Hierarchical Assembly Task List，HATL）模型，实现了基于装配任务的虚拟装配工艺数据信息的高效 表达与工艺模型转化，在此基础上，侯伟伟等[162]通过引入装配任务与装配操作模型，提 出了一种基于层次链的产品装配过程建模方法，实现了复杂产品非线性装配过程信息管
18

第一章 绪论
理和工艺重用；Liu 等[163][164]基于产品装配层次关系提出了一种装配工艺建模机制，采 用先拆后装、拆后重装的方式构建了三种阶段（拆卸工艺模型、粗装配模型与精装配模 型）的装配工艺模型，并通过开发原型系统验证了该建模方法的正确性；靳江艳等[165]提 出了面向装配工艺设计的 MBD 模型，通过构建设计模型向装配工艺模型的映射关系， 实现了对装配工艺信息集成模型的表示与管理；刘检华等[166]针对实际装配现场需求， 提出了从过程、精度和物理属性的角度实时地模拟产品装配现场和装配过程的虚拟装配 方法；唐健钧等[167]建立了一种以 MBD 技术为基础的集成精度信息模型，以实现全数字 量驱动的装配精度控制；Qiao 等[168][169]提出了基于三维模型的多视图装配工艺信息表达 与组织方式，能够实现快速提取装配工艺规划与分析仿真所必需的工艺信息，并进一步 运用不同的表达模型（流模型、动态场景和快照表达）构建了数字化多视角产品三维工 艺信息表达框架，实现对装配工艺信息进行灵活全面的可视化表达；阮斯洁等[170]针对 装配工艺数据和演变过程的集成管理问题，提出了一种多维度装配工艺数据信息管理方 法；张佳朋等[171]和万峰等[172]提出了一种基于工作流的产品装配工艺数据信息集成管理 方法，实现了产品装配工艺设计与装配工艺数据的有效组织管理，以及装配过程数据的 采集、实例生成和过程控制，并开发了基于流程的装配工艺规划过程控制与管理软件系 统，具备产品装配静/动态数据管理、工艺报表输出与现场实时可视化监控等功能。
在国内企业，尤其是航空航天、兵器等重点行业领域，针对 MBD 技术进行了产品 数字化装配的应用研究，以型号研制需求为牵引，在飞机整机[173]、航天火箭[174]、弹箭 引信[175]等复杂产品基于 MBD 的数字化/智能化装配工艺信息建模、装配工艺规划以及 装配信息管理等方面进行了应用验证。此外，国内企业也借助商品化软件集成系统平台 [176][177]（例如达索的 DELMIA®与 CATIA Composer®、西门子的 Teamcenter®等），通过 构建三维数字化装配工艺设计仿真系统及面向生产现场的可视化系统平台，实现了基于 MBD 的复杂产品装配工艺设计及其装配信息的现场可视化和管理。
针对上述文献分析可知，以上研究成果表明当前在产品装配工艺信息建模与工程应 用方面奠定了良好的基础，且较为清晰地阐明了基于 MBD 的产品装配工艺模型构建、 表达及集成组织管理方法，但是大多数文献所描述的产品装配工艺模型对装配工程语义 的表达能力仍有待加强，对产品装配工艺设计优化、装配精度仿真等支持力度有限，例 如产品装配工艺信息中较少涉及面向虚实装配的精度信息、无法涵盖现场装配过程的实 时装配技术状态，导致当前的产品装配工艺模型表达与构建技术难以将现场装配执行过 程所产生的实际装配信息反馈至三维装配工艺模型中，更无法实现面向现场装配的产品 装配工艺模型的实时更新、精度预测、仿真优化与动态重组。因此，在现有产品装配工
19

东南大学博士学位论文
艺模型表达方法的基础上，综合考虑面向现场装配过程的虚实装配全流程全要素工艺信 息，构建一种满足复杂产品实际现场装配需求的数字孪生装配工艺模型，对于有效提升 复杂产品装配效率、保证装配质量准确性与一致性具有重要的工程意义。 1.3.2 产品零件公差与形状误差建模技术及相关方法
产品零件公差建模是进行产品装配精度设计的基础，同时也是实现产品装配精度预 测与控制技术的必要前提。目前按照产品装配精度分析目的的不同，可以将其划分为面 向公差设计的精度分析和面向装配设计的精度分析[178]，其中，面向公差设计的精度分 析就是将零件自带的公差信息作为偏差源，将包含公差信息的零件模型进行组装，预测 产品最终装配精度并依据预测结果进一步优化零件制造公差；而面向装配设计的精度分 析则是将装配工艺过程中影响装配精度的因素作为偏差源，在考虑装配工艺过程的基础 上预测装配精度结果，以此作为优化调整装配工艺的依据。
针对面向公差设计的产品装配精度分析在很大程度上取决于用来描述零件公差带 的数学语言描述或物理模型以及评价零件公差对产品 AFR 影响的分析方法。自 20 世纪 80 年代以来，国内外许多学者围绕零件公差建模和公差分析的相关方法进行了卓有成 效的工作，取得了大量的研究成果，也一直以来都是 CAT 研究的热点问题。
零件公差建模的主要目的是对零件设计标注公差或零件制造误差的准确表达，并对 其具体的工程语义采用抽象的数学语言以及具体的计算机表达模型作出正确合理的解 释。大体上，零件公差模型可以划分为公差表示模型、公差信息模型以及公差数学模型 三大类，根据综述性文献[179][180][181][182][183][184][185][186]汇总统计可知，现阶段可适用于产 品装配分析比较常见的公差表示模型主要包括基于拓扑与工艺相关联表面 （Topologically and Technologically Related Surface，TTRS）模型[187]、矩阵（Matrix）模 型[188]、矢量环（Vector Loop）模型[189][190]、旋量（Torsor）模型[191]、雅可比（Jacobian） 模型[192][193]、GapSpace 模型[194]、公差图（Tolerance-Map，T-Map®）模型[195][196]、多面 体（Polytopes）模型[197]等公差建模方法，并在上述部分模型的基础上，通过进一步改进 并衍生了一系列新的扩展模型。例如，成比例装配间隙体积（Proportioned Assembly Clearance Volume，PACV）模型[198]，由旋量模型演进而来，主要用于描述零件制造表面 与理想表面之间各节点间隙的相对位置关系；雅可比-旋量（Jacobian-torsor）模型[199][200]， 联合雅可比和旋量模型，使其同时具有零件公差表示和零件间偏差传递计算的优点；结 合模态区间和小自由度（Modal Interval and Small Degrees of Freedom，MI-SDOF）模型 [201]，采用小自由度表示几何实体的 GD&T，模态区间用于描述不确定度。
然而，上述大多数研究成果主要是基于零件的尺寸、方向和位置误差的分析，较少
20

第一章 绪论
考虑零件几何形状公差以及零件表面形貌误差等对产品装配精度的影响。由于实际零件 在加工制造与测量过程中存在误差和不确定性，其零件表面轮廓将偏离理想名义位置， 但是目前大多数零件公差表示模型却忽略了零件特征的几何形状缺陷，这些简化处理将 导致产品最终装配精度分析结果产生较大的影响[202]。近年来，国内外学者在面向零件 几何误差的公差建模与形状表征方面开展了具有针对性的研究工作。
在国外研究方面，Samper 等[203]针对传统高精密装配中忽略形状误差的问题，提出 了基于模态分解的几何表面模型生成方法，通过计算给定装配过程中表面特征对之间的 接触点对，可以精确评估装配性能以及计算装配误差。Homri 等[204]提出了基于公制模态 分解（Metric Modal Decomposition，MMD）的机械产品零件形状误差建模方法，并通过 真实模型以及基于差分表面方法对其进行了装配模拟与优化分析。Srinivasan 和 Wood[205] 运用分形维数和小波变换技术研究了零件的形状公差建模理论，在前期基于分形维数的 几何公差建模基础上，提出了一种基于小波分析的零件表面轮廓误差分析和综合方法， 进一步扩展了零件表面误差提取的使用范围。Armillotta[206]为评价零件公差分析中的形 状误差，利用分形几何的概念用于生成与加工制造过程自相关特性一致的实际形状表面， 采用平面基准特征的面面贴合进行接触误差的模拟仿真，并在三维公差链实例中验证了 形状误差对装配偏差变动的关联性。Pierce 和 Rosen[207]提出基于非均匀有理 B 样条（NonUniform Ratioanl B-Splines，NURBS）的真实零件表面建模方法，该方法可以运用网格 点模拟零件在不同制造过程下的变动表面以及形状误差。Jbira 等[208]将形状缺陷纳入零 件公差表面建模中，采用网格节点划分以及基于具体形状公差数值进行高斯噪声和薄板 样条（Thin Plate Surface，TPS）插值计算，从而构建真实表面形状模型，实现机械产品 真实行为的装配仿真与可视化。Wu 等[209]提出了一种描述非理想圆柱表面形状的新方法， 主 要 是 通 过 由 埃 尔 米 特 多 项 式 和 傅 里 叶 级 数 构 成 的 统 一 表 达 式 （ Hermite-Fourier polynomials）来模拟不同制造误差引起的多重表面形态，从而由不同矩阵的线性叠加构 成非理想零件表面的总偏差，最后通过孔轴装配仿真为例验证了所提方法的有效性。 Corrado 和 Polini[210]研制了一种新型的统一公差分析工具（CaUTA），可适用于刚性和柔 性装配体的公差分析与误差计算，该工具采用制造信号（manufacturing signature）来模 拟零件几何偏差以及利用有限元分析零件的受力变形，因此综合考虑了零件形状误差和 零件力学行为特性对装配误差计算结果的影响。Schleich 和 Wartzack[211]提出了一种采用 离散几何表达面向过程的完整公差分析框架，将面向过程的产品信息集成至肤面模型 （skin model）中用于实现公差分析以及产品装配质量评估。Anwer 等[212]针对在 CAT 系 统中无法高效表达形状误差的问题，提出了从实体模型到肤面形状模型的范式转变，研
21

东南大学博士学位论文
究了肤面形状模型统一的离散几何表达方法，以及在预测和观测阶段的几何误差建模生 成过程与评价方法。Schleich 等[213]通过从产品几何技术规范与认证（geometrical product specification and verification）标准体系中引入肤面模型的概念用于模拟真实工件形状， 并提出了基于肤面模型的面向机械产品装配接触与运动仿真方法，解决了 CAT 中模型 几何形状偏差对装配接触几何建模、装配接触质量评估以及运动分析等装配仿真问题。 Schleich 和 Wartzack[214]引入肤面形状模型的概念用于表达工件的几何偏差，并提出了两 种基于肤面形状模型进行装配仿真的相对位置方法，即曲面约束配准法和差分表面法， 上述方法均在 CAT 中得到了应用验证。文献[215]进一步研究了面向公差分析的几何公 差评价以及变动零件模型的表达生成方法，提出采用肤面形状模型用于变动零件模型的 表达，并以此模型对尺寸公差、形状公差（平面度/圆柱度）、方向公差（平行度/垂直度 /倾斜度）、位置公差（同轴度/位置度/轮廓度）以及跳动度作了解析。Yan 和 Ballu[216]研 究了构建非理想的肤面形状模型生成方法，首先将零件离散网格化分割处理形成单一表 面特征，再将所有非理想表面特征结合成完整的非理想零件模型，并针对可能存在的间 隙或相交情况，通过局部网格调整和/或全局有限元分析实现所有网格点的平滑无缝连 接。另外，文献[217]在考虑形状误差和装配外力的基础上，针对两种不同的基于肤面形 状模型的装配仿真方法（即位移最大化法和线性互补条件法）作了对比评价。在文献[218] 中还进一步强调了形状误差以及装配外力作用在装配误差仿真中的重要性，讨论了在考 虑外力和位移边界条件下基于肤面形状模型的公差分析方法。Corrado 和 Polini[219]通过 肤面形状模型关联制造过程，以便 CAT 仿真更加趋向真实的工件，并将制造信号集成 至雅可比模型和旋量模型中，以此作为基于肤面形状模型的零件公差分析方法框架。 Tlija 等[220]提出了一种考虑加工制造缺陷以及零件变形的装配误差分析新方法，该方法 可在装配误差分析时同时考虑零件尺寸和几何公差，利用有限元仿真分析实现真实零件 模型的构建，并采用真实零件配合约束更新算法实现刚体和非刚体零件之间的装配，最 后以平面配合和圆柱面配合形成的装配体为例验证了上述方法的可行性。
在国内研究方面，Cao（曹衍龙）等[221]在考虑公差原则的基础上，对不同尺度下的 公差表面（定位/定向偏差、形状偏差、波纹度以及粗糙度）实现基于离散模态分解 （Discrete Modal Decomposition，DMD）的公差建模与几何仿真。Qiu（裘辿）等[222]研 究了基于特征的零件真实几何建模方法及其在装配质量分析中的应用，提出了基于混合 维（理想几何、变动几何和分数维几何）的零件真实几何实体特征生成方法，并研究了 零件真实几何模型在面面贴合的装配定位以及装配接触分析方法，经研究表明该方法可 以提高装配仿真精度。Liu（刘婷）等[223][224]提出一种面向机械产品的装配误差分析通用
22

第一章 绪论
方法，融合雅可比模型与肤面形状模型可用于公差表示和公差传递计算，并采用相对位 置法计算装配误差表面的小位移旋量，所提方法可适用于分析串行和局部并行装配体； 为解决上述方法无法解决完全并行装配体中的计算局限性问题，文献[225]引入多面体模 型以及闵可夫斯基求和和交集运算等操作，提出了基于多面体-肤面模型的装配误差分 析方法；最后，在文献[226]中总结性地研究了基于肤面模型的机械产品装配误差分析方 法，构建了考虑实际误差的的全公差表面肤面模型，并分别在考虑零件变形的基础上， 基于雅可比-肤面模型以及多面体-肤面模型实现了装配误差分析。Sa（撒国栋）等[227]提 出了一种面向复杂机电产品的有效且准确的公差分析方法，采用基于 NURBS 曲面模型 进行了包含形状误差的公差建模，并通过引入变动分离方法改进了该公差模型的采样方 法，将传统的双循环公差分析过程简化为单循环公差分析，并在星载天线结构装配中验 证了该方法的有效性。Zhang（张婷玉）等[228]提出了两种构建零件几何形状误差的方法， 即针对单一零件采用基函数线性叠加的方法以及针对同一批次的零件采用主成分分析 （Pricipal Component Analysis，PCA）方法，并给出了构建零件模型精度评价指标。Zhang （张忠清）等[229]提出了一种基于 NURBS 曲面用于表达零件几何形状误差的方法，并将 该零件几何误差的数学模型集成至 CAD 系统中用于生成真实零件几何实体模型，通过 相对位置法实现机械产品的精确装配。Luo（罗晨）等[230]初步探究了基于 Bézier 参数空 间包络（Parametric Space Envelope，PSE）的公差建模方法，通过建立空间包络控制点 变化与零件尺寸和形位公差之间的对应映射关系，从而可以实现复杂表面几何拓扑（例 如拉伸、压缩、弯/翘曲等）的表征，在此基础上，文献[231]进一步改进上述方法，通过 增加控制点的变化范围，保证了零件在变形情况下仍能完全满足零件的公差要求。
从上述研究中可以看出，在产品零件公差建模和几何形状误差建模技术方面，大量 研究者尝试从基于模态分解、分形维数、多项式叠加、肤面模型等数值模拟方法建立零 件的形状误差以及表面形貌的数学模型，期望能够获得更加真实精准的零件表面模型， 但在模拟过程中多数忽略了来自真实工件表面特征的实际形貌误差，虽然上述方法在一 定程度上提高了零件模型仿真精度和模拟效率，但其模拟结果与真实工件表面特征之间 依然存在一定的差距，这在很大程度上影响虚拟零件模型用于复杂产品装配精度预测与 仿真的置信度。因此，研究面向真实零件表面特征的零件非理想表面模型建模方法是构 建高保真度虚拟零件模型的基础，对于有效提高复杂产品装配精度及装配质量尤为重要。 1.3.3 产品装配偏差传递与误差累积建模技术及相关方法
复杂产品装配精度预测的前提是需要获知产品装配偏差源及其装配偏差传递与误 差累积规律，因此全方位构建考虑装配偏差源的产品装配偏差传递与误差累积模型是计
23

东南大学博士学位论文
算产品装配精度的必要条件之一[232]。我们知道，零部件加工制造与装配过程难以避免 的将引入加工与装配误差，随着产品装配过程的动态演进，零部件的加工误差将随着装 配过程进行传递与累积，从而影响产品最终装配精度。从零部件装配偏差传递的角度分 析可知，影响产品装配精度的偏差源大致可以分为以下三类[233][234]：零部件的加工误差、 装配过程中产生的配合误差和定位误差、以及装配过程导致的零部件变形误差，其中， 装配过程中引起的误差统称为装配误差。因此，如何定量描述复杂产品装配过程的偏差 传递流，并在此基础上揭示包含加工误差和装配误差在装配过程中的偏差传递与误差累 积规律，一直以来都是复杂产品装配精度预测与控制面临的关键科学问题之一。
当前，产品装配过程的偏差传递与误差累积建模一直以来都是产品装配公差分析的 热点研究内容之一，主要是用于研究产品零部件 GD&T 在装配过程中的相互作用，以及 在装配配合、定位、连接等约束条件下的累积效果，从而预测零部件几何尺寸偏差对 AFR 或关键功能特性（Key Function Characteristic，KFC）的影响[235][236][237]。根据产品装配过 程偏差传递分析可知，可以将装配过程分为两种类型[238][239]：一是根据零部件加工制造 的配合特征实现零件装配，即通过将零件预定义的配合特征形成结合面从而使零件组装 起来；二是根据已定义好的“基准流链（datum flow chain）”将定位在工装夹具上的零件 通过焊接、铆接或其他连接方式组合在一起从而形成完整的装配体。近年来，各国学者 对于产品装配过程的偏差传递与误差累积规律进行了大量的探索与研究，主要针对不同 的被装配零件特性，将其分为面向刚性零件和面向柔性零件的偏差传递模型两大类。
在面向刚性零件的偏差传递建模方面，Jin 和 Shi[240]提出了一种面向装配过程的状 态空间建模方法，可采用二维状态空间矩阵来描述装配工艺的误差传递过程，在此基础 上，Liu 等[241]进一步提出了面向多工位装配工艺的通用状态空间建模方法，适用于构建 包含不同偏差源类型的三维偏差传递模型。Zuo 等[242]重点研究了基于状态空间模型的 精密机械系统多工位装配过程的装配偏差传递建模机理；随后，文献[243]进一步提出了 考虑装配配合表面形状误差的装配偏差传递建模方法，提升了装配精度预测的质量。Cao 等[244]为解决航天器精准装配问题，运用状态空间模型和小位移旋量理论对其装配偏差 传递进行建模，实现了航天器装配过程中的装配精度动态预测与实时补偿。Tyagi 等[245] 研究了多工位装配工艺中夹具定位优化设计问题，主要是以产品尺寸最小变动为目标， 提出了采用状态空间模型构建多工位装配过程的偏差传递模型，并通过最优公差启发式 搜索算法对上述模型进行求解计算，从而确定最佳的夹具定位位置。Guo 等[246]为提高 机翼零件的装配精度，对装配过程中关键配合位置存在的定位误差进行了分析，分别提 出了基于轮廓板和协调孔的定位方法以及装配精度计算方法，并建立了整个装配过程的
24

第一章 绪论
误差累积模型。Guo 等[247]提出了一种基于数字协调模型的飞机装配过程工作模式，可 用于获得飞机装配过程准确的尺寸/形状/空间定位及协调精度，该模式强调飞机装配的 误差传递过程，其核心任务是通过实际测量数据对装配过程进行动态反馈调整以及控制 累积装配误差的一致性，从而保障飞机的装配精度和协调准确度。周思杭等[248]研究了 一种基于尺寸变动度的装配序列偏差传递模型，并给出了装配偏差随装配序列的传递与 累积过程的数字化表达形式，实现了装配过程的累积偏差求解以及装配质量最优的装配 序列筛选。洪军等[249]以精密机床装配过程为例研究了各装配工序偏差与装配调整工艺 对整机装配精度的影响规律预测，并通过微分运动矢量构建了零部件装配过程偏差传递 与误差累积的状态空间模型，从而可实现装配精度预测以及调整装配工序策略。吴玉光 [250]提出了基于真实机器模型的装配积累误差建模与分析方法，研究了装配基准的几何 误差在装配链中的传递和变换过程，研究结果表明产品装配精度取决于零件几何误差和 装配接触两方面因素，且零部件的装配基准和装配顺序决定了误差的积累与传播。吕程 等[251]通过构建装配关系与结合面误差多色集合围道矩阵，即结合面符号矩阵（JSS 矩 阵），提出了基于 JSS 矩阵的装配误差传递路径搜索方法，可获取与装配精度相关的各 误差分量所有传递路径，同时针对并联误差传递路径不确定的问题，依据结合面定位优 先等级原则，通过建立结合面实际误差传递属性矩阵，基于雅可比-旋量理论计算获得各 误差分量中装配精度最高的误差传递路径。李东英等[252]提出了元动作装配单元（Metaaction Assembly Unit，MAU）的概念，基于此构建了面向产品装配误差传递的误差传递 链接图以及误差传递衔接矩阵，可适用于装配误差源表达和误差传递模型的建立，有利 于提高装配过程中装配精度预测与控制分析的效率。祝鹏等[253]提出了基于复杂网络的 机械装配过程自调节偏差传递网络建模与误差溯源方法，并最后以某型锥齿轮组件的多 阶段装配过程为例验证了上述方法可以实现对装配偏差流的有效建模，并成功实施关键 装配特征面识别和误差溯源。王子生等[254]为定量描述机床装配过程中零件质量特征变 动/测量/调整的偏差传递过程，提出了零件质量特征、实际测量结果以及装配过程误差 源三者之间的数学映射关系及其装配过程误差传递模型，可用于实现机床装备精度预测 和质量误差分析。以上研究多数是从零部件的配合特征表面的几何尺寸误差出发构建装 配偏差传递与误差累积模型，较少考虑实际装配配合表面的误差传递属性以及装配配合 表面在载荷作用下的变形误差，导致在产品装配精度预测的准确性方面依然存在一定的 影响。
在面向柔性零件的偏差传递建模方面，研究较多的是以薄壁件为装配对象的柔性零 件[255][256][257]，例如车身钣金件和飞机蒙皮装配等，但在复杂产品的实际装配过程中，零
25

东南大学博士学位论文
部件均会受到装配载荷等作用产生变形误差，从而影响产品的最终装配精度，当前国内 外学者也对上述问题进行了有益的研究和探索[258]。Tonks 等[259]研究了结合统计公差分 析与随机有限元分析法用于柔性体装配过程的公差分析问题，并针对几何表面的偏差变 动，提出了基于多项式表达构建真实几何表面的混合协方差模型，上述方法可有效预测 由于柔性零件几何尺寸偏差所导致的残余应力和回弹等变形误差。Huang 和 Kong[260]提 出了一种完整的面向多工位制造系统装配偏差分析的刚柔混合装配模型，该方法可采用 偏差流模型预测装配累积误差，以及基于统计模态分析和指定公差用于仿真零件几何误 差，并在两者集成的基础上构建协方差矩阵，上述模型可在复杂多工位装配系统中为装 配公差分析/综合、装配设计评估以及装配质量控制提供理论依据。Grandjean 等[261]针对 传统公差分析中忽略形状缺陷以及只考虑刚性零件等问题，提出了定量描述具有形状缺 陷以及局部接触变形表面的零件装配分析流程。Yu 和 Yang[262]提出了一种面向汽车车身 钣金件不同装配工艺的误差传递模型，并引入影响系数法和有限元法至该模型中，可有 效预测汽车车身零件的装配质量。Liu 等[263]将温度、重力以及工作载荷纳入至装配偏差 源中，同时考虑零件加工制造误差和零件变形误差来构建基于雅可比-旋量模型的装配 误差计算模型，并在机床尾座装配中验证了所提方法的可行性。Guo 等[264]提出了一种 考虑几何误差和零件变形的三维装配偏差传递计算方法，通过考虑零件变形误差修正了 装配误差传递模型，建立了基于弹性表面替代模型的装配误差传递方法，并通过有限元 分析与实验验证了上述方法的有效性和准确性。Guo 等[265]为揭示飞机装配误差的非线 性传递机制，研究了一种面向装配偏差传递过程的分析方法，通过引入配合误差和变形 误差至协调误差链中，可将由于基准变更导致的真实重定位偏差用于修正装配特征定位， 从而基于协调误差链建立面向单装配工位和多装配工位的误差传递模型，最后验证了该 方法可适用于不同装配工位下的精准装配任务。冯䶮等[266]在考虑工作载荷变形对公差 分析的影响，提出了基于 GPS 认证表面的修正公差模型，将实际变形量用于修正传统公 差模型，从而更加真实准确地进行精度预测。靳思源等[267][268]提出一种面向飞机壁板装 配的刚柔混合装配偏差建模方法，通过确定性定位方法获取刚性装配偏差以及基于有限 元模拟计算柔性变形偏差，从而实现对飞机壁板外形偏差的准确预测。刘建永和乔立红 [269]针对零件变形导致的装配误差问题，提出了一种装配变形误差计算方法，构建了考 虑零件变形的装配误差传递模型，并通过空间运动学原理计算获得同时考虑零件加工误 差和零件变形引起的装配误差。穆晓凯等[270]针对传统装配精度分析中未涉及载荷作用 下零部件变形影响的问题，提出了一种综合尺寸、形位公差以及零件载荷变形偏差的三 维公差分析模型，并指出装配载荷作用下的零件变形偏差在装配过程中呈现传递和累积
26

第一章 绪论
趋势，将对机械系统装配精度产生不容忽视的影响。 综上所述，对于产品装配偏差传递与误差累积建模技术方面，目前大多数研究是以
刚性零部件装配配合为主，部分学者以汽车车身钣金件、飞机壁板蒙皮等薄壁件装配为 研究对象，考虑刚柔混合装配中零部件变形问题对产品装配偏差传递建模的影响作用， 但依然处于研究起步阶段，在当前的产品装配精度分析过程中，只是将零部件制造误差 与装配变形误差设定为相互独立的因素，且往往忽略实作装配工艺参数（例如装配顺序、 装配位置等）对装配精度的影响，这就导致装配精度预测与实际情况之间存在差距，这 一问题俨然已成为影响产品装配精度的制造瓶颈。因此，综合考虑零部件制造误差、装 配变形误差以及面向现场装配的实作装配工艺等多维度误差源耦合因素影响，探索符合 实际装配过程的装配偏差传递与误差累积规律，对于在准确预测及有效提高产品装配精 度预测质量方面可以提供重要的理论依据。 1.3.4 产品装配精度预测与控制技术及相关方法
复杂产品的装配精度将直接影响到产品的整机性能，其装配精度预测与控制是保证 复杂产品装配质量的核心关键问题。一般地，装配精度预测是指根据影响产品装配精度 的偏差源几何变动解析，以实现对产品的最终装配精度进行预测；而装配精度控制则是 指通过监测装配过程的异常情况并进一步针对装配偏差源进行控制，以获得最优的产品 装配精度。对于复杂产品机械结构而言，其整机装配精度保障不仅受到来自零部件、夹 具工装等加工制造误差以及装配工艺过程中引起的装配误差等因素的共同影响，而且还 需通过面向现场装配的测量、调整等装配工艺实现对装配精度的控制。因此，明确产品 装配过程中影响装配精度的输入因素，溯源装配误差来源，并在此基础上构建装配精度 分析模型以及实现装配精度有效预测与控制已成为国内外学者研究关注的热点问题之 一。
当前，产品装配精度分析（也称为装配误差分析）主要有以下三个方面的目的：① 用于装配精度校核的精度预测输出；②用于零部件、工装夹具等公差设计/分配的精度控 制输入；③用于产品零部件结构、装配工艺过程的优化调整。常见的产品装配精度分析 方法主要有极值法和统计分析法，其中，极值法假设装配尺寸链中每个零件尺寸处于最 大或最小极限尺寸位置，在装配误差分析中将造成封闭环的较大误差波动范围，导致出 现装配干涉或配合间隙较大等情况；统计分析法是假设零件 GD&T 遵循特定分布规律， 采用概率统计理论对装配误差进行仿真分析，其中蒙特卡洛模拟法是目前统计分析法中 使用最为广泛的方法之一。根据产品装配精度分析的空间计算维度分类，可以分为基于 一维/二维尺寸公差以及基于三维几何公差的产品装配精度预测方法。相较于基于一维/
27

东南大学博士学位论文
二维尺寸公差分析，基于三维几何公差的产品装配精度预测方法在三维空间中装配误差 变动解析和传递方面具有更为清晰且有效的表达模型，同时可以结合零部件 GD&T 信 息、加工制造误差、装配误差（例如配合误差、定位误差和变形误差）等耦合关系，使 得产品装配精度分析结果更加准确。
在基于 ISO 新一代产品几何技术规范（Geometrical Product Specifications，GPS）以 及 ASME Y14.5-2018 最新标准的前提下，根据目前的研究现状分析，国内外学者提出了 许多如 1.3.2 小节所述的典型三维公差表示模型用于零件装配成功率计算、装配精度预 测等装配分析中。例如，Franciosa 等[271]从 TTRS 理论出发，提出了适用于刚性零件装 配公差分析的统计偏差分析方法（SVA-TOL），主要通过对平面和圆柱面变动特征以及 相对应的装配特征约束建模，针对完全约束装配和过约束装配两种情形，基于齐次变换 矩阵和优化算法实现了变动配合特征之间的最佳对齐。Li 等[272]提出了一种基于 CAD 模 型的装配精度预测方法，主要是利用 CAD 二次开发用于提取装配模型信息以及自动生 成三维装配尺寸链，基于输入公差或真实尺寸数值能够通过尺寸链和精度预测模型计算 装配误差。Chen（陈华）等[273][274]采用统一的雅可比-旋量模型用于包含局部并联装配连 接的三维公差分析中，提出了在极值法和统计分析法两种情况下，考虑局部并联装配尺 寸链的雅可比-旋量模型计算方法，主要是通过将带局部并联的串联装配转换为纯串联 装配连接，从而构建更新后的雅可比-旋量模型，以此用于三维装配公差分析中。Mao 等 [275]提出了一种基于状态空间模型的机械产品装配质量预测方法，可用于提升装配精度 以及最终装配质量。Schleich 和 Wartzack[276]为预测产品装配几何精度结果及其影响，提 出了基于肤面形状模型的装配公差分析方法，定量分析比较了与基于公差图表、矢量环 以及小位移旋量法的公差分析方法的优缺点，分析结果表明肤面形状模型考虑了几何形 状误差且符合新一代 GPS 标准，可用于更加真实的装配特性预测与仿真，随后又在文献 [277]进一步给出了一种基于肤面形状模型的装配仿真通用框架，主要采用绝对定位法以 及基于最近点迭代搜索（Iterative Closest Point，ICP）的曲面约束匹配法和差分曲面法用 于实现针对不同装配类型的产品装配仿真分析。Cao 等[278]提出了基于矢量环和准蒙特 卡洛法相结合的三维装配公差分析方法，继承了两种方法的优势，更加易于计算 AFR 以 及准确的统计分析结果。Sun 等[279]为有效预测高精密机械产品的装配精度，提出了一种 基于真实配合状态的装配误差计算方法，主要是通过小波变换分解与重构配合表面形状， 经由差分表面法与质心驱动算法获得真实配合状态，并采用小位移旋量描述装配误差以 实现准确预测。Zhang（张秋爽）等[280][281]提出了一种考虑形状误差的曲面约束匹配算法 用于装配仿真定位，该方法通过基于最小势能法获得配合表面的真实接触状态以及零件
28

第一章 绪论
装配的空间位置，适用于精密零件真实装配仿真过程中的装配精度预测与控制。 而在国内文献方面，胡洁等[282]提出了一种基于 NURBS 的形位公差装配成功率计
算方法，通过统计方法获取模拟加工表面采样点，并利用 NURBS 曲面插值构造加工表 面，从而结合模拟检测过程估算装配成功率。蒋科等[284]针对多组并联装配特征配合变 动解析问题，提出了一种考虑定位优先级约束的装配特征配合变动算法，进而给出了间 隙配合下的装配成功率计算方法。吕程等[285]研究了面向多种公差耦合情况下的装配结 合面误差建模方法，通过小位移旋量理论、蒙特卡洛模拟法以及响应面法建立了包含零 件制造误差与装配过程误差的装配结合面综合误差模型，可实现设计阶段对装配精度的 预测。张体广等[286]提出了一种基于数据配准的零件配合表面最佳接触状态确定方法， 采用数据配准技术和粒子群优化算法确定配合表面最佳接触点，通过基于接触状态计算 配合误差，从而实现零件装配精度预测。张敏等[287]提出了一种基于预装配精度分析的 飞机关键装配工序质量控制技术，主要是通过基于装配工艺和实测数据构建装配工序精 度模型，并将其作为输入进行预装配精度分析，从而实现飞机中机身壁板的装配质量控 制。刘检华等[288][289]提出了一种综合考虑表面形貌与受力变形的装配精度分析方法，主 要是以非理想表面模型为基础，通过基于共轭梯度-快速傅里叶变换算法计算接触变形 误差，以及基于改进多面体模型计算装配偏差累积，从而实现产品装配精度分析。
以上文献在产品装配精度预测与控制方面的分析研究中，大多数装配误差分析方法 无法同时表达所有几何公差类型且又便于零件间的串并联装配混合结构的偏差传递分 析，而且还部分忽略了实际加工制造过程引入的零件形状误差以及实际装配过程中零部 件承受载荷等外部作用导致的零件变形误差问题，进而影响产品装配精度预测的准确度 和精密度。
另外，目前 CAT 分析软件也在产品装配精度预测与控制方面发挥着重要作用，通 常是用来预测产品最终 AFR 或计算 KFC 的变动量，并通过灵敏度分析以获取各变量的 贡献度，同时还可以在保证装配质量的前提下进行公差优化/综合以降低制造成本。 Prisco[290]、Shen[291]、Corrado[292]等分别在其综述文章中列举并对比了现有市面上不同的 公差分析软件，比如 VisVSA、CETOL、3DCS、CATIA.3D FDT 和 FT&A、MECAmaster、 Mechanical Advantage、eM-TolMate、Analytix、PolitoCAT/Poliitopix 等，其中，较为常见 的 CAT 分析软件是将前述的公差表示模型集成至主流 CAD 系统中以实现复杂的装配公 差分析处理与精度预测，例如 PTC®公司的 Creo ParametricTM 中的 Tolerance Analysis Extension 模 块 （ CETOL 6 sigmaTM ）， Dassault Systèmes® 公 司 的 Solidworks® 中 的 TolAnalystTM 模块，Siemens 公司的 Tecnomatix®中误差分析 VisVSA 模块，因此，基于
29

东南大学博士学位论文
CAT 的产品装配精度预测与控制技术也已经成为复杂产品装配误差分析的重要组成部 分。然而，在实际零件装配过程中，仍然难以将包括制造过程、装配过程（装配顺序/路 径/方向、工装夹具等）、测量结果以及制造/装配中的零件变形等融入基于 CAT 分析软 件中，从而无法高效准确的实现基于实际装配流程的装配精度预测以及装配过程监控。 1.3.5 存在的问题
基于上述对复杂产品装配精度预测相关技术与方法的国内外研究现状分析，并结合 面向实际工程需求的产品装配难题，特别是针对在航空航天等复杂产品装配过程中难以 保证产品的装配一次成功率，且经常出现因装配精度超差造成的修配、调整、返工/返修 等现象，目前的研究仍然存在多个方面的问题尚未取得突破或有待进一步深入，这些问 题都将直接影响产品装配精度分析的准确度与一致性，主要体现在以下几个方面：
（1）现有数字化装配建模方法缺乏考虑实际物理零件真实装配特征的几何形状误 差。产品数字化装配模型是进行三维装配公差分析的前提，建模的准确性对装配精度分 析结果至关重要。当前研究中大多数是根据零件设计公差进行基于理想数模的装配建模， 主要集中在分析基于理想数模的产品尺寸误差和位置方向误差对装配精度的影响，往往 忽略了实际物理零件加工制造的几何形状误差，从而导致产品虚拟装配仿真结果无法真 实反映物理装配过程的现象，因此，现有数字化装配建模与仿真方法在面向实际物理零 件的几何形状误差建模方面仍需进一步完善。
（2）现有数字化装配建模方法缺乏考虑基于真实装配特征的串并联装配结合面实 际配合变动误差。通常，在产品装配过程中必然涉及多个装配特征相互关联和制约的装 配约束关系，从而使得装配特征之间形成串并联相混合的装配连接关系，而在实际装配 应用中往往忽略了并联装配连接结构或者仅仅只考虑基于理想数模的局部并联尺寸链， 这就会导致包含零件几何形状误差的真实装配特征的实际串并联装配配合变动误差产 生装配间隙过大或发生装配干涉/碰撞现象，进而影响后续产品实际装配偏差传递与误 差累积以及零件的装配一次成功率，因此，当前数字化装配建模与仿真方法难以在实际 串并联装配场景中得以广泛应用。
（3）现有装配误差仿真分析方法缺乏虑及零件制造误差和装配过程误差等多维度 误差源的装配精度预测模型构建。装配误差仿真分析方法的计算精度和效率主要与公差 表示模型和误差传递方法两个因素息息相关，当前研究中较少涉及同时适合所有误差类 型的公差表示模型且方便于装配误差传递的计算方法，同时在实际零件装配过程中受到 零件制造误差和装配过程误差等多维度误差源的综合影响，目前大部分装配误差分析方 法往往忽略了零件变形误差对产品最终装配精度的影响，从而导致产品装配精度预测结
30

果与真实装配情况存在差异。

第一章 绪论

DT 技术为解决上述存在的装配问题提供了新的解决思路和技术手段，即 DTA 技

术，它是通过将 DT 的核心思想与数字化装配技术相互融合，借助现场装配中实际装配

工况、实作装配工艺以及实际采集的数据信息，构建与现场装配实物与装配过程相互映

射且完全一致的数字孪生装配模型，以实时高保真地模拟产品在现实中的装配行为与装

配性能，进而可以实现产品装配工艺的闭环优化反馈设计、装配精度预测与控制并有效

指导装配现场操作等。为此，本文将紧密围绕上述存在的问题，借助 DTA 技术的相关

理论与研究方法，对基于 DT 的复杂产品装配精度预测与保障所涉及的共性基础关键技

术问题进行深入研究，旨在为复杂产品装配精度设计与指导实际产品装配过程提供基础

理论保障与应用参考范例。

1.4 本文主要研究内容及章节安排

1.4.1 主要研究内容

第一章 绪论
第二章 复杂产品数字孪生装配工艺模型表达与构建技术

第三章 面向数字孪 生的零件非
理想表面 模型建模
技术

第四章 基于孪生表 面模型的零 件装配成功
率预分析 技术

第五章 考虑多维度 误差源的产 品数字孪生
装配精度 预测技术

第六章 基于数字孪生的复杂产品装配精度预测应用验证
第七章 总结与展望

课题 基 提出 于

数

字

孪

生

的

复

技术 杂

方法 产

品

装

配

精

度

预

测

关

应用 验证

键 技

术

总结 研 展望 究

图 1-2 本文主要研究内容与组织架构
本文以面向航天器（卫星、火箭等）等复杂产品基于数字孪生的装配精度预测与保

障为主要目标，针对复杂产品装配工艺规划中涉及的装配工艺模型表达与构建、零件非

理想模型建模、装配偏差传递与误差累积建模以及装配精度预测与控制等关键技术问题

开展研究工作，并在三维装配工艺设计、三维公差设计分析、新一代 GPS 标准、DTA 技

31

东南大学博士学位论文
术等相关理论与研究基础上，将本文涵盖的共性基础关键技术研究内容与面向工程实际 需求相互对接并关联起来，进一步研究提出基于 DT 的复杂产品装配精度预测集成演示 系统设计与应用流程，为复杂产品装配精度预测与保障提供了一种切实可行的应用验证 范例。全文的主要研究内容与组织架构如图 1-2 所示。 1.4.2 章节安排
本文章节具体编排如下： 第一章：绪论。阐述了本课题的研究背景及意义，分析了当前复杂产品数字化装配 建模与仿真技术的发展趋势以及复杂产品装配精度预测相关技术与方法的研究现状，并 总结了当前存在的问题，最后介绍了本文的主要研究内容及组织结构。 第二章：复杂产品数字孪生装配工艺模型表达与构建技术。通过引入 DT 核心思想 至复杂产品装配工艺设计中，给出了产品数字孪生装配模型的总体实施框架，在三维装 配工艺模型的结构形式基础上，明确了产品数字孪生装配工艺模型的组成结构，并提出 了基于 MBD 的产品数字孪生装配工艺模型表达方法以及关联耦合机制，结合产品装配 动态演变过程分析了产品数字孪生装配工艺模型的构建策略，最后通过实例进行了验证。 本章所述方法为基于 DT 的产品装配精度预测提供了“模型-信息-数据”来源。 第三章：面向数字孪生的零件非理想表面模型建模技术。提出了以非理想表面模型 为载体实现数字孪生装配对象模型的几何参考表达方法，通过引入新一代 GPS 标准体 系，给出了通过几何要素及相关操作实现面向数字孪生的零件表面模型信息的完整表达 方案；提出了基于肤面形状模型的零件非理想表面模型创建流程，分析了零件在设计阶 段下规范操作过程以及在实测阶段下认证操作过程的肤面形状模型表达与生成方法；在 此基础上通过肤面形状模型表面结合与修正，实现满足设计公差规范要求及真实加工制 造实际状态的零件非理想表面模型的创建，并进行了实例验证分析。 第四章：基于孪生表面模型的零件装配成功率预分析技术。首先研究了基于装配接 触有向图的孪生表面模型装配定位约束表达方法，并根据孪生表面模型装配过程分别提 出了基于元素配准调整和曲面约束匹配的装配特征位姿精准定位求解方法；然后，从实 际串并联装配出发，分析了基于孪生表面模型的零件串并联装配结合面的误差传递机理， 讨论了串并联装配结合面组实际误差传递属性的求解方法；最后，以装配定位实体无干 涉原则为判定依据，给出了基于蒙特卡洛法的孪生表面模型零件装配成功率计算流程， 为更加有效地指导产品装配精度分析奠定了基础。 第五章：考虑多维度误差源的产品数字孪生装配精度预测技术。将 DT 技术引入至 复杂产品装配过程中，提出了考虑多维度误差源的产品数字孪生装配精度预测方法。分
32

第一章 绪论
析了复杂产品数字孪生装配精度预测总体流程和具体实施步骤，并针对复杂产品装配涉 及的多维度误差源，分别提出了零件制造误差（含几何形状误差）和装配过程误差（含 配合定位误差和接触变形误差）的误差建模流程与表征方法，阐述了基于装配动态尺寸 链和误差流理论的产品装配偏差传递更新迭代机制，最后通过改进雅可比-旋量模型，构 建了雅可比-孪生表面模型，实现了考虑多维度误差源的产品装配误差累积计算和装配 精度预测。
第六章：基于数字孪生的复杂产品装配精度预测应用验证。为验证本文所提的产品 装配精度预测方法以及解决实际工程问题，搭建了基于数字孪生的产品装配精度预测集 成演示系统，并以面向某型号卫星结构板部装为应用验证对象，详细介绍了该集成演示 系统的实验平台和应用实施流程，对上述系统的各个功能模块和实际应用效果进行了分 析。
第七章：总结与展望。总结了本文的主要研究成果及创新点，并提出了未来工作展 望。
33

东南大学博士学位论文 34

第二章 复杂产品数字孪生装配模型表达与构建技术
第二章 复杂产品数字孪生装配工艺模型表达与构建技术
2.1 引言
考虑到传统的三维装配工艺信息建模方法无法有效支撑面向现场装配的产品装配 工艺信息表达与组织存储，难以涵盖现场装配过程中产品装配模型的真实装配技术状态， 不能将装配执行过程中所产生的实际装配信息反馈至三维装配工艺模型，从而无法实现 现场装配过程中产品装配工艺模型的实时动态更新、仿真优化与动态重组。更进一步， 在产品现场装配阶段，虽然当前使用了数字化测量、检测与配套工装设备用于辅助装配， 实现了对产品装配几何量的精度控制与反馈调整，但是由于零件装配过程中存在装配定 位误差、物理变形误差等物理量并伴随装配过程不断传递与累积，使得基于理论模型的 装配工艺设计规划和仿真结果与实际现场装配情形并不一致性，无法满足复杂产品高质 量/高精度/高性能装配的工程应用需求。
因此，为进一步提升复杂产品装配工艺设计规划与仿真的真实性和准确性，本章将 DT 技术引入至装配工艺设计过程中，提出了一种适用于现场装配的复杂产品装配工艺 模型构建与表达方法，该方法可以将装配工艺设计过程中涉及的装配“模型-信息-数据” 与现场真实装配情况相互关联与耦合，生成并动态构建与产品现场装配过程完全一致的 产品数字孪生装配工艺模型（Digital Twin-based Assembly Process Model，DT-APM），用 于分析、模拟和仿真产品装配过程中的状态、行为与装配性能，为后续产品装配精度预 测与控制、保障装配质量一致性、指导现场装配操作等方面提供支持。
2.2 面向装配的产品数字孪生模型总体框架
我们知道，从产品装配过程涉及的内容可以看出，产品装配的两大核心要素分别为 装配对象（主要包括零部件、原材料/辅料/中间物料等对象）和装配工艺（主要包括装配 工艺路线/流程、工艺/工序/工步组合、装配过程数据、装配制造资源以及相互之间形成 的装配规则或约束条件等信息），其中，产品装配对象的最小单元为零件，产品从经历零 件、组件、部件到完整装配体的过程，体现了产品装配对象的过程演变特性；而产品装 配工艺作为描述装配活动的定义信息，也反映了装配工艺信息伴随产品装配过程与装配 模型演变而不断变更与演进，同样具有过程演变特性。因此，产品装配过程实质上是随 着装配工艺信息的递增而使产品装配对象不断演变而最终形成产品装配体的过程。
如今，随着 CAD、计算机辅助工艺规划（Computer-Aided Process Planning，CAPP） 等数字化手段的广泛普及与应用，以及基于 MBD、模型轻量化、基于精度和物理的建 模仿真等技术的日臻完善，在开展实际装配活动之前的产品装配工艺设计阶段，一般都
35

东南大学博士学位论文
是采用基于 CAD 的产品装配结构设计与基于 CAPP 的装配工艺规划相结合的形式，在 虚拟空间中实现基于理论模型的产品零件设计、装配设计以及装配工艺的设计规划与仿 真，而在产品实际装配阶段，零件毛坯通过制造装备在加工制造工艺驱动下将零件 CAD 模型演变为实物零件模型，在此基础上，进一步通过装配工艺装备以及装配测量与检测 设备在实做装配工艺引导下将装配 CAD 模型演变为实物装配模型，从而在物理空间中 实现基于实物模型的产品装配。从上述分析可知，无论从产品模型演变角度（CAD 模型 到实物模型），还是从产品装配空间维度（虚拟空间到物理空间），均存在由于理论模型 与实物模型之间的差异，导致基于理论模型的装配工艺仿真结果与基于实物模型的产品 装配不一致的情况，究其根本原因之一就是虽然在开展实际装配工作前采用了基于理论 模型进行装配工艺设计、规划与仿真，也得到了较为合适的产品装配工艺参数，但是在 产品实际装配阶段，由于存在产品零部件制造误差、装配定位误差以及变形误差等几何 量和/或物理量及其上述误差随着装配过程的不断传递与累积，使得产品的实际装配状 态与基于理论模型的装配工艺仿真结果之间存在较大的差异，从而无法保证产品的装配 质量。因此，为解决上述面向复杂产品的实际装配工程问题，有必要寻找一种能够替代 理论模型的“代理模型”，用于高保真地映射与还原真实装配场景，并基于“代理模型” 力争实现产品装配过程中的闭环反馈、优化、控制与决策，以满足在数字化/信息化/智 能化时代下复杂产品高质量/高精度/高性能装配的应用需求。
近年来，DT 技术得到了国内外学术界和企业界的高度关注与广泛研究，大家对 DT 技术内涵的认知可以归纳概括为：通过数字技术与数字化手段等方式，借助数据模型与 物理实体之间进行数据交互与信息传递，用于构建与物理实体的特征、状态、行为和性 能等与其完全对应和一致的虚拟模型，进而可以支持产品研发、生产及管理等全业务流 程的科学分析与优化决策，从而实现面向 PLM 的产品模型、信息及数据的动态集成与 高效管理。因此，DT 可以作为解决当前复杂产品装配问题的一种切实可行的技术手段， 通过面向现场装配的实物测量、检测与反馈等方式来获得真实的装配数据和装配状态， 在基于理论模型的装配工艺设计结果基础上，构建与产品现场装配过程相互映射且完全 一致的虚拟模型，用于实时模拟仿真与预测分析产品装配过程中的装配质量，实现产品 装配精度预测与控制，从而为高效指导现场装配操作、保证装配质量一致性与准确性及 提升装配效率等提供有效且可靠的解决方案。将上述 DT 技术的核心思想与产品装配工 艺过程相结合，可以扩展得到面向装配的产品数字孪生模型参考架构，如图 2-1 所示。
36

第二章 复杂产品数字孪生装配模型表达与构建技术

工艺 仿真
工艺 规划

装配工艺 服务平台

精度 预测
流程 管控

驱动
装配工艺 孪生数据 驱动

驱动

物理装配空间

映射与交互

虚拟装配空间

图 2-1 面向装配的产品数字孪生模型参考架构

从复杂产品装配工艺演变过程可以知道，经由产品装配工艺设计得到的装配工艺信 息流将经历装配生产调度、装配工艺执行、装配工艺现场反馈等阶段，可以将现场装配 工艺执行数据和实测数据用于反馈、迭代并更新基于理论模型的装配工艺模型，从而形 成完整的装配工艺信息数据集合用于指导装配工艺活动。通过借助基于装配过程的全数 字量协调传递方式，并根据面向现场装配的产品装配工艺数据流向，本章进一步提出了 一种适用于现场装配的复杂产品数字孪生装配模型（Digital Twin-based Assembly Model， DT-AM）总体实施框架，其结构示意图如图 2-2 所示，主要由虚拟装配空间层和物理装 配空间层两部分构成，同时两者之间通过中间连接通信层完成虚实装配过程的关联与映 射，这里不作为本节讨论的重点。其中，物理装配空间层是通过与物理产品之间的现场 实物装配的实测数据采集和装配工艺过程信息交互，不断更新和迭代基于理论模型生成 的装配工艺模型，从而实现对应物理产品的真实装配状态和行为的镜像；而虚拟装配空 间层则是在产品数字孪生装配工艺服务平台下，借助装配工艺设计规划、装配精度预测 分析等服务，在装配工艺设计阶段以及装配工艺执行阶段用来模拟仿真和预测控制物理 产品在现场装配过程中的形成过程，从而实现产品装配过程“虚实融合、以虚控实”的 效果。

37

装配工艺规划

东南大学博士学位论文

复杂产品数字孪生装配工艺服务平台

装配工艺仿真

装配精度预测

装配流程管控

装配工艺设计阶段

虚

拟

装配工艺

装配顺序

装 过程信息

规划

配

空

装配工艺

装配路径

间 资源信息

规划

层

装配其他

装配仿真

辅助信息

验证

迭代 交互

算法 优化

规则 推理

装配工序

装

间模型
装配工艺 轻量化

数据

配 工

数据

艺

驱动 孪 驱动

装配动画/

生

文件输出

数

知识

据

获取

模型库 算法库 规则库 知识库

装配工艺执行阶段

装配工艺过程 信息实例化
实测数据 获取与预处理
数字孪生装配 对象模型生成
装配工序间模型 更新

数字孪生装配工艺 模型构建与表达
装配偏差传递分析
装配尺寸链生成
装配误差计算 与精度预测

（仿真分析）

实时驱动·双向映射

迭代交互·反馈优化

（测量数据）

（

物 理 装 配 空

产以 品卫 零星 部产 件品 实为 物例

• 激光跟踪仪 • 三坐标测量仪 • 激光扫描仪 • 装配传感器 • 激光投影仪 • … …

现 场 实 物 装 配

）

辅助装配硬件设备

间

层资

Internet

源

支

撑 装配工艺装备 存储资源 计算设备 设备终端 网络端口 现场人员 工具物料 规程方法 车间看板 装配环境

图 2-2 复杂产品数字孪生装配模型总体实施框架

针对产品 DT-AM 的应用服务实施问题，其首要需解决的问题是如何将涉及到的相 关模型、信息和数据用于实现产品 DT-APM 的动态集成、映射表达与高效管理，后续章 节将从当前传统的三维装配工艺模型出发，进一步针对产品 DT-APM 的组织结构形式、 模型表达与构建方法等方面进行展开详细阐述。
2.3 三维装配工艺模型的结构形式
2.3.1 三维装配工艺模型的定义 在产品装配工艺设计规划阶段，装配工艺模型（Assembly Process Model，APM）作
为装配工艺信息的载体，将承担着表达、记录与显示产品装配过程中各阶段装配状态的 任务。当前常见的装配工艺模型建模方法是以三维数字化装配建模技术，采用集成化的 三维装配模型表达产品装配各阶段的装配状态，并以基于模型定义（MBD）的方式更为 直观地记录和显示装配工艺信息，最后用于现场装配活动的指导。
从产品装配过程来看，从单一零件组装形成组部件再逐渐完成产品装配体的完整装 配，整个过程是一个动态变化的过程，每个装配状态都可以找到相对应的三维装配工艺 模型来表达当前装配工序/工步所需要的装配工艺信息（如装配对象的几何信息、装配资 源的属性信息、装配过程的工艺要求等）。
38

第二章 复杂产品数字孪生装配模型表达与构建技术
为更好的表达装配工艺信息，将产品装配过程中涉及的过程实体模型定义为三维装

配过程模型（Assembly Working Procedure Model，AWPM），该模型是由当前装配工序的 装配体模型和待装配零部件模型两部分组成，其共同构成产品装配过程中间状态的装配

模型。AWPM 的生成过程体现了产品装配过程的顺序性、动态演变性以及反复迭代性， 从产品装配的第一道工序开始，按照装配顺序依次组装若干个零部件，可形成当前装配

工序对应的 AWPM，并不断迭代直至产品装配完成为止。如图 2-3 所示为某框架类产品

装配体的 AWPM 实例示意图。由此可见，通过第 i 道工序的装配对象模型（Assembly

Object Model，AOM）与第 i-1 道工序的 AWPM 之间求并集，将构成第 i 道工序的 AWPM，

其数学形式化描述如下：

ni

 AWPMi  AWPMi1

AOMi k 

k 1

 n1


AOM1 k 

 k1

   ni1



AOMi1 k 

k 1



AWPM i 1

ni
 AOMi k 
k 1

（2.1）

式中：k 和 ni 分别为第 i 道装配工序下对应的当前装配工步数和总工步数；AOMi(k)为当

前工序下第 k 道装配工步组装的装配对象模型。

装配工序

当前装配工序 i

装配工序 i+1

装配工序 i+2

装配工序 i+3

装配工序 i+4

装配工序 i+5

三维 装配 过程 模型 实例

待装 配零 部件 模型
当前 装配 体模 型

装配活动描述

AOMi+1 ... ...

AOMi+2

AOMi+3

AOMi+4

AWPMi 安装纵梁组件

AWPMi+1 安装+Y侧板环

AWPMi+2 安装-Y侧板环

AWPMi+3 安装+X侧板

AWPMi+4 安装-X侧板

图 2-3 某框架类产品装配体的三维装配过程模型实例

AOMi+5
AWPMi+5 安装顶板环

由上所述，产品的装配过程是由起始基础零件开始，通过一系列 AWPM 在装配工

艺信息集（Assembly Process Information Set，APIS）的指导下完成整个产品的装配，即

每道装配工序可由当前装配工序下的 AWPM 与该装配工序对应的 APIS 两部分所构成

的装配工序间模型（Assembly In-Process Model，AIPM）来表达，因此，装配工艺模型

（APM）可由若干个装配工序间模型（AIPM）来进行定义，它们之间的关系可由下式

表示：

N

N

APM   AIPMi   AWPMi APISi 

i 1

i 1

（2.2）

式中：i 和 N 分别表示装配工序数和总工序数。
39

2.3.2 三维装配工艺模型的构成

东南大学博士学位论文

一般地，装配工艺模型涵盖装配工序级工艺模型和装配工步级工艺模型，其中，装

配工序级工艺模型又包含装配工步级工艺模型，两者的组织结构形式均相同，若无特殊

说明，下文所述的装配工艺模型指装配工序级工艺模型。图 2-4 所示为三维装配工艺模

型（APM）的组织结构示意图，其中，装配工艺信息是以三维装配过程模型（AWPM）

为表达对象，通过 MBD 技术直接将对应的装配工艺信息添加到三维实体模型上，以三

维视图快照或视频动画的呈现形式将所创建的三维装配工艺模型（APM）用于下游的现

场装配活动指导。

三维装配工序级工艺模型

三维装配工步级工艺模型

三 维 装 配 过 程 模 型
AWPM

当前的 装配体模型
CAD 待装配的 零部件模型
CAD 装配完成后的 装配体模型
CAD

装配对象模型 信息

装 配

工

装配工艺资源 信息

艺 信 息

集 装配工艺过程 合
信息
APIS

图 2-4 三维装配工艺模型的组织结构示意图

需要进一步说明的是，装配工艺信息是产品装配工艺设计的重要组成内容，也是构 成产品装配设计、工艺规划、装配/制造、信息管理等不可或缺的一部分，将决定最终的 产品装配质量和装配性能。这里提及的装配工艺信息是指在装配工艺设计阶段产品（装 配对象）在预规划装配过程中所需要的工艺数据信息集合，主要包括以下三个部分：
（1）装配对象模型信息：主要包括在产品装配过程中对应的零件模型与其随着装 配过程形成的中间目标模型（如合件、组件、构件或部件等）信息以及它们之间的相互 关系等。
（2）装配工艺资源信息：主要包括在产品装配过程中为执行并实施特定的装配活 动所涉及的装配工艺装备、工装、夹具、工具、人员等所有资源对象以及它们之间的相 互关系等。
（3）装配工艺过程信息：主要包括装配工序/工步名称与其对应的装配工序间模型、 装配任务、装配操作、装配动作等信息以及它们之间的相互关系，并可以最终形成装配 方法、装配顺序、装配路径等内容并用于生成指导现场装配活动的装配指令。

40

第二章 复杂产品数字孪生装配模型表达与构建技术
通常地，我们知道复杂产品装配工艺活动可以采用零件组装（工步级）、组部件部

装（工序级）和产品总装（工艺级）三个阶段来进行表达，故可以经由一系列零件组装、

组部件部装到整个产品总装的装配模型演变和工艺活动累积，实现最终整个产品的完整

装配。为便于围绕面向产品现场装配所涉及的人（Man）、机（Machine）、料（Material）、

法（Method）、环（Environment）、测（Measurement）的“5M1E”六方面要素信息进行

有效管理，可以将产品装配工艺模型关联的装配工艺信息通过构建装配“工艺（Process）

-工序（Procedure）-工步（Step）”三层级结构关系来组织和管理产品装配工艺信息内容。

根据产品装配工艺信息演变与装配工艺流程的嵌套关系，可以通过创建对象关联关系以

及装配工艺结构树与装配工艺流程之间的映射方法[163][293]，实现产品装配工艺层级关系、

装配工艺结构树与装配工艺流程之间的关联耦合，从而构建一种自上而下的具有多层次

嵌套结构的装配工艺层级关系模型，如图 2-5 所示。

装配工艺结构树

装配工艺层级关系

产品装配

工艺层

产品装配工艺设计

总装装配 工艺节点1

工序层

部装装配

工序节点1 ...
部装装配

关联关系 创建

工序节点j

零件组装
工步节点1 ...

工步层

装配工序1 (内容名称) … 装配工序i (内容名称) … 装配工序n (内容名称)

装配对象 模型

装配属性 信息

工序属性 信息

工序标注 信息

装配资源 信息

装配工步i1 (内容名称)

…

装配工步ij (内容名称)

…

装配工步ik (内容名称)

…

装配工步in (内容名称)

嵌套 嵌套

零件组装

工步节点k ...

零件对象 零件属性 工步活动 工步属性 工步标注 装配资源 装配精度 测量属性

模型

信息

描述

信息

信息

信息

信息

信息

...
总装装配 工艺节点i
...

流程映射 关系

A1

A2

A3

（总装活动流程）

（部装活动流程）

...

C2

嵌套 C1

C3

C4

嵌套

P2

P1

P4

...

P3

（组装活动流程）

P5 ...
...
装配工艺流程

图 2-5 具有多层次嵌套结构的产品装配工艺层级关系模型示意图

在产品装配工艺层级关系模型中，第一层为装配工艺层，表示整个产品的装配工艺 规程；第二层为装配工序层，涵盖装配工序名称及配套描述的工艺内容，包含对应的装 配工序相关信息，具体内容有装配对象模型、工序属性信息和标注信息等；第三层为装 配工步层，表明对应的装配工序中包含若干个装配工步信息，类似于装配工序层的内容， 除了包含装配工步名称及配套描述的工步内容外，还有诸如装配活动对象的零件属性信 息、装配资源信息、装配精度信息、测量属性信息等相关内容，如果装配工序中不包含 装配工步则不必描述。根据建立的产品装配工艺信息层级关系，可以层次分明地表达、 组织与管理每道装配工序/工步下所需的装配工艺信息，从而为产品装配工艺模型提供 便捷有效的工艺信息支撑。

41

东南大学博士学位论文
我们知道，常见机加工艺设计系统的工艺信息之间的结构层级关系是通过工艺结构 树和树状视图来呈现的，因此，产品装配工艺信息也可以借鉴并采用层次清晰的产品装 配工艺结构树达到产品装配工艺模型信息集成管理的目的，将产品涉及的装配工艺信息 以工艺节点的形式插入到装配工艺结构树中，装配工艺设计人员可以通过编辑装配工艺 结构树节点的方式对装配工艺信息进行添加/修改/删除等操作，装配现场执行人员可以 通过浏览或遍历装配工艺结构树节点来获取装配工艺活动过程中的工艺设计数据、装配 资源、装配精度、测量属性等关联的装配工艺信息。该装配工艺结构树是依据产品装配 过程中各项装配工艺活动之间的先后顺序以及装配工艺层级嵌套关系，将装配工艺信息、 装配工艺流程以及装配工序间模型等信息与装配工艺结构树上“工艺（Process）-工序 （Procedure）-工步（Step）”不同层次的节点进行关联，从而最终形成包含完整装配工 艺信息的树状视图，便于装配工艺数据的浏览、遍历、查询与追溯，为实现产品装配工 艺信息的层次化精细管理奠定了基础。
从产品装配过程中所涉及的装配工艺信息可知，装配工艺信息具有诸如复杂多样化、 动态变化性等特点，仅在装配工艺规划阶段通过基于理论模型的装配工艺仿真来模拟面 向装配现场的各种装配工艺活动是非常困难的，其仿真结果也与实际装配现场情况不一 致，难以满足当前复杂产品高质量/高精度/高性能装配的制造与应用需求，因此需要针 对当前的基于理论模型的 APM 进行改进，以便于更加有效地适用于复杂产品的现场装 配过程。
2.4 数字孪生装配工艺模型的结构形式
一般地，传统的产品三维数字化装配工艺设计方法大多数是采用理论模型在装配工 艺设计规划阶段进行装配顺序/路径规划、装配干涉检测等工艺仿真，以获得较优的装配 工艺参数用于指导现场装配，然而对于高质量/高精度/高性能产品装配而言，目前的装 配工艺设计方法无法完全满足现场装配过程所发生的工艺变更与调整，其主要原因就在 于基于理论模型的装配工艺仿真结果与实际现场装配状态之间存在差异所造成的，导致 上述现象发生的因素主要有两个：一方面是由于在装配工艺设计规划阶段未考虑来自零 件制造误差、装配过程定位误差和变形误差等几何量及其装配偏差传递所带来的误差累 积；另一方面是由于在装配工艺设计规划阶段并没有考虑现场装配工艺执行时所引入的 实际装配工况，从而使得产品预规划装配工艺与实做装配工艺信息之间不具有一致性。 因此，为便于表达面向现场装配的复杂产品装配工艺信息，同时突出物理装配空间与其 对应的虚拟装配空间之间的“模型-信息-数据”交互与虚实互联，本文将 DT 技术理念
42

第二章 复杂产品数字孪生装配模型表达与构建技术
与产品装配工艺设计过程相结合提出了数字孪生装配工艺模型（DT-APM），期望在基于 理论模型的装配工艺设计的基础上，通过获取现场实物装配对象、实做装配工艺以及实 际装配状态等装配实测数据信息，采用数字孪生装配对象模型替代理论模型，以及将实 做装配过程信息映射至预规划装配过程信息中用于改进装配工艺信息集（APIS），从而 构建与实际现场装配过程完全一致且相互对应的虚拟模型，以提高复杂产品的装配精准 度、一致性与装配质量。为便于后续讨论以及充分理解 DT-APM 的含义，本节对涉及到 的相关术语进行了如下说明。
术语 2-1：数字孪生装配对象模型（Digital Twin-based Assembly Object Model，DTAOM）
数字孪生装配对象模型主要是指以装配对象最小单元零件为目标创建面向产品装 配过程的具有高度还原且准确映射实物零件的数字孪生体。数字孪生装配对象模型实质 上也是一种三维实体模型，可以将数字孪生装配对象模型作为理论模型的替代模型，用 于产品装配误差分析与精度预测、装配工艺设计规划/仿真/优化等环节，以便进一步提 升产品装配建模与仿真分析的精准度和可靠度。
就产品装配过程的应用角度而言，作为产品物理装配实体的虚拟映射对象，DTAOM 无需覆盖所有维度和所有领域，只要能够反映真实装配对象（零件）的几何信息 状态以及在特定尺度下实现对应要素重建和数字化映射即可[294]。关于实物零件的 DTAOM 的加工制造误差可由新一代 GPS 标准进行零件规范或认证操作来表达，用于零件 物理实体在不同粒度下几何形状误差的模拟仿真，具体的生成方法可参见第 3 章。
术语 2-2：预规划装配过程信息（Pre-planning Assembly Process Information，PAPI） 和实做装配过程信息（As-built Assembly Process Information，AAPI）
从虚实装配空间的角度，装配工艺信息集合（APIS）不仅应包含产品装配工艺设计 规划阶段所描述的虚拟装配过程信息，而且还需涵盖产品装配工艺执行操作阶段所获取 的实做装配过程信息。因此，在本文中将产品装配工艺所处不同阶段所形成的信息数据 集合分为以下两个部分：
（1）预规划装配过程信息（PAPI），是指与产品装配过程相关的预先规划设计好的 过程信息集合，包括零部件组装成产品所需的装配顺序、装配路径以及装配过程中涉及 到的装配资源、关键装配技术要求等。需要指出的是，前述的 APM 中提及的装配工艺 信息（装配对象模型信息、装配工艺资源信息以及装配工艺过程信息）属于该范畴。
（2）实做装配过程信息（AAPI），是指按照装配工艺设计预规划信息用于现场装配 任务执行时，实际参与到产品装配活动中的所有物料/辅料、装配对象、装配资源、实测
43

东南大学博士学位论文
信息、技术状态等实例化信息集合。 结合上述内容，可以进一步归纳总结 DT-APM 的含义是指在产品数字孪生装配工
艺模型表达方法、演变机制以及构建策略的支持下，以基于 DT-AOM 构建的 AWPM 为 装配模型表达载体，采用涵盖 PAPI 和 AAPI 的 APIS 作为装配工程语义内容，动态构建 并生成可用于产品装配过程虚实双向映射的装配工艺模型，其具体的组织结构形式如图 2-6 所示。
产品数字孪生装配工艺模型（DT-APM）
数字孪生装配工序级工艺模型 数字孪生装配工步级工艺模型

三 维 装 配 过 程 模 型
AWPMDT

当前的 装配体模型
AOMDT 待装配的 零部件模型 AOMDT 装配完成后的 装配体模型 AOMDT

预规划装配 工艺信息集
(PAPI)
映射 /更新
实做装配工艺 信息集 (AAPI)

装 配 工 艺 信 息 集 合
APISDT

产品数字孪生装配工艺模型表达与构建技术

表达方法

演变机制

构建策略

图 2-6 数字孪生装配工艺模型的组织结构示意图

DT-APM 本质上也是一种信息模型，根据式（2.1）和（2.2）可以推导，该信息模型 的数学表达式可以写成如下形式：

N

N

   DT  APM 

AIPM

DT i



AWPM

DT i

APISiDT

i 1

i 1

（2.3）

   


AWPM

DT i



AWPM

DT i 1

ni

AOM

DT i

k



k 1

 

 n1


AOM

DT 1

k



   ni1

AOM

DT i 1

 k



 k 1

k 1





AWPM

DT i 1

 

APISiDT

 PAPIi



AAPI i 

ni

 AOM

DT i

k



（2.4）

k 1

式中：AWPM

DT i

表示第

i

道装配工序下面向

DT

的考虑现场装配实测数据信息的

AWPM，

其对应的待装配零件模型基础为 AOMDT，即数字孪生装配对象模型（DT-AOM）；APISiDT 表示第 i 道装配工序下面向 DT 的考虑现场装配实测数据信息的 APIS，其具体形式取决

44

第二章 复杂产品数字孪生装配模型表达与构建技术
于当前装配工艺所处阶段，且 APIS 处于动态变化中，由 PAPI 和 AAPI 相互影响共同决 定，两者之间的虚实装配过程映射更新机制可参见文献[295]；i 和 N 分别表示装配工序 序号和工序总数；k 和 ni 分别表示第 i 道装配工序下对应的装配工步序号和工步总数；
 表示或运算符。
由图 2-6 可知，数字孪生装配工艺模型（DT-APM）可以通过基于 DT-AOM 的三维 装配过程模型（AWPM）迭代和考虑现场装配实测数据信息的装配工艺信息集（APIS） 融合，共同反映产品装配工艺的演变过程，其构建过程体现了产品装配工艺设计信息与 工艺执行数据之间的频繁交互与有效整合。作为产品装配过程中虚实融合与双向映射的 桥梁和基础，DT-APM 不仅保留了当前预规划阶段下基于 MBD 的三维装配工艺设计信 息内容，还涵盖了能将 DT 技术应用于产品现场装配过程所得到的装配实测数据信息， 从而可以在虚拟装配空间实现对应的物理装配空间中涉及的全要素/全流程/全业务相关 信息与数据的虚实融合。
2.5 数字孪生装配工艺模型表达与构建方法
2.5.1 数字孪生装配工艺模型的关联耦合机制 为有效精准创建产品 DT-APM，在产品装配过程中将涉及“模型-信息-数据”三部
分内容，其中，“模型”对应为产品 DT-AOM 及以此为基础形成的 AWPM，“信息”对 应为产品 APIS，包括 PAPI 和 AAPI，“数据”则是对应为产品装配过程中获得的 AMD。 由于产品装配工艺信息是用于表达产品装配工艺活动的唯一依据，因此，产品 DT-APM 的呈现方式更侧重于产品装配工艺信息的表达，而对于产品装配模型和实测数据而言， 则是作为产品装配工艺信息的载体并贯穿于产品装配过程中。
当前，随着 MBD 技术的深层次应用，MBD 技术为全三维产品研制模式下基于 DT 的产品构型管理提供了可参考可借鉴的技术解决方案[296]，因此，基于 MBD 的产品装配 工艺信息管理方法可以作为有效实现产品 DT-APM 表达的技术手段之一。通过基于 DT 和 MBD 技术与复杂产品装配过程相结合的方式，将产品 DT-APM 在装配工艺活动中所 需的工艺信息与 AWPM 进行有机关联，充分发挥以三维模型为核心的装配工艺信息表 达及传递优势，将装配实施前、实施过程中、实施完成后的技术状态与对应的 AIPM 实 现虚实深度融合以及模型的动态迭代更新，从而能够在虚拟装配空间非常直观、准确地 表达产品装配过程中前后工序的装配活动及其装配技术状态，这不仅可以让装配工艺设 计人员高效无歧义地理解装配设计意图，以及精准实施装配工艺仿真、装配精度预测分 析等任务，而且还可以为现场装配人员便捷地获取装配工艺活动中所需的工艺内容、当
45

东南大学博士学位论文
前/下一步装配效果与装配质量等信息，从而可大大提升产品装配过程的研制效率和装 配质量。

定位基准 工装信息 设备信息
零件

尺几注 寸何释 信信信 息息息
当前的 装配体 模型

装装活 配配动 顺路描 序径述
待装配 的零件 模型

注 几尺 释 何寸 信 信信 息 息息

装配完 成后的 装配体 模型

形状公差 位置公差 装配精度

… 三维装配过程模型（AWPM） …

装配体

产品装配 工艺模型 信息管理

产品装配 工艺模型 信息视图

产品装配 工艺模型
发布

指 导

装配 实测 数据 （AMD）

装配工艺 信息集合 （APIS）

装 装 装 测 实例化

配配配量

产品现场

资对活信

装配过程

源 象 动 息 驱动

图 2-7 面向数字孪生装配 MBD 表达模型的关联耦合机制
鉴于此，本文提出了一种基于 MBD 的产品 DT-APM 表达方法，它是以 AWPM 为 装配模型表达载体，通过将 APIS 与 AWPM 进行统一封装与集成，并与对应的装配工艺 活动节点相互关联，实现由 AIPM 直观呈现并表达产品装配工艺信息，从而构建并生成 产品 DT-APM 的 MBD 表达模型（下称为“数字孪生装配 MBD 表达模型”）。基于 MBD 的产品 DT-APM 表达方法主要是采用关联对象的方法将产品的 APIS 同 AWPM 相互耦 合关联，为更加清晰准确的表达产品装配过程中的工艺内容和模型技术状态，进一步提 出了面向数字孪生装配 MBD 表达模型的关联耦合机制，其示意图如图 2-7 所示。其中， 圆圈内部表示包含当前装配体模型以及下一步待装配所需的零部件模型所形成的 AWPM；实线箭头表示在对应的模型上添加相关的装配工艺信息，可利用产品 DT-APM 信息管理机制对装配工艺模型上的 APIS 进行管理；虚线箭头表示将产品现场装配过程 实例化驱动得到的 AAPI 与预先规划得到的 PAPI 之间形成关联映射，从而可将 AAPI 添 加至 AWPM 中。面向数字孪生装配 MBD 表达模型的具体关联耦合机制可以描述如下： 将当前装配工序下准备就绪的装配体模型与当前装配状态下对应的工艺信息相关联，如 装配工装与设备资源等属性信息、几何尺寸与形位公差等标注信息；将当前装配工序对 应的待装配对象与装配活动对应的工艺信息相关联，如装配对象的装配顺序与装配路径、
46

第二章 复杂产品数字孪生装配模型表达与构建技术
装配工序名称及活动内容描述等信息；将已装配完成的装配体模型与装配完成状态下对 应的工艺信息相关联，如装配完成后经测量检验的装配精度属性信息、几何与非几何标 注信息等；在当前装配工序/工步完成后，将其作为下一道装配工序的装配体模型并不断 迭代与动态更新，直至完成产品最终装配为止。 2.5.2 数字孪生装配工艺模型的演变机制
考虑到复杂产品装配精度预测与工艺优化对模型数据准确度的实际工程需求，构建 产品 DT-APM 是实现产品数字孪生装配的基础前提，也为准确预测产品装配精度、改善 产品物理装配性能等提供支撑。
由前述可知，DT-AOM 为产品 DT-APM 建模提供了具备超写实性的装配模型载体， APIS 则为产品 DT-APM 精准建模提供了具有动态演变特性的装配工艺信息和数据基础， 从而可以通过构建产品在虚实装配过程中的“模型-信息-数据”三者之间的互联互通与 虚实融合，形成产品 DT-APM 的演变机制，如图 2-8 所示。
基于数字孪生的产品装配动态演变过程

初始 状态

PAPI1

… …
预规划装配 过程信息

PAPIi

… …
预规划装配 过程信息

PAPIn

最终 状态

CAD

产 开始装配

AIPM1

品

设

DT-AOM

计

装

配

AAPI1

现场装配

模 型

数字化组合 测量辅助

装配平台

装配
…
工序间模型
实做装配 过程信息
… …

AIPMi DT-AOM
AAPIi

装配
…
工序间模型
实做装配 过程信息
… …

PMMD1

PMMDi

PMMDn

APMD1 … APMDi … APMDn

ADMD1

ADMDi

ADMDn

装配实测数据（AMD）

AIPMn 装配完成

产 品

数

DT-AOM

字

孪

生

AAPIn

装

配

现场装配

工

数字化组合

艺 模

测量辅助

型

装配平台

模型迭代融合更新

图 2-8 产品数字孪生装配工艺模型演变机制示意图

从产品装配初始阶段，以产品设计装配 CAD 模型为起点，按照产品预先规划好的 装配工艺进程实施装配任务，借助数字化组合测量辅助装配平台获取产品物理实体对象 的装配实测数据（Assembly Measurement Data，AMD），将 PAPI 以实例化映射的方式得 到现场装配过程生成的 AAPI，进而不断修正并完善 APIS，并将其与基于 DT-AOM 的 三维装配过程模型（AWPM）进行有效集成，通过产品装配“模型-信息-数据”三者之 间的交互互联，可以实现模型迭代、融合与更新，直至完成整个产品装配并最终得到 DTAPM。需要特别指出的是，AMD 主要由零件制造实测数据（Part Manufacturing Measuring
47

东南大学博士学位论文
Data，PMMD）、装配过程实测数据（Assembly Process Measuring Data，APMD）以及装

配变形实测数据（Assembly Deformation Measuring Data，ADMD）三部分组成，其中 AMD

的表达式如式（2.5）所示，前两类数据对应零件在加工过程和装配过程中引入的加工制

造误差、装配定位及配合误差等实测值，第三类数据对应零件装配过程中由于外部载荷

因素产生的装配变形误差的实测值，以上三部分共同构成了影响产品装配精度的多维度

误差源，将 AMD 关联映射至 DT-APM，并基于装配精度预测模型可用于预测和分析物

理产品的装配误差，具体讨论将在第 5 章进行详细展开分析。

    N ni
AMD    i1 k1

PMMDnki

APMDnki

ADMDnki

  

，1  k  ni，1  i  N

（2.5）

式中：下标 ni 和上标 k 表示第 ni 道装配工序下的第 k 步装配工步；N 和 ni 分别表示产品 装配工序总数和当前工序下的装配工步总数。

产品数字孪生装配工艺模型（DT-APM）构建策略

装配工序 i 零件设计信息

物理装配空间

零件实测信息 装配工序 i

装配对象实物

三 维

零件物理信息

装配辅助资源

零件物理状态

装

制造误差信息

装配测量设备

加工制造信息

数

配 工 艺 设 计 与

… … 装配工序 j 部件设计信息
部件物理信息

驱

采

动

集

虚

虚

实 数字孪生 实

映 射

装配工艺模型

映 射

… …

字

化

组 部件实测信息 装配工序 j 合

测

部件物理状态

量

精

仿

优

辅

度

装配误差信息

真

化

装配位姿约束

助

预

… …

测

仿 真

装配工序 k 产品设计信息

软

件

产品物理信息

装配过程数据 装配工艺信息 装配工序间模型 虚拟装配空间

… …

装

配

硬 产品实测信息 装配工序 k 件

平

产品物理状态

台

平 台

装配误差信息

虚实装配过程 映射更新机制

装配位姿约束

… …

虚实互联

… …

虚拟装配空间

物理装配空间

交互与映射

图 2-9 产品数字孪生装配工艺模型构建策略框架示意图

因此，根据产品 DT-APM 的演变机制可知，为达到精准构建 DT-APM 的目的，需 要充分利用虚拟装配空间中的装配工艺服务平台（例如三维装配工艺设计与精度预测仿 真软件平台），并借助物理装配空间中的专业测量设备（例如数字化组合辅助装配硬件 平台）对现场实物装配过程的实际测量信息和装配状态信息进行实时感知、数据采集与 获取，针对多源异构装配数据需要在预处理与提取规则的基础上进行数据清洗/识别/分 类/合并等数据分析处理操作，在虚实装配过程映射更新机制的支持下，进一步实现物理 装配空间获得的多源异构装配数据与虚拟装配空间生成的装配工序间模型以及装配工

48

第二章 复杂产品数字孪生装配模型表达与构建技术
艺信息之间形成有效集成和虚实融合，从而完成 DT-APM 的构建，上述整个过程可以汇 总得到 DT-APM 的构建策略，如图 2-9 所示。考虑到高质量/高精度/高性能产品装配过 程的复杂性以及具备的多物理、多学科、多层次等领域特性，在构建 DT-APM 过程中， 只要包含装配工艺规划阶段和现场实物装配阶段所涉及到的信息即可，无需涵盖所有维 度和所有领域。
以本文讨论的复杂产品装配精度预测为例，重点关注实体产品的几何特性（如尺寸、 形状、公差等），通过产品装配过程所呈现出来的几何尺寸精度来评估产品装配的质量 优劣。对于产品装配过程某道工序而言，根据事先规划好的装配工艺信息获得当前装配 工序下基于理想模型的装配工序间模型，在现场实物装配阶段采用虚实映射的数字化表 征手段获取基于关键装配特征的 AMD，经由数据处理后生成对应装配工序下的待装配 零件的 DT-AOM（具体内容详见第 3 至第 5 章），通过理论-实际模型的数据融合/关联/ 同步后实现当前装配工序下虚实映射的 DT-APM 构建，具体实现流程如图 2-10 所示。
装配过程第i道工序

装配工艺

预规划

规划 装配过程信息

实做

现场实物

装配过程信息 装配

理想模型 当前装配工序的 装配工序间模型
基于关键装配特征的 实物零部件装配实测数据

• 零件制造数据 • 装配过程数据 • 装配变形数据

数据 采集与获取

数据 预处理

数据 分析与挖掘

数字孪生装配对象模型

理论 - 实际 模型虚实映射

• 数据融合 • 数据关联 • 数据同步

生成当前装配工序的 数字孪生装配工艺模型
（DT-APMi）
图 2-10 产品数字孪生装配工艺模型构建实现流程图

综上所述，从产品 DT-APM 建模机制、构建策略以及实现流程中可以看出，以 DTAOM 为模型基础形成的 AWPM 是产品 DT-APM 构建的表达载体，囊括 PAPI 和 AAPI 的 AIPS 是产品 DT-APM 构建的信息核心，而 AMD 则是产品 DT-APM 构建的数据源 泉，三者共同围绕产品 DT-APM 建模展开，为后续基于 DT 的复杂产品装配仿真/分析/ 预测/反馈/优化的顺利实施奠定了“模型-信息-数据”基础。
49

2.6 应用分析

东南大学博士学位论文

为分析本章提出的适用于现场装配的复杂产品 DT-APM 构建与表达方法的合理性 与可行性，以图 2-11 所示的某型双级齿轮减速器装配模型为例，验证了该产品装配过程 中所涉及的 DT-APM 构建、信息表达、组织及管理方法。

P6

P7

P8

P5

P34 P35 P36P37

P4

P31 P32

P33

P9

A3

P10

P24 P25

P26 P27

P3

P21 P22

A3

A2

P23

P13

A2

P14 P15

A1

A4

P11 P12

A1

P2

P11 图例：

P1-放油螺塞; P2-箱体座; P3-定位销×2; P4-凸台螺栓×8;

P5-视孔盖; P6-通气螺塞; P7-视孔盖固定螺钉×8; P8-箱体盖;

P9-箱体盖固定螺钉×4; P10-启盖螺钉×2; P11-油标.

A1-高速轴总成; P11-高速轴承A; P12/P14-高速轴挡油环; P13-

高速轴; P15-高速轴承B. A2-中速轴总成; P21-中速轴承A;

P1

P22/P26-中速轴挡油环; P23-中速轴; P24-中速斜齿轮; P25-键A; P27-中速轴承B. A3-低速轴总成; P31-低速轴承A; P32/P36-低速

轴挡油环; P33-低速轴; P34-键B; P35-低速直齿轮; P37-低速轴

承B. A4-高/中/低速轴端盖组合体×2(含轴承端盖×2/固定螺

钉×8/垫片×2).

图 2-11 某型双级齿轮减速器结构及装配爆炸图

上述产品装配工艺设计任务完成后所形成的装配工艺信息结构层级嵌套关系如图 2-12(b)所示，左侧为装配工艺信息的结构层级对照关系，右侧为装配工艺结构树，其中， 每一道装配工序/工步节点均为对应的装配工序/工步的名称和内容，且关联与之相对应 的装配对象模型（包括零件模型和装配工序间模型），其子节点都关联不同的装配工艺 信息数据。以装配工序 5-箱体盖及定位销组装为例进行详细描述如下：该装配工序为装 配工艺信息的第二层级；该装配工序包含两个装配工步，其对应的名称和内容（即装配 工步 5.1-箱体盖安装和装配工步 5.2-定位销×2 安装）作为装配工艺信息的第三层级； 各装配工步节点下包括装配对象模型信息、工艺属性信息、工艺标注信息等。通过选择 装配工艺结构树节点能够获取相对应的装配工艺信息，当点选装配工步 5.1-箱体盖节点 时，系统界面可以显示该工步所对应的 AWPM 模型以及具体的装配工艺信息表达形式 （如图 2-12(c)所示），其中，针对装配零部件模型的拆装运动与标注信息的显示/隐藏等 操作，可以根据产品装配流程设置关键时间帧以及关联对应的装配工序/工步节点来控

50

第二章 复杂产品数字孪生装配模型表达与构建技术
制，而针对具体的标注信息的基本操作与管理，则可以通过标注信息管理器来实现控制 （如添加、删除、隐藏/显示等）。

第一层级： 装配工艺层

当前待装配 的零件模型

标注信息 管理

第二层级： 装配工序层

第三层级： 装配工步层

前道工序完成的 装配体模型
实测尺寸值

(a)系统实施界面及装配模型

(b)装配工艺结构树 (c)装配工序 5 创建的装配过程模型

(装配工艺管理器)

及对应的工艺信息

图 2-12 产品数字孪生装配工艺模型表达与信息管理的实例界面图例

需要指出的是，为便于面向现场装配的产品装配操作引导，系统预留了产品装配对 象模型的现场实测数据测量接口，当前只是通过人机交互形式进行手工输入，而在数字 化组合测量辅助装配平台下可采用数字化测量设备和人机交互相结合的方式对关键零 件以及装配关键特性区域进行组合式测量，获取关键零件与装配关键特性区域的实测值， 并通过尺寸标注、三维点云数据渲染等方式与装配对象模型相互关联与耦合，以便显示 零件实测几何尺寸以及装配偏差等信息，从而实现产品虚实装配过程的实时交互与映射 关联，可为复杂产品装配精度预测、装配过程状态控制与性能保障等奠定前提基础。
2.7 本章小结
本章首先借助面向装配的产品数字孪生模型参考架构，完成了适用于现场装配的复 杂产品数字孪生装配模型总体框架的构建；其次，在三维装配工艺模型的基础上，研究 了数字孪生装配工艺模型的结构形式；然后，提出了基于 MBD 的产品数字孪生装配工 艺模型表达方法以及关联耦合机制，在此基础上，根据基于数字孪生的产品装配动态演 变过程，明确了产品数字孪生装配工艺模型的演变机制与构建策略；最后以某型双级齿 轮减速器装配为例对数字孪生装配工艺模型表达与构建方法进行了应用分析和验证。本 章内容为后续产品数字孪生工艺模型中对应的数字孪生装配对象模型生成、基于数字孪 生的产品装配精度预测奠定了“模型-信息-数据”基础。

51

东南大学博士学位论文 52

第三章 面向数字孪生的零件非理想表面模型建模技术
第三章 面向数字孪生的零件非理想表面模型建模技术
3.1 引言
我 们 知 道 ， 传 统 的 产 品 数 字 化 建 模 方 法 主 要 是 通 过 边 界 表 示 法 （ Boundary Representation，B-Rep）、构造实体法（Constructive Solid Geometry，CSG）以及两者混 合模式等方法来创建基于理想几何的实体模型，其几何偏差一般采用语言和非几何数据 等标注形式进行管理，无法将实际几何误差以及加工制造缺陷以数字化定义的方式集成 于理想 CAD 模型中。更进一步地，当在产品数字化装配建模中考虑了来自零件制造和 测量过程引入的真实几何误差时，又将导致产品理想装配特征的约束关系发生变化，同 时还将影响后续零件装配位姿、物理属性加载后零件变形等装配状态。因此，当前传统 产品设计阶段所创建的理想 CAD 模型由于忽略了零件的真实几何误差，导致其无法与 PLM 中的零件制造、装配、检验等环节的模型保持一致性，迫使基于理想 CAD 模型的 虚拟装配模拟仿真无法真实反映物理装配过程的现象，其装配仿真结果也与实际装配情 况存在较大的差异。
针对上述理想 CAD 模型在产品装配建模与仿真应用中存在的问题，为了进一步提 高产品装配建模精细化程度以及装配仿真的准确性，本章以产品零件模型为研究对象， 融入新一代 GPS 标准与 DT 思想，提出了一种面向 DT 的产品零件表面模型表达、重构 与生成的一体化建模方法，用于生成与物理实体零件相互映射的数字孪生装配对象模型 （DT-AOM），即零件数字孪生模型（Part Digital Twin Model，PDTM），从而为后续创建 物理真实产品的 DT-AM 乃至在此基础上进一步分析装配误差与预测装配精度等提供模 型基础。
3.2 新一代 GPS 标准与数字孪生
新一代 GPS 标准体系是以参数化和计量数学为基础思想，借助产品几何要素的定 义将公差设计的规范过程与制造误差评定的认证/检验过程相互对应，将产品零件的设 计规范、加工制造与认证检验过程由统一数学模型和规范数学符号进行表达，建立了具 有一致性的几何表达模型（即表面模型），通过不确定度与对偶性关系将规范与认证集 成于一体，实现产品零件在设计、制造与检验各阶段的统一。
根据当前学术界对于 DT 的定义可知，DT 是以数字化方式创建物理实体的虚拟实 体，可借助历史或实时数据以及算法模型等方式，全要素重建及数字化映射潜在生产或 实际制造的产品，并作为集成多物理、多维度、超写实、动态演化于一体的产品虚拟仿 真模型，可用于模拟、监控、诊断、预测、控制产品物理实体在真实环境中的形成过程、
53

东南大学博士学位论文
状态、行为和性能[96]。因此从根本上讲，DT 可作为管理产品零件全生命周期过程的一 种技术手段，并结合新一代 GPS 标准的基本理论框架体系与 PLM 理念实现无缝衔接， 进而可为 PDTM 的表达与生成提供一个共同语言交流平台，如图 3-1 所示。

设计 零件 人员 功能要求

零件数字 孪生模型

新一代GPS交流平台 比较反馈

规范 （设计）

实际工件

生产人员

计量人员

加工制造

提取数据 信息

测量值

图 3-1 零件数字孪生模型与新一代 GPS 标准体系交流平台

结合 DT 的定义可以看出，PDTM 在新一代 GPS 标准体系下具有以下四个方面的 典型特征[131]（如图 3-2 所示）：

• 能够提供不同尺度的表 达(从精密到大尺寸系 统的复杂产品)
新一代 GPS标准
• 能够扩展集成、增 加或替换产品模型

新一代 GPS标准
零件数字 孪生模型

• 能够在不同模型表达 之间进行转换、组合、 构建等价体等互操作
新一代 GPS标准
• 能够逼真地描述物 理产品实体

新一代 GPS标准
图 3-2 新一代 GPS 标准体系下零件数字孪生模型的典型特征
（1）可伸缩性（Scalability）。PDTM 能够提供不同尺度（从微观原子级到宏观几何 级、从精密到大尺寸系统等）的表达，并通过一种计算机可识别和处理的方式管理模型 以对随时间域变化的物理实体进行表征。
（2）互操作性（Interoperability）。DT 中的物理空间和虚拟空间能够实现双向映射、 动态交互和实时连接，因此 PDTM 具备以多样的虚拟模型映射物理实体的能力，能够实
54

第三章 面向数字孪生的零件非理想表面模型建模技术
现在不同模型表达之间进行转换、组合、构建等价体等互操作。 （3）可扩展性（Expansibility）。具备集成、增加或替换零件虚拟模型的能力，能够
针对具有多尺度、多物理、多层级的 PDTM 实现内容扩展。 （4）保真性（Fidelity）。PDTM 的保真性主要体现在表示零件数字虚体模型与物理
实体的接近程度，要求数字虚体模型能够逼真地描述物理零件实体，不仅要在几何结构 上保持高度一致性，同时在其状态、行为和性能上也要逼真。值得注意的是，在零件不 同的应用场景下，同一 PDTM（数字虚体）的仿真程度可能存在差异，例如在关注装配 工况场景中只要求描述零件数字虚体的几何尺寸形状及材料物理属性即可，并不需要关 注化学结构、裂纹损伤演化等细节。
图 3-3 为新一代 GPS 标准体系下的零件物理实体与数字虚体之间的操作，以突出新 一代 GPS 标准与 DT 之间的关系描述。因此，根据新一代 GPS 标准链的综合模型，运 用 DT 技术能够将零件功能描述、规范设计、生产制造和认证检验等各阶段有机结合并 贯穿在一起，可为零件设计、生产制造和计量检验人员提供基于 DT 的统一信息传递基 础模型，后文将进一步针对该模型展开面向 DT 的零件非理想表面模型表达与生成方法 研究。
观测(Observation)

物理实体

设 计
孪生化

数字虚体

新一代

新一代

GPS标准

GPS标准

- 要素操作

- 要素操作

• 实体分离 • 实体提取 • 滤波

制 造

• 分离 • 提取 • 滤波

• 拟合

装

• 拟合

• 集成

配

• 集成

• 构造 - 评估操作

• 构造

检

- 评估操作

测

预测(Prediction)

图 3-3 新一代 GPS 标准体系下的物理实体与数字虚体之间的操作

3.3 面向数字孪生的零件表面模型表达机制
从 PDTM 的定义概念和技术内涵出发，可以发现 PDTM 具备诸多模型特性，如虚 拟性、多物理性、多尺度性、超写实性、概率性等，可实现在虚拟空间不同尺度下对零 件物理实体以及实际工作状态进行全要素重建和数字化映射[297]。因此，从基于新一代 GPS 的产品设计规范、加工制造和检验认证过程可以看出，PDTM 是具有动态演变特性
55

的。

东南大学博士学位论文

动态演变特性是指产品零件随着演变过程其模型信息表达所具有的动态变化特性。

例如在产品设计规范阶段，PDTM 是对理想几何要素的尺寸、形状和位置的设计规范，

并给出符合功能要求的设计公差以及其他关联属性信息，该模型目前可通过基于 MBD

技术构建一个全三维标注的理想产品零件模型；在产品加工制造阶段，由于考虑到零件

制造过程存在误差，零件模型的形状是失真的，表面是粗糙的，尺寸形状也是有偏差的，

该阶段的 PDTM 表达是非理想的；而在产品检验认证阶段，为获取非理想零件表面的实

际几何要素，需通过必要的检测和拟合等操作形成可替代实际零件的虚拟模型，从而与

设计规范阶段的要素特征值进行对比认证，确定实际零件是否合格。

理想的
公称表面模型 NSM

面向数字孪生的零件表面模型演变过程
想象的 规范表面模型
SSM

测量的
认证表面模型 VSM

公称要素NFi

规范要素SFj

认证要素VFk

点Pi

线Li

面Fi

点Pj

线Lj

面Fj

组成 要素

导出 要素

组成 拟合 导出 要素 要素 要素

分离

提取

操作集

滤波

拟合

点Pk

线Lk

面Fk

组成 提取 拟合 导出 要素 要素 要素 要素

集成

构建

图 3-4 不同阶段下面向数字孪生的零件表面模型信息组成要素
如图 3-4 所示，面向 DT 的零件表面模型是随着零件演变过程的变化而不断迭代更 新其表面模型所得到的，因此其参考表达模型实质上可看作是一种包含真实表面几何形 状的三维实体模型。面向 DT 的零件表面模型（Digital Twin-oriented Part Surface Model， DT-PSM）可分别由公称表面模型（Nominal Surface Model，NSM）、规范表面模型 （Specification Surface Model，SSM）和认证表面模型（Verification Surface Model，VSM） 来表示，将 DT-PSM 的表达形式可写成：
56

第三章 面向数字孪生的零件非理想表面模型建模技术

  

n

n

 NSM t1  f ( NFi )  f ( Pi



i 1

i 1

  

n

n

DT  PSMt  SSM t2  g( SFj )  g( Pj



j 1

j 1



n

n

  VSM


t3



h( VFk )
k 1



h(
k 1

Pk

n
 Li
i 1
n
Lj
j 1
n
 Lk
k 1

n
 Fi )
i 1
n
 Fj )
j 1
n
 Fk )
k 1

（3.1）

式中：DT-PSMt 表示第 t 个阶段下 DT-PSM 表达的信息集合，当 t=1,2,3 时分别表示理想

的 NSM、想象的 SSM 以及测量获得的 VSM 的信息集合；NSM 表示第 i 个零件对应的公

称要素 NFi 由操作算子 f 决定的信息集合；SSM 表示第 j 个零件对应的规范要素 SFj 由

操作算子 g 决定的信息集合；NSM 表示第 k 个零件对应的认证要素 VFk 由操作算子 h 决

定的信息集合；P、L、F 分别表示各几何要素中点、线、面的信息集合。

由此可见，DT-PSM 最终可通过不同阶段的组成要素、导出要素、拟合要素以及提

取要素来表达，利用操作算子从产品设计阶段、规范阶段和认证阶段的表面模型中对几

何要素进行分析与一致性比较，从而确定实际零件是否达到设计规范要求，并将检验认

证后的表面模型作为实际物理零件的替代模型，它实质上就是 PDTM 的一种几何镜像 参考。显而易见，该参考表达模型也是一种虚拟模型，与实际物理零件之间形成虚实映

射，拟实度较高，能够准确反映物理零件的真实几何状态，并可替代实际物理零件用于

产品功能和物理性能测试过程中的高保真度集成模拟、仿真和验证工作。

从新一代 GPS 的产品“功能描述—规范设计—加工制造—检验认证”标准链一致 性表达的角度，本章将在 DT-PSM 表达机制的基础上，研究零件非理想表面模型的映射 生成方法（如图 3-5 所示），并提出了两种生成零件非理想表面模型的具体方法和创建流 程。由于新一代 GPS 标准体系中设计规范操作过程与检验认证操作过程具有对偶性关 系，为方便描述，本章将设计规范操作过程生成非理想表面模型的方法称为规范生成方

法，检验认证操作过程生成非理想表面模型的方法称为认证生成方法。

上游 产品设计

设计规范 操作过程
功能描述 NSM
零件数字 孪生模型

新一代GPS标准
规范设计 SSM
映射
零件非理想 表面模型
映射
检验认证 VSM

加工制造
检验认证 操作过程

图 3-5 零件数字孪生模型的映射生成方法示意图

下游 产品运维

57

东南大学博士学位论文
3.4 基于肤面形状模型的零件非理想表面模型建模
3.4.1 肤面形状模型定义 根据新一代 GPS 标准体系中的基本术语与相关概念[298][299]可知，肤面模型（Skin
Model，SM）主要是作为实际产品与其外部物理环境分界的几何表面模型。SM 作为产 品设计构想出来的符合公差规范要求的非理想表面模型，是由无限个数据点构成的连续 表面，可作为连接产品公称表面模型与实际工件真实表面模型之间的桥梁。然而，SM 所 具有的无限点集特性却难以通过计算机仿真进行几何偏差描述，由此 Nabil 等人[300]进一 步提出了肤面形状模型（Skin Model Shape，SMS）的概念，将其作为由 SM 衍生出来的 具有有限个离散数据点集构成的表面模型，以便采用有限参数来定义零件表面模型的几 何形状、方向、位置和尺寸，如图 3-6 所示，当前已有文献研究表明采用 SMS 在产品公 差分析与综合[277]、装配精度预测[301]等方面有着非常重要的作用。

抽象

公称表面模型

肤面模型

实际 物理工件

从有限 到无限

从实际 到抽象

表示
设计规范 操作过程

检验认证 操作过程

Skin Model Shape 图 3-6 产品公称表面模型、肤面模型、肤面模型形状及实际工件的表达示意图[300]
相比于实际物理工件而言，SMS 作为不包含材料和工艺等非几何信息属性的表达 模型，能够根据新一代 GPS 标准体系在产品“功能描述、规范设计、认证/检验评定” 不同阶段的几何公差规范要求下，对实际零件形状和几何偏差进行计算机模拟仿真，从 而实现零件几何偏差在不同维度下（例如位置方向误差、形状误差、波纹度、粗糙度等） 的变动范围估计。 3.4.2 肤面形状模型生成方法
在新一代 GPS 标准体系框架下，SMS 生成的具体实现流程可总结为如图 3-7 所示， 首先根据新一代 GPS 标准选定 SMS 建模流程，在设计阶段下选择设计规范操作过程对 应产品设计定义的 CAD 模型，而在实测阶段下则选择检验认证操作过程对应产品加工 制造的实际工件模型；然后分别对应具体的模型对象单独进行规范生成方法或认证生成 方法的操作处理；最后将上述得到的具备不同维度下几何偏差项的离散点集叠加至原始
58

第三章 面向数字孪生的零件非理想表面模型建模技术
公称表面模型上即可生成 SMS。

设计规范 操作过程

新一代GPS标准体系框架
选定肤面形状 模型建模流程

检验认证 操作过程

产品设计定义模型 (CAD+MBD)

产品实际工件模型 (加工制造)

提取/识别 GD&T信息

测量数据 采样策略

CAD模型处理

点云数据处理

• 离散化 • 分割 • 网格细化

• 降噪 • 过滤 • 对齐等

常见建议 仿真方法

小波分析理论

几何误差仿真分析 (系统误差+随机误差)

表面形貌仿真分析 (数据分解、重构与表征)

按误差来源 划分叠加

肤面形状模型生成

按误差成分频带 划分叠加

图 3-7 肤面形状模型生成的实现流程

其中，针对产品设计规范操作过程，可以根据产品零件不同位置/区域的重要性贡献 程度，将零件几何公差规范定义在不同的精度层级，并结合产品零件不同的应用场景和 使用需求，在不同几何偏差表达粒度下选择常见的建议仿真方法，以实现面向多尺度 （Multi-scale）或跨尺度（Cross-scale）下零件非理想表面模型的构建，如图 3-8 所示。 根据不同的零件几何偏差，常见的建议仿真方法有随机噪声法、网格变形法、基于模态 的方法（包括谱方法和基函数法）等，具体描述的仿真方法可参考文献[202][302]。

公称表面模型 （理想CAD模型） 低维数据

几何偏差表达粒度

肤面形状模型 高维数据 （非理想表面模型）

位置方向误差

形状误差

波纹度

粗糙度

小位移旋量法 二阶形状网格变形法

随机噪声法 （1D/3D高斯法）

随机形状网格变形法 | 谱方法（主成分分析/固有振动模态分析/随机场分析法）

基函数法 （离散余弦变换法/泽尼克多项式法/勒让德-傅里叶多项式法等）
常见的建议仿真方法
图 3-8 产品设计规范操作过程零件非理想表面模型建模的常见建议仿真方法

3.4.2.1 规范生成方法
59

东南大学博士学位论文
规范生成方法主要是指从产品零件的功能描述出发，考虑产品零件的功能要求、加 工制造工艺以及实际工况等综合影响因素，借助各种理论方法（如主成分分析、统计形 状分析、随机场理论等）和仿真手段（如蒙特卡洛仿真、有限元仿真等）对产品零件 CAD 模型的几何要素/特征的极限位置进行模拟、仿真与表征，由得到的模拟离散点集叠加生 成非理想表面模型，并以此模型来作为规范肤面形状模型的基础。
对于 CAD 模型而言，规范生成 SMS 的方法具体操作过程如下：通过提取并识别 GD&T 信息对其进行离散化操作获得关键表面特征的离散点集，再采用网格生成算法生 成网格模型，并适时进行网格细分以避免粗大、不均的网格，随后通过特征分割对每个 独立的关键特征表面进行几何偏差仿真分析，并按照几何误差源（包括系统误差与随机 误差）进行误差项叠加至原始公称表面模型对应的离散点集上，从而实现零件 CAD 模 型的非理想表面模型生成，并与零件设计规范的几何要素进行对比，分析模拟仿真生成 的表面轮廓是否满足零件几何公差设计规范要求，若满足要求则可用于表征规范肤面形 状模型，上述过程的具体实现流程如图 3-9 所示。

开始
产品公称设计模型 （CAD）
离散化 获得离散表面模型
采用网格生成算法 生成网格模型
• 网格特征分割 • 网格区域细分
综合设计公差规范 进行误差仿真

误差来源类型

系统误差 建模方法

随机误差 建模方法

两者叠加 获得新点的坐标值

是否满足零件

否

公差设计规范要求

是

生成非理想表面模型 （规范肤面形状模型）

结束

图 3-9 规范操作过程生成肤面形状模型的流程图

为了便于对每个独立几何特征单独进行误差仿真，前期需要对产品零件名义 CAD 模型运用一定的曲面细分算法以及网格生成（如特征分割和区域细分）算法对其进行离 散化、网格生成/细分与特征分割等操作，如图 3-10 所示，为后续计算机仿真生成产品 零件几何误差提供基础。其中，针对 CAD 实体模型的几何表面离散化处理，当前一般 采用最常见的三角网格数据结构来描述，通常运用 CAD 软件内置的细分算法生成离散
60

第三章 面向数字孪生的零件非理想表面模型建模技术
化网格来表达实体模型离散表面；模型几何特征分割用于拆散原始 CAD 模型的几何形 状和拓扑结构，通过网格分割算法将相似的网格面片划分为不同的特征区域；而网格细 分操作则是对可能存在的细长或稀疏的原始网格区域采用合适的细分算法（例如逼近或 插值等）不断细化出新的网格，网格越细分，将越接近原始表面，但网格样本数量越大 也将导致后续计算量变得更加复杂。

CAD模型

离散模型

特征分割

网格模型

网格细化

图 3-10 CAD 模型离散化处理、特征分割以及网格细化操作
我们知道，传统的公称表面模型通过设计公差规范只能获取具有理想几何表面的 CAD 模型，缺乏对产品几何变化控制的描述与表征。由于在加工制造过程中会使产品几 何形状产生误差，且在检测过程中引入测量不确定度，产品零件也会发生几何形状变化 [303]。根据前人的研究成果[304]可知，产品实际表面相对于公称表面的几何变化是由随机 误差和系统误差引起的，其中，由随机误差引起的产品偏差服从高斯（正态）分布，而 对于系统误差，由于通常伴随具有重复性的可识别特征信号出现，因此能够通过计算或 目标形状仿真来获取。下面具体针对两种几何误差建模仿真方法分别进行阐述。
（1）随机误差建模仿真 随机误差具有统计性、随机性以及抵偿性的特性，其来源受到诸多因素的影响，如 数据缺失、检测数据误差、模型设定误差等。目前随机误差建模仿真技术主要可分为物 理方法和计算方法，其中物理方法是基于原子物理现象的随机不可预测性生成随机数， 而计算方法则是通过计算算法获取计算随机数，并产生随机结果。假设随机偏差服从高 斯分布，可将随机误差建模仿真的计算方法粗略统计划分为一维/多维高斯[305]、随机场 法[306]、马尔科夫蒙特卡洛法（Markov Chain Monte Carlo，MCMC）[307]、蒙特卡洛抽样 [308]、拉丁超立方体抽样[309]等。由于高斯法的仿真结果会受到初始采样点的影响，从而 导致结果形状失真，综合对比后这里采用基于 MCMC 的吉布斯（Gibbs）统计仿真法[310] 来获取随机误差，其具体执行过程可总结如下：
在 Gibbs 采样中，需要一个参数矢量Ψ 和一个可以获得收敛分布的带有观测数据 B
的多余参量 Λ 。假设 Ψ1(0),Ψ2(0), ,Ψd (0) 是 Rd 内的初始随机变量，并注意到Ψ j |Ψ j
61

东南大学博士学位论文
的条件密度函数是 f (Ψ j |Ψ j ) ，则从中选出 Gibbs 采样的候选点。令初值为 t =0，则初

始矢量值为Ψ 0 。当 t ( t =1,2,…,T )增加时，Ψ t 服从密度函数 f (Ψ j |Ψ j ) ，此时产生

的新点代替旧点并执行迭代计算直至收敛到目标值为止。基于 MCMC 的 Gibbs 采样算

法对应的流程描述如下：

1.

令 ψ1  Ψ1 t 1 ，t =1,2,…,T；

2.

j [1,d]，j

=1,2,…,d。利用

f

(Ψ j

|Ψ j)

获取候选点Ψ

* j

(t

)

，则有

ψ

j



Ψ

* j

(t

)

，由此

可更新 ψ j 值。在采样过程中，每个矢量的变化情况如下：

1) ψ1(t) ~ f (ψ1 | ψ2(t 1), ,ψd (t 1), Λ(t 1), B) ；

2) ψ2(t) ~ f (ψ2 | ψ1(t),ψ3(t 1), ,ψd (t 1), Λ(t 1), B) ；

3) … …

4) ψd (t) ~ f (ψd | ψ1(t), ,ψd1(t), Λ(t 1), B) ；

5) 以此类推， Λ(t) ~ f ( Λ | ψ1(t), ,ψd (t), B) ；

3.

  令 ψ(t)  ψ1*(t), ,ψd* (t) ，并逐渐增加 t 值。利用矢量 ψ(0),ψ(1), ,ψ(t) 来表达

一个马尔科夫链的实现过程，其中下式定义了 ψ( ) 到 ψ 的转移概率。

F ψ( ),ψ  f ψ1 | ψ2( ), ,ψd ( ), Λ( ), B  f ψ2 | ψ1,ψ3( ), ,ψd ( ), Λ( ), B 

 f ψd | ψ1, ,ψd1, Λ( ), B

ψ1(i), ,ψd (i), Λ(i) 的联合分布收敛于 f ψ1, ,ψd , Λ | B ，其中 i   。

（2）系统误差建模仿真 系统误差具有确定性、可预测性和重复性的特性，其来源于产品零件加工制造过程 中所产生的误差，例如夹具定位、机床动态特性等引起的误差。通常，系统误差信息可 通过计算或仿真进行识别，经由合理定义基本形状特征来实现具有系统误差的非理想表 面模型的模拟。根据如图 3-8 所示的常见建议仿真方法可知，基于模态的基函数法能够 几乎覆盖所有类型的几何形状误差重构，因此本节针对不同类型的曲面特征选用基于模 态的基函数法对其进行系统误差建模描述，并进一步依据不同基函数类型对应不同类型 的曲面特征以实现系统误差建模重构，具体对应关系分别为离散余弦变换法（Discrete Cosine Transformation，DCT）对应矩形平面特征、泽尼克（Zernike）多项式法对应圆形 平面特征以及勒让德-傅里叶（Legendre-Fourier）多项式法对应圆柱面特征。下面分别对 上述三种方法实现系统误差建模仿真进行阐述。  离散余弦变换法（DCT） DCT 可以用于实现真实几何形状特征的系统误差表达，从几何线特征到三维平面 特征均有较好的模型误差重构特性，它主要是采用以离散余弦变换的核函数作为基函数 来模拟几何形状特征的系统误差，其中，由核函数集构成的一组正交向量集合可用作零
62

第三章 面向数字孪生的零件非理想表面模型建模技术
件平面特征几何形状误差模型的基函数，因此 DCT 基函数的线性组合可以用于重构零

件平面特征的形状误差[311]。

以矩形平面特征为例，假设在直角坐标系 x 轴和 y 轴方向上采样点数量分别为 M 和

N，即矩形平面特征上的系统误差变动场 δ(·)为 M×N 矩阵，则基于 DCT 仿真拟合的矩

形平面特征轮廓的基函数 g(m, n, u, v)可表示为如下形式：

g(m, n,u, v)  

2 C(u)C(v) cos (2m  1)u cos (2n 1)v

M N

2M

2N

 C  

(u)



1  2 1

u0 ,
u0

C(v)



 

1 2

1

v0 v0

（3.2）

式中：m、n、u 和 v 用于表示与矩形平面特征模型采样相关的变量，其中，m 和 n 分别

为在 x 轴和 y 轴方向上的采样点编号，共同决定了矩形平面特征上离散采样点的坐标位

置，而 u 和 v 分别为 x 轴和 y 轴方向上的采样频率，且 m, u=0, 1, …, M-1，n, v=0, 1, …,

N-1。

表 3.1 矩形平面特征基函数形状轮廓误差建模重构

基函数

形状

0

v

1

2

3

…

0

…

1

…

u

2

…

3

…

很显然，当离散采样点 M×N 较大时，DCT 计算量将特别巨大，由于随着基函数阶 数的增加对实际矩形平面特征几何形状影响越来越小，因此需采用截断阶数的基函数形 状之和来描述真实几何形状特征的系统误差，可以采用较低阶三角基函数线性叠加的方 式拟合出真实矩形平面特征轮廓。以离散采样点数为 16×21 的矩形平面特征为例，共 有 336 个基函数，为节省篇幅，这里仅罗列前 16 个基函数形状的展示，见表 3.1 所示， 其中，第 p 行第 q 列基函数形状轮廓对应的基函数为 g(m, n, p-1, q-1)。由式（3.2）可知
63

东南大学博士学位论文
取前 i×j 阶基函数形状表征矩形平面特征系统误差的表达式如下：

i1 j1
F1 u,v    g(m,n,u,v) f1(m, n)
m0 n0

  

2 M

N

i1 j1
C(u)C(v)
m0 n0

f1



m,

n



cos

(2m  1)u 2M

cos (2n 1)v 2 N

（3.3）

式中： i 0, M 1 ， j 0, N 1 ；f1(m, n)表示对应离散采样点在 z 轴方向上的误差变

动大小。

 泽尼克（Zernike）多项式法

Zernike 多项式法常用于对具有圆形孔径的光学元件加工表面进行面形误差的拟合

操作，采用互为正交、线性无关且完备的基函数线性组合叠加可以唯一描述圆形孔径表

面的系统误差，并通过数值模拟和实验证实了 Zernike 多项式法的正确性和有效性[312][313]，

因此，Zernike 基函数的线性组合亦可用于重构零件圆形平面特征的形状误差。

以圆形平面特征为例，在极坐标系(ρ, θ)下，Zernike 多项式可写成径向多项式 Rnm( )

和角向多项式 Θm ( ) 的乘积，具体表达式形式[313]如下：

Znm(, )  Rnm()Θm( )

其中，径向多项式函数 Rnm( ) 可表示为：

 Rnm ( )



(nm) s0

2

s!

n

(1)s (n  s)!

 2

m



s

!

n

 2

m



s

!





(n2s)

（3.4） （3.5）

角向多项式函数 Θm( ) 可表示为：

Θm (

)



N

m n

exp(im

)



NNnm nmcossin(m(m) )

m0 m0

m  even m odd

（3.6）

式中：(ρ, θ)为单位圆域内的极坐标，ρ 为极半径（  [0,1] ），θ 为方位角（ [0,2 ) ）；

N

m n

为归一化标准因子，当

m=0

时，

Nnm



n

1

，当

m≠0

时，

N

m n



2(n 1) ；m 和 n

分别为 Zernike 多项式的角向级次（角频率）和径向级次（阶数），m 可以为任意正/负的

整数，其值恒与 n 同奇偶性，且|m|≤n。

为避免混淆，Zernike 多项式可采用统一的标准模数 j 进行编号，其中计算阶数 n、

角频率 m 以及序号 j 之间存在如下关系式： j  n(n  2)  m 。这里为节省篇幅，仅罗列 2

64

第三章 面向数字孪生的零件非理想表面模型建模技术
了前 3 阶的 Zernike 多项式极坐标形式，见表 3.2 所示，其具体的单位圆域形状轮廓误

差重构如图 3-11 所示。

阶数 ( n )
0 1
2
3
…

表 3.2 前 3 阶的 Zernike 多项式极坐标形式

角频率 ( m ) 0 -1 1 -2
0
2
-3
-1
1
3 …

序号 ( j ) 0 1 2 3
4
5
6
7
8
9 …

极坐标形式
1 2 sin 2 cos 6 2 sin 3(2 2 1) 6 2 cos 8 3 sin 3 8(3 2  2) sin 8(3 2  2) cos 8 3 cos3
…

类型描述
常数平移项 垂直偏移项 水平偏移项 45°/135°散光
离焦 90°/180°散光
三角散光 慧差 慧差
三角散光 …

图 3-11 单位圆域平面特征基函数形状轮廓误差重构

当阶数增大以及采样频率提高时，Zernike 多项式在拟合中高频面形误差时将愈发 困难。因此，通常取前 j 项（j < 10）圆域内正交的 Zernike 多项式线性组合表征圆形平 面特征系统误差，其表达式如下：



   F2(, ) 

Q

j



Z

m n

(

,

)

j1

式中：Qj 为第 j 项 Zernike 多项式系数。

（3.7）

65

东南大学博士学位论文
当 Zernike 多项式基函数确定后，可以将圆形平面特征在 z 轴方向上的系统误差建 模问题转化为求解 Zernike 多项式的线性组合系数 Qj 的问题，进一步采用 Zernike 多项 式拟合算法[314（] 例如基于 Gram-Schmidt 正交化方法、协方差矩阵法以及 Householder 变 换法等）对上述问题进行求解，限于篇幅本节将不做展开赘述。
 勒让德-傅里叶（Legendre-Fourier）多项式法 作为描述圆柱面特征轮廓形状误差规范化表达的实现方法之一，勒让德-傅里叶多 项式法已经被证实在针对孔/轴类零件加工制造中对圆柱面特征形状轮廓具有较好的辨 识度[315][316]，即采用勒让德（Legendre）正交多项式描述圆柱面特征的轴向形状轮廓， 而采用傅里叶（Fourier）级数描述圆柱面特征的径向形状轮廓[317]。 我们知道，在圆柱坐标系(r, θ, z)下 Legendre-Fourier 多项式的一般形式可表达为：

mn

 r(z, ) 

 AijPj (z) cos(i )  BijPj (z)sin(i )

i0 j0

（3.8）

式中：r 表示圆柱面轮廓上点到圆柱轴线的距离， [ , ] ，z [1,1]；j 表示 Legendre

多项式的阶数；i 表示 Fourier 级数的次数；Pj(z)表示第 j 阶的 Legendre 多项式，具体形 式如式（3.9）所示，且{Pj(z)}(j=0, 1, 2, …)将构成一组完备的正交函数组，有如下形式：

  Pj (z)



1 2j j!

dj dz j

z2 1 j

（3.9）

因此，以圆柱面特征为例，任意一个三维空间的 r(z, θ)均可以用唯一的 Legendre-

Fourier 多项式模型来表示，其中，轴向形状轮廓描述函数用 Pj(z)表示，径向形状轮廓描 述函数用 sin(iθ)和 cos(iθ)。进一步，根据 Pj(z)具有的正交特性，系数 Aij 和 Bij 可表示为 如下形式：

    Aij 

t
k 1 t
k 1

u l 1

rkl

Pj

(

zk

u l 1

Pj2

(

zk

)

) cos(il cos2 (il

) )

,

Bij 

t k 1

u l 1

rkl

Pj

(

zk

)

sin(il

)

t k 1

u l 1

Pj2

(

zk

)

cos2

(il

)

（3.10）

式中：t 表示沿 z 轴方向上的采样点数；u 表示沿着径向方向上的采样点数；rkl 表示每个

采样点到圆柱轴线的距离值；zk 表示采样点的轴向坐标值；θl 表示径向相邻两个采样点

之间的间隔角度值。

为进一步说明 Legendre-Fourier 多项式在圆柱面特征系统误差建模的几何描述意义，

将式（3.10）中的系数 Aij 和 Bij 合成为系数 Gij，可以将式（3.10）简化为如下形式：

mn

mn

  r(z, ) 

rij 

Gij Fi Pj

i0 j0

i0 j0

（3.11）

66

第三章 面向数字孪生的零件非理想表面模型建模技术
式中：rij 表示圆柱面特征的采样序列；Fi 表示 Fourier 级数函数；Pj 表示 Legendre 多项 式函数。

由此可以得到前几阶次的圆柱面特征几何形状与对应参数 Gij 之间的关系，以及具 有代表性的典型几何形状描述图例，如表 3.3 和图 3-12 所示。

表 3.3 基于 Legendre-Fourier 多项式的圆柱面特征几何形状意义描述

轴向形状轮廓

描述函数

径向形状

轮廓描述函数

F0

1 0

F1

cosθ sinθ

F2

cos2θ sin2θ

F3

cos3θ sin3θ

几何形状描述符

P0
1
A00 B00 A10 B10 A20 B20 A30 B30
常数

P1
z
A01 B01 A11 B11 A21 B21 A31 B31
锥型

P2

P3

(3z2-1)/2 (5z3-3z)/2

A02 B02 A12 B12 A22 B22 A32 B32
抛物型

A03 B03 A13 B13 A23 B23 A33 B33
波浪型

几何形状 描述符
对称型 偏置型 双叶瓣型 三叶瓣型

(a)

(b)

(c)

(d)

(e)

(f)

(g)

(h)

(a)标准型; (b)倾斜型(轴向); (c)香蕉型; (d)波浪型; (e)负锥型; (f)正锥型; (g)凹型; (h)凸型 图 3-12 圆柱面特征重构的典型几何形状图例

假设圆柱面特征上沿轴向在 M 阶 Legendre 多项式函数的零点采样 M 点，沿径向均 匀采样 N 点，为准确建模仿真计算出圆柱面特征轮廓几何形状系统误差，可采用不超过 M-1 阶、(N-1)/2 次的 Legendre-Fourier 多项式模型来描述，具体的形式如下：

M 1 ( N 1) 2

  F3(z, ) 

 AijPj (z) cos(i )  BijPj (z)sin(i )

i0 j0

(3-12)

综上所述，依据三种不同的基函数法对应三种常见类型的曲面特征（矩形平面特征、

67

东南大学博士学位论文
圆形平面特征以及圆柱面特征）系统误差建模仿真过程，可以很容易地获得在设计规范 阶段存在形位公差的零件曲面特征的系统误差。更进一步，再分别结合随机误差与系统 误差建模仿真方法，将两者计算得到的误差项叠加至原始理想采样点集上形成新的曲面 特征离散点集，从而得到在零件设计规范操作过程中的肤面形状模型。 3.4.2.2 认证生成方法
认证生成方法主要是指从已加工制造完成的实际零件出发，在测量数据采样策略下 利用测量仪器检测并获取实际零件表面的有限个离散点云数据，借助点云数据预处理方 法（如数据降噪、噪声滤除、平滑/对齐/补点/缝合、点云精简等）和零件表面形貌多尺 度信息提取手段（如小波分析理论等）对实际零件模型的表面几何要素不同尺度下的空 间高度分布进行提取、分离与表征，从而得到包含不同误差成分的离散点集生成的非理 想表面模型，并以此模型作为认证肤面形状模型的基础。
开始

产品实际工件 测量设备 - 三坐标测量机 - 激光扫描仪器
采集离散点云数据 （几何表面三维坐标点）
点云数据预处理
产品表面数据分解 （多尺度离散小波变换）
产品表面数据重构 （多尺度离散小波逆变换）

产品表面形貌误差成分 频带划分

形 状 误 差

波 纹 度

粗 糙 度

验证是否符合

否

公差设计规范要求？

是

多尺度形貌误差成分 合成叠加

生成非理想表面模型 （认证肤面形状模型）

结束
图 3-13 认证操作过程生成肤面形状模型的流程图

对于实际零件模型而言，认证生成 SMS 的方法具体操作过程如下：通过测量仪器 在测量数据采样策略驱动下获取得到实际零件关键特征表面的原始离散点云数据，在对 原始点云数据集进行预处理后将空间表面形貌数据转换至实际零件二维表面高度场，运 用小波分析理论对实际零件表面形貌进行多尺度滤波处理与分解重构，再按照误差成分 （原始表面、形状误差、波纹度以及粗糙度）进行频带划分后，提取和分离得到实际零
68

第三章 面向数字孪生的零件非理想表面模型建模技术
件表面形貌在不同尺度下各误差成分的离散点集，从而实现零件非理想表面模型的逆向

重构，并与零件设计规范的几何要素进行对比，分析实际零件表面形貌特征是否满足零

件几何公差设计规范要求，经认证检验后的非理想表面模型可用来表征认证肤面形状模

型，上述过程的具体实现流程如图 3-13 所示。

为实现实际零件关键特征表面点云数据的采集，可以通过两种方法（即机械探针扫

描仪、三坐标测量仪等接触式测量以及光学、超声波、激光扫描等非接触式测量）进行

测量获取。一般地，接触式测量是利用探测球形测头与实际零件表面发生点触，将接触

位置信息传递至计算机测量软件中，并通过测量不确定度与误差补偿计算方法获取实物

外形的空间坐标数据，从而实现零件几何尺寸的测量；而非接触式测量大多是采用机器

视觉检测技术，例如激光三角测距法或结构光法等，通过光学传感器接收并成像被测零

件表面反射回来的光束，然后通过设备内部器件对应间距的几何关系计算出光线发射器

与被测零件表面的间距，从而获取得到实物零件上各点的实际空间位置。因此，上述两

种测量方法使得采集实际零件表面的三维空间坐标数据成为可能，然而，接触式/非接触

式测量手段均存在各自的缺点，对于扫描得到庞大繁杂的原始离散点云数据需要进行预

处理后才能适用于后续的认证操作过程，否则将导致逆向重构生成 SMS 的严重失真，

甚至出现与实际零件完全不一致的情况。表 3.4 所示为接触式和非接触式测量方法的优

缺点对比。

为充分发挥两者测量手段的优势，且避免离散点云集的复杂预处理步骤，本文综合

接触式和非接触式测量方法，选用可集成硬测头与激光测头于一体的柔性便携式测量仪

器对实物零件各关键特征表面分别进行测量，并根据不同的零件结构特点与应用场合选

用适当的测头，从而得到实际零件表面离散点云数据集。

类型 接触式 测量方法
非接触式 测量方法

表 3.4 接触式与非接触式扫描点云测量方法对比

示例说明

优点
 测量精度和可靠性较高；  不受物体表面颜色、反射特性
等因素影响；  可直接测量工具的几何特征。
 测量速度快；  不受被测零件材质的影响，可
测量薄壁件、柔软、不可接触 等工件；  不会损伤实际零件表面精度。

缺点  逐点测量速度慢；  测头与零件表面接触可能发生
局部变形、磨损等；  无法测量深孔、小孔、窄缝；  对被测零件材质、硬度等要求
较高。  点云数据中掺杂大量噪声点；  测量精度较差，尤其是当工件
与测头不垂直时误差较大；  受物体表面颜色、反射特性等
因素影响；  无法直接测量特定几何特征；  实际零件表面质量对测量精度
影响较大。

69

东南大学博士学位论文
在采集获得原始离散点云数据并进行预处理后，对于认证肤面形状模型的生成，关 键在于如何实现多尺度、高保真的实际零件表面形貌特征的表征。因此，本节从实际零 件表面形貌误差成分频带划分原则出发，采用离散小波分析实现对获取的离散点云数据 进行多尺度滤波处理与分解重构，进而提取和分离不同尺度下的几何误差成分，以实现 零件非理想表面模型的逆向重构。下面具体针对上述方法流程逐一进行阐述。
（1）零件表面形貌误差成分频带划分原则 为了能够获得具有宏观和微观几何形貌误差成分的非理想表面模型，需首先解决的 问题是能够准确提取实际零件表面形貌不同尺度的几何误差成分。根据新一代 GPS 标 准[299]，可以将零件表面原始轮廓视为粗糙度轮廓、波纹度轮廓以及形状误差轮廓三种 不同波长成分的叠加。如图 3-14 所示，粗糙度轮廓属于微观几何误差，是在原始表面轮 廓的基础上应用长波长轮廓滤波器 λs 所形成的轮廓，通常波距小于 1mm；波纹度轮廓 是处于宏观和微观之间的几何误差，是在原始表面轮廓连续应用 λs 和 λc 两个轮廓滤波 器之后所形成的轮廓，通常波峰之间的距离在 1~10mm 之间；而形状误差轮廓则是属于 宏观几何误差，是在原始表面轮廓上应用 λf 轮廓滤波器抑制短波成分后所形成的轮廓， 通常波距大于 10mm。上述表面粗糙度轮廓、波纹度轮廓、形位误差轮廓的临界波长（频 率下限）分别为 λs、λc 和 λf。
零件原始表面轮廓

传输系数/%

100
噪声
50

粗糙度轮廓

波纹度轮廓

形状误差

λs

λc

λf

波长

图 3-14 零件表面形貌误差成分频带划分

（2）基于小波分析的零件表面形貌多尺度分解与重构 通过总结前人的研究发现，对于模拟零件表面形貌建模的方法大体上可以归纳为以 下四种：假设零件表面微凸体几何形状与分布的统计方法[318][319]、基于自相关函数的逆 傅里叶变换法[320][321]、采用分形维数表征的模拟建模方法[322][323]以及基于实际测量数据 的表面重构方法[324][325][326]。上述前三种方法虽然均可以实现零件表面形貌的模拟仿真，
70

第三章 面向数字孪生的零件非理想表面模型建模技术
但由于在表面模拟仿真时仅考虑了有限个评价参数，导致无法精确且高保真地反映真实 物理环境下的零件表面形貌，同时也正是考虑到无法与真实物理零件形成虚实互联，因 此前三种方法并不适用于基于数字孪生的零件认证肤面形状模型的生成；而第四种方法 则正是基于真实三维测量数据对零件表面形貌进行重构，所重构的表面不仅具有与真实 零件表面形貌相同的宏微观几何形貌结构，而且还具备较好的重构保真度与表面性能， 能够保证认证肤面形状模型生成的可靠性以及后续装配精度预测的准确性。其中，小波 变换法（Wavelet Transform，WT）是在零件表面形貌重构方面应用最为广泛的手段之一。
我们可以将经预处理后的零件关键特征表面的离散点云数据视作零件表面形貌特 征高度场的非稳定随机信号，采用二维离散小波分析可以将零件表面形貌的高度信息分 解到四个不同误差尺度（原始表面、形状误差、波纹度以及粗糙度）下，然后在不同尺 度下经由小波的线性组合进行重构，从而实现不同误差成分的提取和分离。
假设零件表面形貌特征高度场为 Hz(x, y)，将 Hz(x, y)看作二维粗糙表面非平稳信号 的离散采样点，包含零件原始表面、形状误差、波纹度以及粗糙度的多尺度误差成分。 根据零件表面形貌误差成分频带划分原则，将不同尺度下的频率范围分为 ω0~ω3，对应 关系为：形状误差高度场 Hf(x, y)对应低频部分[ω0, ω1]，波纹度高度场 Hw(x, y)对应带通 部分[ω1, ω2]，粗糙度高度场 Hr(x, y)对应高频部分[ω2, ω3]，其中，ω1=1/λf 为波纹度轮廓 误差成分的频率下限，ω2=1/λc 为粗糙度轮廓误差成分的频率下限，ω3=1/λs 为离散采样 间隔的频率上限。相应的数学模型有如下形式：

Hz (x, y)  H f (x, y)  Hw(x, y)  Hr (x, y)

（3.13）

根据小波分析理论，可将零件表面形貌特征高度场离散信号分离为几个不同的误差

频带，进一步可运用小波变换特性将零件表面形貌按不同频率成分进行多尺度分解。令

零件表面形貌特征高度场 Hz(x, y)作为小波分析的输入信号，采用具有多尺度分析的马 拉（Mallat）分解与重构算法实现二维离散小波变换[327][328]，具体按照下式进行 Mallat 分

解：

  C


j

(n,

m)



l

hl2n hk2mC j1(k, l )
k

  


D

h j

(n,

m)



l

hl2n g k2mC j1(k, l )
k

  


D

v j

(n,

m)



g l2n hk2mC j1(k, l)



lk

  


D

d j

(n,

m)



l

g l2n g k2mC j1(k, l )
k

( j  1, 2, , N )

（3.14）

式中：j 和 N 分别表示当前以及最终小波分解的层次；n 和 m 分别表示零件表面形貌在

71

东南大学博士学位论文
    x 和 y 方向上的小波基函数的序号； h 和 g 分别表示低通滤波器和高通滤波器；Cj 和

Dj 分别表示原始高度场离散信号 Hz(x, y)经过尺度空间的 j 次分解（即尺度为原始信号的

2j）后形成的低频部分和高频部分，而

Cj+1

表示

Cj

分解后剩余的低频子集，

Dh j 1

、

Dv j 1

和

Dd j 1

分别表示

Cj

分解后剩余的水平方向、垂直方向及对角线方向的高频子集。

零件表面形貌特征高度场的小波分解具体流程如图 3-15 所示。随着零件原始轮廓

高度场信号的不断分解，每一层信号的行（x 方向）和列（y 方向）分辨率（即剩余数据

量）将减少为原始信号的一半，直至完成逐层的小波分解任务。当小波分解至最终第 N

层时，将舍弃分解过程中涉及到的所有高频子集，即 Dhj (n, m)  Dvj (n, m)  Ddj (n, m)  0 ， 然后再通过小波分解的逆过程进行零件表面形貌多尺度重构，具体表达形式如下：

  C j1(n, m) 

hn2lhk2mC j (k, l)+

hn2l

g

k

2

m

D

h j

(k

,

l

)

lk

lk

  

gn2l

hk

2m

D

v j

(k

,

l

)



gn2l

gk

2m

D

d j

(k

,

l

)

( j  N , N  1,

lk

lk

（3.15） , 1)

零件表面 形貌特征
Hz(x, y)
Hz (x, y)
…
Cj

L
hx gx

LL2 HL2

LL1 HL1

HL1

LH2 HH2

H

…

LH1 HH1

LH1 HH1

零件表面形貌特征信号 每一层小波分解流程

hy

2

2

gy

2

hy

2

2

gy

2

C j1 Dh
j 1
Dv j 1
Dd j 1

… … 舍弃
舍弃
舍弃

（H-高通滤波，L-低通滤波，LL-低频信息区域，HL-垂直高频区域，LH-水平高频信息区域，HH对角高频信息区域）
图 3-15 零件表面形貌特征高度场的小波分解具体流程图

因此，根据上述的小波分解与重构算法，对于零件表面形貌不同尺度的误差成分可 以不断地进行分解，每进行一层分解其误差频率将相应地降低，并最终实现整个零件表 面形貌特征在不同尺度下的有效分离。需要说明的是，小波分解过程由于受到零件表面 形貌测试数据量的限制，其分解次数也存在最大值，假设预处理后的零件表面形貌离散

点云数据横向和纵向点数分别为 Nx和 Ny，则小波分解最大次数为

J



  

ln(min{N x ln 2

,

N

y

})

  

。

72

第三章 面向数字孪生的零件非理想表面模型建模技术
依据零件表面形貌误差成分频带划分原则可知，为了获取零件表面的形状误差、波

纹度以及粗糙度的三种不同尺度误差成分，需要经历三次小波分析进行不同尺度下的误

差成分提取，设第 i 次小波分析需要分解 Ni 层次，则应满足以下表达式：

  Ni



ln i  ln  ln 2

Ls

 

i  f ,c, s,i  f ,c,s

（3.16）

式中：Ls 表示截止波长；Nf、Nc 和 Ns 分别表示形状误差、波纹度以及粗糙度三种不同尺 度对应的小波分解层次。

对于零件表面形貌特征不同尺度信息提取与分离过程，如图 3-16 所示，在经历 Nf 层小波分解与小波重构后完成第一次小波分析，只得到包含 Nf 层的低频信息，进而可以 分离出形状误差高度场 Hf(x, y)；在原始表面形貌特征高度场中剔除形状误差高度场后经 历 Nc 层的第二次小波分析，同样只对包含 Nc 层的低频信息进行分解，从而分离出波纹 度高度场 Hw(x, y)；进一步剔除波纹度高度场信息，在完成 Ns 层的第三次小波分析后， 可以分离出粗糙度高度场 Hr(x, y)。

开始

零件表面 形貌特征
Hz(x, y) 多尺度高度场 信息提取

Hf(x, y)

形状误差 高度场

Hw(x, y)

小波分析 Nf

小波分析

波纹度 高度场

粗糙度+ 波纹度+ 形状误差

Nc
粗糙度+ 波纹度

小波分析 Ns

Hr(x, y)
粗糙度 高度场

粗糙度

结束

图 3-16 零件表面形貌特征高度场多尺度信息提取分析流程

综上所述，采用离散小波分析对实际物理零件表面形貌特征进行逐层分解与重构， 可以获得不同尺度误差成分下实际零件的几何形状公差、波纹度及粗糙度等表面形貌特 征，进而可以针对零件表面形貌进行多尺度表征，实现物理零件关键特征表面的非理想 表面模型的逆向构建，从而得到在零件检验认证操作过程中的肤面形状模型。需要特别 指出的是，上述描述的零件空间表面形貌特征默认分布是在矩形平面上，对于其他常见 的曲面特征类型（例如圆形平面特征、圆柱面特征等），可以将三维空间表面形貌首先转 换成有限个离散的二维截面轮廓进行基于小波分析的多尺度误差表征，再进行合成并推

73

广至三维空间表面形貌[329][330]。

东南大学博士学位论文

3.4.3 基于肤面形状模型的零件非理想表面模型生成

经由上一节关于 SMS 生成方法描述可知，我们可以得到在零件设计阶段与实测阶

段均满足给定几何公差要求的 SMS。为进一步实现从彼此独立的 SMS 到完整的零件非

理想表面模型的转变，仍需解决两个关键问题：一方面，针对给定的零件关键几何特征

所有的 SMS，它们之间是相互独立的，需要对所有分割表面进行结合操作，以重新构成

完整的零件表面模型；另一方面，针对表面结合重新生成的“新”零件，为符合面向 DT

的零件非理想表面模型的表达要求，需要综合考虑实际约束条件（例如载荷约束下的受

力变形[226][288][301]等情形）对 SMS 进行补偿与修正，以“最佳状态”合理地表达零件非

理想表面模型。鉴于此，本节总结出基于 SMS 的零件非理想表面模型生成方法如图 3-

17 所示，以下分别针对上述两个关键问题进行分析和阐述。

设计 阶段

零件模型阶段

实测 阶段

加工

零件CAD模型

零件实物模型

制造

规范 操作过程

肤面形状模型

认证 操作过程

肤面形状模型 表面结合
修正后的 肤面形状模型
零件非理想 表面模型
图 3-17 基于肤面形状模型的零件非理想表面模型生成思路
3.4.3.1 肤面形状模型表面结合 无论是在零件设计阶段由零件 CAD 模型经规范操作形成 SMS，还是在零件实测阶
段由零件实物模型经认证操作形成 SMS，所有关键特征表面形成的 SMS 均是非理想且 相互独立的。如图 3-18 所示，与设计公称模型相比，SMS 由于各关键特征表面存在几 何偏差，将造成表面结合时特征边缘无法实现平滑连接，两个邻域表面特征（以非理想 /非理想表面结合为例）连接对应点时可能出现间隙（如图 3-18(a)-(c)）或相交（如图 318(d)）的情况，从而无法构成完整的零件模型。

74

第三章 面向数字孪生的零件非理想表面模型建模技术 公称表面结合

肤面形状模型表面结合

(a)

(b)

(c)

(d)

图 3-18 基于肤面形状模型的零件非理想表面结合连接情形

为保证基于 SMS 的零件非理想表面结合时的几何形状精度以及表面特征之间的无 缝衔接，一般归纳起来大致可以分为两类常用方法[216][300]，如图 3-19 所示，第一种方法 是将 SMS 表面特征顶点处于边缘棱边或角点处的偏差矢量在局部法平面上求交集，再 采用网格调整方法，例如拉普拉斯算子网格调整法[331]、弹簧近似法[332][333]等，实现存在 间隙或相交网格的平滑连接；第二种方法是将 SMS 表面特征上的所有顶点偏差值视作 位移边界约束条件，再通过有限元分析法（Finite Element Analysis，FEA）采用拉格朗日 法或罚函数法求解位移矩阵，从而得到全局网格节点的实际偏差[334]。

网格调整

调

节

位移边界

方

约束条件

向

(a)方法 1

(b)方法 2

图 3-19 基于肤面形状模型的零件非理想表面结合方法对比

3.4.3.2 肤面形状模型修正 为高保真度地实现基于 SMS 的零件非理想表面模型建模，确保零件非理想表面模
型仿真的高精度与高质量，需要在 SMS 表面结合形成“新”零件的基础上，充分考虑 在实际约束条件下对 SMS 的综合影响，进而通过对 SMS 的补偿与修正，完成基于 SMS 的零件非理想表面模型的最终生成与建模表达。需要指出的是，实际约束条件为零件模 型在实际物理环境中受到来自外界载荷场的综合作用所附加的约束条件，例如力学场
75

东南大学博士学位论文
（外力、压强、重力等）以及热/温度场，将导致 SMS 在空间几何与尺寸方向上产生变 形偏差。因此，本节将考虑在实际约束条件（主要研究在载荷作用下的零件表面受力变 形）下对 SMS 进行补偿与修正，不仅可以实现高精度的基于 SMS 的零件非理想表面模 型生成，而且还可以为后续产品装配精度预测提供高可靠度的模型基础。
目前，已有大量文献研究表明外部载荷，例如力学场（外力、压强、重力等载荷场） [269][335]以及热/温度场[336][337][338]等，对实际工作状态下零件表面模型变形的影响往往是 不能忽略的。无论是通过规范生成方法还是通过认证生成方法得到的 SMS，均需要面向 载荷约束对 SMS 加以补偿和修正，上述操作可以进一步实现零件加工制造形状误差和 零件变形误差的综合考量，以获得更加逼近零件真实状态的零件非理想表面模型，并以 此作为 PDTM 的表达基础，为后续研究和探讨基于 DT 的产品装配精度预测提供前提条 件。
当前，FEA 常常被用于机械产品零部件在载荷约束下获取实际变形量的仿真分析手 段，通过有限离散网格化单元节点以及借助各种力学数值计算方法、有限元法或者常见 的经典有限元仿真软件（例如 ABAQUS、ANSYS Mechanical、COMSOL Multiphysics、 MSC.Nastran 等），模拟仿真计算得到零部件每个单元节点由载荷约束引起的几何变动 量。因此，本节采用 FEA 计算考虑载荷约束条件下的基于 SMS 的零件非理想表面模型 的变形量，从而实现面向载荷约束的 SMS 的补偿与修正。
引入 载荷约束

输入 肤面形状模型
定义边界约束 和载荷约束

网格划分 (节点坐标值)
有限元计算 (有限元法或
软件仿真)

定义材料属性 (密度、弹性 模量、泊松比)

肤面形状模型 变形量修正 (节点变形量)

输出

图 3-20 基于有限元分析的肤面形状模型变形量修正流程
基于 FEA 的 SMS 变形量修正流程如图 3-20 所示，它主要是从离散网格单元节点 分析出发，通过建立 SMS 在载荷约束下的应力、应变以及每个单元节点力、节点位移 之间的关系，构成每个单元节点的位移刚度方程，进而经由整体分析得到零件模型总的 位移刚度方程，在确定模型的边界约束和载荷约束条件后，求解得到各单元节点的位移，
即 SMS 的变形量。假设各单元的刚度矩阵为 Ke ，各单元节点的位移矢量列阵 qe ，各单 元节点外力（载荷）矢量列阵 Pe ，可以得到单元节点力与位移之间的刚度方程关系式

76

为：

第三章 面向数字孪生的零件非理想表面模型建模技术

Ke  qe  Pe

（3.17）

将式（3.17）扩展至整体全局坐标系下，通过坐标变换矩阵 Te 使各单元刚度矩阵叠
加形成零件模型总的刚度矩阵 K，并利用零件模型的边界条件与载荷约束的力平衡条件， 最终可以形成零件模型的整体节点力（载荷）矩阵 P 与整体节点位移矩阵 q 之间的表达 式：

Kq P

（3.18）

K = TeTKeTe P  TeTPe
qe  Teq

（3.19）

为求解式（3.18）得到零件 SMS 上所有单元节点的整体位移（即节点变形量），可

采用有限元法（例如拉格朗日乘子法和罚函数法）或直接运用软件仿真求解得到整体的

节点位移。因此，经有限元计算后可以得到 SMS 中各网格节点变动后的坐标值以及对 应的变形量，从而可实现面向载荷约束的 SMS 表面修正。如图 3-21 所示，每个单元节

点补偿修正后的最终坐标表达式可写成如式（3.20）的形式，其中，Ck0  表示原始生成

的 SMS 表面节点坐标矩阵，CkD  表示每个单元节点在载荷约束作用下的变形量，Ck 
表示考虑载荷约束后生成的最终 SMS 表面节点坐标矩阵。

Ck   Ck0   CkD 
载荷约束

肤面形状模型 表面2#
变形量

（3.20）

dθy
dθx dz

z y

O

x

肤面形状模型 表面1#
变动误差表面 （理想表面）
公称设计表面 （理想表面）

图 3-21 考虑载荷约束的肤面形状模型表面修正

综上所述，在实现 SMS 表面结合后，经由面向载荷约束的零件 SMS 表面修正，对 原始 SMS 的非理想表面通过叠加变形修正量进行表面重构，从而生成更加逼近于真实

77

东南大学博士学位论文
表面形貌且符合实际应用场景的零件非理想表面模型，图 3-22 所示为基于 SMS 的零件 非理想表面模型的完整建模流程。

零 建模 件 流程 模
型

规范生成 CAD模型 方法

肤面形状模型 表面结合
位移边界

认证生成

约束

实物模型 方法 肤面形状模型

有限元 分析

表面接触 受力变形

非理想表面 模型重构
提取节点 变形量 （修正）

工具 支撑

三维CAD 建模软件

数据分析 计算软件

CATIA V5

有限元 仿真软件

图 3-22 基于肤面形状模型的零件非理想表面模型建模流程

CATIA V5

3.5 实例分析
本节将通过一个简单的零件模型来验证本章所提出的面向 DT 的零件非理想表面模 型生成与建模技术的合理性与可行性。零件模型如图 3-23 所示，其中，零件设计模型如 图 3-23(a)所示，其关键表面特征为零件的上表面以及圆柱孔表面，实物零件模型如图 323(b)所示，具体的 GD&T 信息为：上表面长宽尺寸为 50mm×50mm，高度尺寸为 50mm， 尺寸公差为 0.2mm，其位置度为 0.06mm，平面度为 0.05mm；圆柱孔表面直径尺寸为
25 mm，尺寸公差为 0.1mm，孔的直线度为0.05 mm。
0.06 A B 0.05
Φ0.05

Φ25±0.05 50±0.1

(a)三维设计模型

50 A
(b)平面特征与孔特征的 GD&T 信息 图 3-23 某简单零件模型示例

(c)实物模型

（1）零件肤面形状模型建模仿真 根据第 3.4 节的内容可知，针对图 3-23 的零件 SMS 建模仿真可以采用两种生成方 法得到关键表面特征的 SMS，下面将针对两种生成方法分别进行仿真分析、验证与对比 评价。

78

第三章 面向数字孪生的零件非理想表面模型建模技术
 规范生成方法仿真 由图 3-9 的规范生成方法仿真得到 SMS 的实现流程可知，首先以零件 CAD 模型为 对象，通过特征识别与分割，提取关键表面特征（平面特征以及孔特征）并进行离散化 处理，得到关键特征表面的网格模型。本例采用商用 CAD 软件（CATIA V5）实现该零 件 CAD 模型的关键特征表面的离散、网格细分等操作，从而得到零件 CAD 模型的平面 与孔特征的网格模型如图 3-24 所示，其中，平面特征和孔特征的网格模型分别由 546 个 节点和 500 个矩形单元、1300 个节点和 1250 个矩形单元构成。
546 nodes 500 elements

z

x

y

CAD模型

特征 识别

提取 特征

离散 1300 nodes
细分 1250 elements

图 3-24 零件模型关键表面特征识别、提取与离散化处理

网格 模型

针对零件上表面和圆柱孔表面的网格化特征，进一步根据零件模型的 GD&T 信息，

通过计算机数值仿真，分别将随机误差和系统误差叠加至原始公称网格模型对应的离散

节点上，从而得到零件关键表面特征的规范 SMS。本实例中，零件上表面和圆柱孔表面

采用基于 MCMC 的 Gibbs 统计仿真法生成服从高斯分布的随机误差，而对于系统误差

仿真而言，平面特征采用 DCT 法生成符合公差规范要求（平面度为 0.05mm）的系统误

差，圆柱孔特征采用 Legendre-Fourier 多项式法生成符合公差规范要求（圆柱度为 0.05mm）

的系统误差，具体仿真结果见表 3.5 所示。

表 3.5 零件平面特征与圆柱孔特征仿真生成的规范肤面形状模型

表面 类型

具体参数

公称模型

随机误差

长度×宽度

平面

=50×50mm 平面度

特征

0.05mm 采样点：

26×21=546 直径×高度

=Φ25×50mm

圆柱孔

圆柱度

特征 1）

0.05mm 采样点：

50×26=1300

1）为便于显示，将圆柱孔特征的圆柱度公差放大了 30 倍。

系统误差

规范 肤面形状模型

79

东南大学博士学位论文
根据零件平面特征和圆柱孔特征的规范 SMS 仿真结果，可以得到相比于各自理想 公称特征的偏差对比图，如图 3-25 所示，其中，平面特征的高度平均偏差为 3.1856μm， 标准差为 10.4995μm；圆柱孔特征的半径平均偏差为 15.9889μm，标准差为 10.7470μm。

高度位置变动量/mm 半径位置变动量/mm

25.03 25.02

最大值：25.0229

平均值：25.0003

25.01

25

24.99

24.98
24.97 0

位置偏差 平均位置

最小值：24.9770

50 100 150 200 250 300 350 400 450 500
采样点数

12.54 12.53 12.52 12.51 12.5 12.49 12.48
0

最大值：12.5372

平均值：12.5160

位置偏差 平均位置

最小值：12.4883

200 400 600 800 1000 1200
采样点数

(a)平面特征

(b)圆柱孔特征

图 3-25 零件平面特征和圆柱孔特征的规范肤面形状模型偏差仿真结果

 认证生成方法仿真

由图 3-13 的认证生成方法仿真得到 SMS 的实现流程可知，首先以实物零件模型为 对象，采用海克斯康（Hexagon）Romer 系列绝对关节臂（RA7525SEI）设备对实物零件 的上表面和圆柱孔表面进行测量，利用非接触式激光扫描和接触式探针相结合的方式获

取测量表面的三维空间坐标值，如图 3-26 所示；然后，将各测量表面获得的点云数据经 过数据精简处理（点云降噪、过滤、对齐等）操作后，利用数据分析软件（MATLAB） 对实际测量原始表面形貌进行可视化仿真，如图 3-27 所示。需要指出的，鉴于当前测量 设备对于圆柱孔表面的测量空间限制，本节仅对实物零件的上表面运用认证生成方法进

行仿真验证，后续可采取更换测量设备的方式对圆柱孔表面进行类比分析并对其进行仿

真验证，这里将不再赘述。

海克斯康 Romer系列 绝对关节臂设备 （RA7525SEI）

接触式 探针测量

实物零件

非接触式 激光扫描测量

定位夹具

(a)实物零件测量场景

(b)测量结果

图 3-26 实物零件表面测量及其测量结果

80

第三章 面向数字孪生的零件非理想表面模型建模技术
单位: mm

图 3-27 实物零件实际测量原始表面形貌可视化仿真

为准确获取实物零件关键表面的 SMS，首先选取实物零件关键表面上某一截面的

二维轮廓进行展开分析，得到基于真实采样点的原始截面轮廓如图 3-28(a)所示；然后，

对上述原始截面轮廓信息进一步使用离散小波分析，并采用 Bior6.8 作为分解小波基函

数[339]对其进行多尺度误差成分（形状误差、波纹度及粗糙度）分离，由于进行小波变换

时最多能够实现 lb(n)次小波分解（其中 n 为采样点数），因此对实物零件的平面特征上

的 3000 个采样点的原始截面轮廓可进行 11 层分解，并经由多尺度误差成分的分离、提

取及重构操作，可以得到实物零件平面特征表面截面轮廓处不同尺度下的形貌误差信息，

如图 3-28(b)-(d)所示。
50.1

50.05 50

z/mm

49.95

49.9 0
0.04 0.02

250 500 750 1000 1250 1500 1750 2000 2250 2500 2750 3000
n (a)原始截面轮廓

z/mm

0

-0.02 -0.04
0
0.02

250 500 750 1000 1250 1500 1750 2000 2250 2500 2750 3000
n
(b)形状误差

0.01

z/mm

0 -0.01

-0.02 0

250 500 750 1000 1250 1500 1750 2000 2250 2500 2750 3000
n (c)波纹度
81

z/mm

东南大学博士学位论文 0.02 0.01
0 -0.01 -0.02
0 250 500 750 1000 1250 1500 1750 2000 2250 2500 2750 3000
n (d)粗糙度 图 3-28 实物零件实际测量截面轮廓多尺度形貌误差分离
根据上述二维截面轮廓的多尺度形貌误差分离结果，可以将不同的二维截面轮廓形 貌误差进行合成叠加，并进一步扩展至三维离散表面，从而生成非理想表面的认证 SMS， 如图 3-29 所示。由实物零件平面特征的认证 SMS 仿真结果可知，同样可以得到相比于 理想公称特征的偏差对比，平面特征在高度方向上的平均偏差为-1.8037μm，标准差为 8.6355μm。需要说明的是，在本实例中经离散小波分析得到的实物零件认证 SMS 主要 用于形状误差的表征，如果需要针对不同几何偏差粒度的实物零件进行仿真表达，可以 按照误差成分频带划分实现对实物零件波纹度和粗糙度的生成。
单位: mm
图 3-29 零件平面特征仿真生成的认证肤面形状模型
（2）零件肤面形状模型表面结合与修正 针对上述两种生成面向关键特征表面的 SMS 的方法而言，为得到最终的基于 SMS 的零件非理想表面模型，需要对所有独立的关键表面 SMS 进行无缝平滑连接与表面结 合。由于本实例的关键表面仅为平面特征和圆柱面特征，可以采用第 3.4.3 小节的方法 1 直接在公称表面模型上叠加 SMS 的偏差值，从而经表面网格节点结合形成零件关键 表面的 SMS，如图 3-30 所示。这里需要指出的是，本实例暂未考虑实际约束条件下进 一步对 SMS 的补偿与修正，关于 SMS 的修正可以参考后续第 5 章节。
82

